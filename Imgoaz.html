<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
<title>ì„ê³ AZ</title>
<meta name="description" content="ì„ê³ AZ - ì´ˆë“± ì„ìš© ë‚´ì²´í‘œ, ê°œì²´í‘œ, ëª¨í˜• ì •ë¦¬ ì‚¬ì´íŠ¸">
<meta name="robots" content="index,follow">

<style>
body{
  margin:0;
  font-family:'Pretendard','Apple SD Gothic Neo','Noto Sans KR',sans-serif;
  color:#212529;
}
header{background:#0d6efd;color:#fff;padding:18px 24px;font-size:28px;font-weight:700}
nav{background:#f1f3f5}
nav ul{margin:0;padding:0;list-style:none;display:flex}
nav li{position:relative;padding:14px 18px;font-weight:600;cursor:pointer}
nav li:hover{background:#e9ecef}
.sub{display:none;position:absolute;top:48px;left:0;background:#fff;border:1px solid #ccc;z-index:10;min-width:140px}
.sub div{padding:10px}
.sub div:hover{background:#f1f3f5}
nav li:hover .sub{display:block}

.content{display:none;padding:30px}
.content.active{display:block}

/* ì²´í¬ë°•ìŠ¤ */
.subject{margin-bottom:40px}
.subject-title{font-size:22px;font-weight:700;margin-bottom:6px}
label{display:block;margin:6px 0;font-size:16px}
.progress-box{width:100%;height:24px;background:#e9ecef;border-radius:12px;overflow:hidden;margin-top:8px}
.progress-bar{height:100%;width:0%;background:#0d6efd}
.percent{font-weight:600;margin-top:4px}

/* ë‚´ì²´í‘œ */
.table-wrap{max-width:1100px;margin:auto}
.nt-title{font-size:22px;font-weight:700;margin:50px 0 10px}
th,td{border:1px solid #ddd;padding:10px;vertical-align:top}
th{background:#f8f9fa;width:180px}
.center{text-align:center;font-weight:600}
textarea{width:100%;height:34px;resize:none;font-family:inherit}
.rows textarea{margin-bottom:6px}

button{padding:8px 14px;margin-right:6px;border:0;border-radius:6px;cursor:pointer}
.grade{background:#0d6efd;color:#fff}
.clear{background:#adb5bd;color:#fff}
.correct{color:#0d6efd}
.wrong{color:#dc3545}
/* ===== ì‹¤ê³¼ ë‚´ì²´í‘œ ê³µí†µ ë””ìì¸ ===== */

table{
  background:#fff;
  border-radius:12px;
  overflow:hidden;
}

th{
  background:#f8f9fa;
  font-size:14px;
  font-weight:700;
  color:#343a40;
}

td{
  background:#fff;
}

textarea{
  border:1px solid #dee2e6;
  border-radius:6px;
  padding:6px 8px;
  font-size:14px;
  line-height:1.4;
}

textarea:focus{
  outline:none;
  border-color:#0d6efd;
  background:#f8fbff;
}

.nt-title{
  font-size:20px;
  font-weight:800;
  color:#212529;
}

button.grade{
  background:#0d6efd;
  font-weight:600;
}

button.clear{
  background:#adb5bd;
  font-weight:600;
}
/* ===== ì •ë‹µë¥  í‘œì‹œ ===== */

.score{
  margin-top:10px;
  padding:8px 12px;
  background:#f1f3f5;
  border-radius:8px;
  font-size:14px;
  font-weight:600;
  color:#495057;
}
/* ===== ì—­ëŸ‰ íƒ­ ===== */
.competency-wrap{
  max-width:900px;
  margin:auto;
  display:flex;
  flex-direction:column;
  gap:18px;
}

.competency-box{
  background:#fff;
  border-radius:14px;
  padding:18px 20px;
  box-shadow:0 4px 12px rgba(0,0,0,0.06);
}

.competency-title{
  font-size:18px;
  font-weight:800;
  margin-bottom:10px;
}

.competency-box textarea{
  width:100%;
  height:36px;
  margin-bottom:10px;
}

.competency-actions{
  display:flex;
  gap:6px;
}
/* ===============================
   ì „ì²´ í†¤ ì •ë¦¬
=============================== */
body{
  background:#f8f9fb;
}

/* ===============================
   í—¤ë” / ë„¤ë¹„ ê°œì„ 
=============================== */
header{
  letter-spacing:-0.3px;
  box-shadow:0 2px 8px rgba(0,0,0,0.08);
}

nav{
  border-bottom:1px solid #dee2e6;
}

nav li{
  transition:background .15s;
}

.sub{
  border-radius:8px;
  box-shadow:0 6px 16px rgba(0,0,0,0.08);
}

/* ===============================
   ì½˜í…ì¸  ì˜ì—­
=============================== */
.content{
  background:#f8f9fb;
}

/* ===============================
   ë‚´ì²´í‘œ ì¹´ë“œí™”
=============================== */
.table-wrap{
  display:flex;
  flex-direction:column;
  gap:60px;
}

.nt-title{
  display:flex;
  align-items:center;
  gap:6px;
  padding-left:4px;
}

/* í‘œ ìì²´ë¥¼ ì¹´ë“œì²˜ëŸ¼ */

/* ===============================
   í‘œ ë””í…Œì¼
=============================== */
th{
  text-align:left;
}

td.idea-block{
  line-height:1.7;
  font-size:15px;
}

/* ===============================
   ì…ë ¥ì¹¸ (textarea + blank)
=============================== */
textarea{
  transition:border .15s, background .15s;
}

.blank{
  width:90px;
  padding:4px 6px;
  border:1px solid #ced4da;
  border-radius:6px;
  font-size:14px;
  text-align:center;
}

.blank:focus{
  outline:none;
  border-color:#0d6efd;
  background:#f8fbff;
}

/* ===============================
   ë²„íŠ¼ ì •ë¦¬
=============================== */
button{
  box-shadow:0 2px 6px rgba(0,0,0,0.08);
}

button.grade:hover{
  background:#0b5ed7;
}

button.clear:hover{
  background:#868e96;
}

/* ===============================
   ì •ë‹µë¥  ë°•ìŠ¤
=============================== */
.score{
  display:inline-block;
  margin-top:14px;
}

/* ===============================
   ë„ë• / ì²´ìœ¡ / ì‹¤ê³¼ ê³µí†µ ê°€ë…ì„±
=============================== */
.rows textarea{
  background:#fcfcfd;
}

.rows textarea:focus{
  background:#f8fbff;
}
/* ===============================
   ì±„ì  ìƒ‰ìƒ íš¨ê³¼
=============================== */
.correct{
  background:#e6f4ea !important; /* ì—°ì´ˆë¡ */
}

.wrong{
  background:#fde8e8 !important; /* ì—°ë¶„í™ */
}
/* í•™ë…„êµ° í—¤ë” */
.sub-head{
  display: grid;
  grid-template-columns: 1fr 1fr;
  font-weight: 600;
}

/* ì§€ì‹/ê³¼ì •/ê°€ì¹˜ ë‹µì¹¸ */
.two-col{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

.two-col .col{
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.two-col textarea{
  width: 100%;
  resize: none;
}

.correct{
  color:#0d6efd;
  font-weight:600;
}
.wrong{
  color:#dc3545;
  font-weight:600;
}
  .admin-only{display:none;padding:8px 12px;background:#0d6efd;color:#fff;border:none;border-radius:5px;cursor:pointer;}
  #posts div{background:#fff;padding:10px;margin:8px 0;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.06);}
  #adminModal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);justify-content:center;align-items:center;}
  #adminModalContent{background:#fff;padding:20px;border-radius:8px;}
  #adminModal input{padding:5px;margin-right:5px;}
  
  .site-footer{
  margin-top:80px;
  padding:24px;
  text-align:center;
  font-size:14px;
  color:#555;
  background:#f8f9fa;
  border-top:1px solid #dee2e6;
}

.site-footer strong{
  color:#212529;
}
/* ===============================
   ì‚¬íšŒ ë‚´ì²´í‘œ ìŠ¤íƒ€ì¼
=============================== */

.social-table{
  padding:20px;
}

.social-table table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  margin-bottom:36px;
  background:#fff;
  table-layout:fixed; /* â­ textarea ì‚ì ¸ë‚˜ì˜¤ëŠ” ê±° ë°©ì§€ í•µì‹¬ */
}

/* í—¤ë” */
.social-table th{
  background:#f1f4f9;
  font-weight:600;
  font-size:14px;
  padding:10px 8px;
  border:1px solid #dfe3ea;
  text-align:center;
  color:#333;
}

/* ì¼ë°˜ ì…€ */
.social-table td{
  border:1px solid #e3e6ec;
  padding:6px;
  vertical-align:top;
  background:#fff;
}

/* ì²« ë²ˆì§¸ ì—´(ì˜ì—­/ë²”ì£¼) */
.social-table th:first-child,
.social-table td:first-child{
  background:#fff7e6;
  font-weight:600;
  text-align:center;
  width:90px;
  color:#8a5a00;
}

/* textarea ê³µí†µ */
.social-table textarea{
  width:100%;
  height:52px;
  resize:none;
  border:1px dashed #cfd4dc;
  border-radius:6px;
  padding:6px 8px;
  font-size:13px;
  line-height:1.4;
  box-sizing:border-box; /* â­ ì‚ì ¸ë‚˜ì˜´ ë°©ì§€ í•µì‹¬ */
  background:#fafbfc;
}

/* í¬ì»¤ìŠ¤ */
.social-table textarea:focus{
  outline:none;
  border-color:#0d6efd;
  background:#fff;
}

/* placeholder */
.social-table textarea::placeholder{
  color:#adb5bd;
}

/* ë¹ˆì¹¸ ì—†ëŠ” ì…€ì€ íë¦¬ê²Œ */
.social-table td:empty{
  background:#f9fafb;
}
/* ===============================
   ê°œì²´í‘œ / ë‚´ì²´í‘œ ê³µí†µ í…Œì´ë¸” ë””ìì¸
=============================== */
.subject-table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  background:#fff;
  border-radius:14px;
  overflow:hidden;
  box-shadow:0 8px 24px rgba(0,0,0,0.06);
  margin:30px 0;
}

/* í—¤ë” */
.subject-table th{
  background:#f4f7fb;
  color:#333;
  font-weight:700;
  font-size:15px;
  padding:14px 12px;
  border-bottom:1px solid #e5e7eb;
  text-align:center;
}

/* ì™¼ìª½ ê³ ì • ì˜ì—­(ì˜ì—­/ë²”ì£¼) */
.subject-table th:first-child{
  background:#fff6dd;
  color:#8a5a00;
  width:140px;
}

/* ì¼ë°˜ ì…€ */
.subject-table td{
  padding:14px 12px;
  border-bottom:1px solid #eef1f4;
  border-right:1px solid #eef1f4;
  vertical-align:middle;
}

.subject-table tr:last-child td{
  border-bottom:none;
}
.subject-table td:last-child{
  border-right:none;
}

/* ì…ë ¥ì¹¸ */
.subject-table input,
.subject-table textarea{
  width:100%;
  min-height:32px;
  padding:10px 12px;
  border:1px dashed #cfd8e3;
  border-radius:10px;
  font-size:14px;
  resize:none;
  outline:none;
  background:#fafcff;
  transition:.15s ease;
}

/* í¬ì»¤ìŠ¤ */
.subject-table input:focus,
.subject-table textarea:focus{
  border-color:#3b82f6;
  background:#fff;
}

/* ì±„ì  ìƒ‰ìƒ */
.subject-table textarea.correct,
.subject-table input.correct{
  color:#2563eb;
  font-weight:600;
}

.subject-table textarea.wrong,
.subject-table input.wrong{
  color:#dc2626;
  font-weight:600;
}

/* ëª¨ë°”ì¼ ëŒ€ì‘ */
@media (max-width:768px){
  .subject-table{
    font-size:13px;
  }
  .subject-table th:first-child{
    width:110px;
  }
}
/* ===============================
   ìŒì•… ê°œì²´í‘œ textarea ì •ë¦¬
=============================== */

.subject-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed; /* ğŸ”¥ ì´ê²Œ í•µì‹¬ */
}

.subject-table th,
.subject-table td {
  border: 1px solid #ddd;
  padding: 10px;
  vertical-align: top;
}

.subject-table td {
  word-break: break-word;
}

.subject-table textarea {
  width: 100%;
  box-sizing: border-box;
  resize: none;
  margin-bottom: 6px;
  min-height: 32px;
  padding: 6px 8px;
  font-size: 14px;
  line-height: 1.4;
}
/* ===============================
   ì‹¤ê³¼ / ë„ë• / ì²´ìœ¡ í‘œ ìµœì¢… ì •ë¦¬
=============================== */

.subject-table{
  width:100%;
  border-collapse:collapse;
  table-layout:fixed;
  background:#fff;
  margin:40px 0;
  border-radius:12px;
  overflow:hidden;
}

/* ===== ê³µí†µ ì…€ ===== */
.subject-table th,
.subject-table td{
  border:1px solid #e6e6e6;
  padding:12px 14px;
  font-size:14px;
  line-height:1.6;
}

/* ===== ì™¼ìª½ ì„¸ë¡œ ì œëª©ì¹¸ (í•µì‹¬ ì•„ì´ë””ì–´, ë²”ì£¼ ë“±) ===== */
.subject-table th.row-title{
  width:130px;
  background:#f3ead2;
  text-align:left;
  font-weight:700;
  vertical-align:middle;
}

/* ===== ìƒë‹¨ ê°€ë¡œ í—¤ë” ===== */
.subject-table th.col-title{
  background:#e9dfc3;
  text-align:center;
  font-weight:700;
  vertical-align:middle;
}

/* ===== ì¼ë°˜ ë‚´ìš©ì¹¸ ===== */
.subject-table td{
  background:#fff;
  vertical-align:middle;
}

/* ===== ë¹ˆì¹¸ (ì‘ê²Œ) ===== */
.subject-table .blank{
  width:90px;
  height:28px;
  padding:3px 6px;
  font-size:13px;
  border:1px solid #ced4da;
  border-radius:6px;
  text-align:center;
  resize:none;
  box-sizing:border-box;
}

/* ===== ì¼ë°˜ textarea ===== */
.subject-table textarea{
  width:100%;
  min-height:32px;
  padding:6px 8px;
  font-size:13px;
  border:1px solid #ced4da;
  border-radius:6px;
  resize:none;
  box-sizing:border-box;
}

/* ===== ì±„ì  ìƒ‰ ===== */
.subject-table textarea.correct{
  color:#0d6efd;
  font-weight:600;
}

.subject-table textarea.wrong{
  color:#dc3545;
  font-weight:600;
}
/* ===== (1) ì œëª© ì˜ì—­ ì •ë¦¬ ===== */
.nt-title{
  font-size:18px;
  font-weight:700;
  margin:24px 0 12px;
  display:flex;
  align-items:center;
  gap:8px;
}

.nt-title .blank{
  width:140px;
  height:32px;
  min-height:32px;
  padding:4px 6px;
  font-size:14px;
}
.bs-input{
  width:100%;
  min-height:36px;
  margin-bottom:6px;
  padding:6px 8px;
  font-size:14px;
  border:1px solid #ced4da;
  border-radius:6px;
  resize:none;
  box-sizing:border-box;
}

.bs-input:last-child{
  margin-bottom:0;
}
/* =========================================
   âœ… í‘œ ì „ìš© ë²„íŠ¼ (ìŠ¬ë¦¼ + ê°„ê²© ì¡°ì • ë²„ì „)
   - ì¹´ë“œ ì œì™¸
========================================= */

/* í‘œ ì•„ë˜ ë²„íŠ¼ ê³µí†µ */
.table-wrap button.grade,
.table-wrap button.clear,
#basle .table-actions.vertical button{
  width:100% !important;
  height:42px !important;          /* ğŸ”¥ ë” ìŠ¬ë¦¼ */
  border-radius:10px !important;
  font-size:14px !important;
  font-weight:700 !important;
  margin:12px 0 0 !important;      /* ğŸ”¥ ë²„íŠ¼ ê°„ê²© ì‚´ì§ ì¦ê°€ */
  box-shadow:0 2px 6px rgba(0,0,0,0.05) !important;
  letter-spacing:0.5px;
}

/* ì±„ì /ì •ë‹µ = íŒŒë€ìƒ‰ */
.table-wrap button.grade,
#basle .table-actions.vertical .btn-grade,
#basle .table-actions.vertical .btn-answer{
  background:#0d6efd !important;
  color:#fff !important;
}

/* ì§€ìš°ê¸° = íšŒìƒ‰ */
.table-wrap button.clear,
#basle .table-actions.vertical .btn-clear{
  background:#9ea4aa !important;   /* ğŸ”¥ ì‚´ì§ ë” ì—°í•œ íšŒìƒ‰ */
  color:#fff !important;
}

/* hover ë¶€ë“œëŸ½ê²Œ */
.table-wrap button.grade:hover{
  background:#0b5ed7 !important;
}
.table-wrap button.clear:hover{
  background:#868e96 !important;
}

/* =========================================
   âœ… ì •ë‹µë¥  ë°•ìŠ¤ (ìŠ¬ë¦¼ + ë²„íŠ¼ê³¼ ê°„ê²© ë§ì¶¤)
========================================= */
.table-wrap .score,
#basle .table-actions.vertical .score{
  width:100% !important;
  height:42px !important;          /* ğŸ”¥ ë²„íŠ¼ê³¼ ë™ì¼ ë†’ì´ */
  display:flex !important;
  align-items:center !important;
  padding:0 14px !important;
  border-radius:10px !important;
  margin:12px 0 0 !important;      /* ğŸ”¥ ë²„íŠ¼ê³¼ ë™ì¼ ê°„ê²© */
  background:#f4f6f8 !important;
  border:1px solid #e1e5ea !important;
  font-size:14px !important;
  font-weight:700 !important;
  color:#495057 !important;
  box-shadow:0 2px 6px rgba(0,0,0,0.05) !important;
}

/* =========================================
   âœ… ì¹´ë“œ ë²„íŠ¼ì€ ì˜í–¥ ì•ˆ ë°›ê²Œ ìœ ì§€
========================================= */
.competency-box button{
  width:auto !important;
  height:auto !important;
  margin-right:6px !important;
}
/* ===============================
   í•µì‹¬ì•„ì´ë””ì–´(ë¹ˆì¹¸) ìŠ¤íƒ€ì¼
=============================== */
.keyidea{
  line-height: 1.55;
  font-size: 14px;
}
.keyidea .ki-line{ margin: 2px 0; }
.keyidea .ki-input{
  width: 72px;
  height: 22px;
  padding: 2px 6px;
  margin: 0 2px;
  border: 1px solid #ced4da;
  border-radius: 6px;
  vertical-align: middle;
  font-size: 13px;
  outline: none;
}
.keyidea .ki-input.correct{ border-color: #198754; }
.keyidea .ki-input.wrong{ border-color: #dc3545; }

background: transparent;
border: none;
border-bottom: 2px solid #ced4da;
border-radius: 0;
</style>
</head>

<body>
  
<!-- ê´€ë¦¬ì ë¡œê·¸ì¸ ëª¨ë‹¬ -->
<div id="adminModal" style="display:none;">
  <div id="adminModalContent">
    <input type="password" id="adminPw" placeholder="ë¹„ë°€ë²ˆí˜¸">
    <button onclick="adminLogin()">í™•ì¸</button>
    <button onclick="closeAdminLogin()">ì·¨ì†Œ</button>
  </div>
</div>

<header style="display:flex; align-items:center; justify-content:space-between;">
  <span>ğŸ“ ì„ê³ AZ</span>

<div style="padding:10px; text-align:right;">
  <button id="adminLoginBtn" onclick="openAdminLogin()">ê´€ë¦¬ì ë¡œê·¸ì¸</button>
  <button id="adminLogoutBtn" onclick="adminLogout()" style="display:none;">ë¡œê·¸ì•„ì›ƒ</button>
</div>
</header>

<nav>
<ul>
<li onclick="show('home')">í™ˆ</li>
<li onclick="show('competency')">ì—­ëŸ‰</li>
<li>ëª¨í˜•<div class="sub"><div onclick="show('model-korean')">êµ­ì–´</div><div onclick="show('model-math')">ìˆ˜í•™</div><div onclick="show('model-social')">ì‚¬íšŒ</div><div onclick="show('model-science')">ê³¼í•™</div><div onclick="show('model-art')">ë¯¸ìˆ </div><div onclick="show('model-pe')">ì²´ìœ¡</div><div onclick="show('model-moral')">ë„ë•</div><div onclick="show('model-pa')">ì‹¤ê³¼</div><div onclick="show('model-bsj')">ë°”ìŠ¬ì¦</div></li>
<li>êµ­ì–´
  <div class="sub">
    <div onclick="show('kkorean')">ë¬¸ì œ</div>
    <div onclick="show('korean')">ë‚´ì²´í‘œ</div>
  </div>
</li>
<li>ìˆ˜í•™<div class="sub"><div onclick="show('mmath')">ë¬¸ì œ</div></div></li>
<li>ì‚¬íšŒ<div class="sub"><div onclick="show('ssocial')">ë¬¸ì œ</div><div onclick="show('social')">ë‚´ì²´í‘œ</div></div></li>
<li>ê³¼í•™<div class="sub"><div onclick="show('sscience')">ë¬¸ì œ</div></div></li>
<li>ì˜ì–´<div class="sub"><div onclick="show('eenglish')">ë¬¸ì œ</div></div></li>
<li>ìŒì•…
  <div class="sub">
    <div onclick="show('mmusic')">ë¬¸ì œ</div>
    <div onclick="show('music-object')">ê°œì²´í‘œ</div>
    <div onclick="show('music')">ë‚´ì²´í‘œ</div>
  </div>
</li>
<li>ë¯¸ìˆ 
  <div class="sub">
    <div onclick="show('aart')">ë¬¸ì œ</div>
    <div onclick="show('art')">ë‚´ì²´í‘œ</div>
  </div>
</li>
<li>ì²´ìœ¡
  <div class="sub">
    <div onclick="show('ppe')">ë¬¸ì œ</div>
    <div onclick="show('pe')">ë‚´ì²´í‘œ</div>
  </div>
</li>
<li>ë„ë•
  <div class="sub">
    <div onclick="show('mmoral')">ë¬¸ì œ</div>
    <div onclick="show('moral')">ë‚´ì²´í‘œ</div>
  </div>
</li>
<li>ì‹¤ê³¼<div class="sub"><div onclick="show('ppa')">ë¬¸ì œ</div><div onclick="show('silgwa')">ë‚´ì²´í‘œ</div></div></li>
<li>ë°”ìŠ¬ì¦
  <div class="sub">
    <div onclick="show('bbasle')">ë¬¸ì œ</div>
    <div onclick="show('basle')">ë‚´ì²´í‘œ</div>
  </div>
</li>
<li onclick="show('check')">ì²´í¬ë°•ìŠ¤</li>
</ul>
</nav>

<div id="home" class="content active"><h2></h2></div>
<div id="posts"></div>
<div id="siteStats" style="margin:10px 0;"></div>
<button class="admin-only" onclick="openWrite()" style="display:none;">
  âœï¸ ê¸€ì“°ê¸°
</button>

<!-- ì—­ëŸ‰ íƒ­ -->
<div id="competency" class="content">
  <div class="competency-wrap" id="competencyWrap"></div>
</div>
<!-- ===============================
   ëª¨í˜• > êµ­ì–´
=============================== -->
<div id="model-korean" class="content">
  <div class="competency-wrap" id="modelKoreanWrap"></div>
</div>
<!-- ===============================
   ëª¨í˜• > ìˆ˜í•™
=============================== -->
<div id="model-math" class="content">
  <div class="competency-wrap" id="modelMathWrap"></div>
</div>
<!-- ===============================
   ëª¨í˜• > ì‚¬íšŒ
=============================== -->
<div id="model-social" class="content">
  <div class="competency-wrap" id="modelSocialWrap"></div>
</div>
<!-- ===============================
   ëª¨í˜• > ê³¼í•™
=============================== -->
<div id="model-science" class="content">
  <div class="competency-wrap" id="modelScienceWrap"></div>
</div>
<!-- ===============================
   ëª¨í˜• > ë¯¸ìˆ 
=============================== -->
<div id="model-art" class="content">
  <div class="competency-wrap" id="modelArtWrap"></div>
</div>
<!-- ===============================
   ëª¨í˜• > ì²´ìœ¡
=============================== -->
<div id="model-pe" class="content">
  <div class="competency-wrap" id="modelPeWrap"></div>
</div>
<!-- ===============================
   ëª¨í˜• > ë„ë•
=============================== -->
<div id="model-moral" class="content">
  <div class="competency-wrap" id="modelMoralWrap"></div>
</div>
<!-- ===============================
   ëª¨í˜• > ì‹¤ê³¼
=============================== -->
<div id="model-pa" class="content">
  <div class="competency-wrap" id="modelPaWrap"></div>
</div>
<!-- ===============================
   ëª¨í˜• > ë°”ìŠ¬ì¦
=============================== -->
<div id="model-bsj" class="content">
  <div class="competency-wrap" id="modelBsjWrap"></div>
</div>
<!-- ì²´í¬ë°•ìŠ¤ -->
<div id="check" class="content">
<h2>ì „ì²´ ì§„ë„ìœ¨</h2>
<div class="progress-box"><div id="totalBar" class="progress-bar"></div></div>
<div id="totalPercent" class="percent">0%</div>
<hr><br>
<div id="subjects"></div>
</div>

<!-- ì‹¤ê³¼ ë‚´ì²´í‘œ -->
<div id="silgwa" class="content">
<div class="table-wrap" id="tables"></div>
</div>

<!-- ë„ë• ë‚´ì²´í‘œ -->
<div id="moral" class="content">
  <div class="table-wrap" id="moralTables"></div>
</div>

<!-- ìŒì•… ê°œì²´í‘œ -->
<div id="music-object" class="content">
  <h2>ìŒì•… ê°œì²´í‘œ</h2>
<div class="table-wrap" id="music-objectTables"></div>
</div>

<!-- ìŒì•… ë‚´ì²´í‘œ -->
<div id="music" class="content">
  <div class="table-wrap" id="musicTables"></div>
</div>

<!-- ë¯¸ìˆ  ë‚´ì²´í‘œ -->
<div id="art" class="content">
  <div class="table-wrap" id="artTables"></div>
</div>

<!-- ì²´ìœ¡ ë‚´ì²´í‘œ -->
<div id="pe" class="content">
  <div class="table-wrap" id="peTables"></div>
</div>

<!-- êµ­ì–´ ë‚´ì²´í‘œ -->
<div id="korean" class="content">
  <div class="table-wrap" id="koreanTables"></div>
</div>

<!-- ì‚¬íšŒ ë‚´ì²´í‘œ -->
<div id="social" class="content">

<div class="table-wrap social-table">

  <!-- â‘  ì§€ë¦¬ ì˜ì—­ -->
  <table>
    <tr>
      <th>ì˜ì—­</th>
      <th>ì§€ë¦¬ì¸ì‹</th>
      <th>ìì—°í™˜ê²½ê³¼ ì¸ê°„ìƒí™œ</th>
      <th>ì¸ë¬¸í™˜ê²½ê³¼ ì¸ê°„ìƒí™œ</th>
      <th>ì§€ì†ê°€ëŠ¥í•œ ì„¸ê³„</th>
    </tr>
    <tr>
      <th>ë²”ì£¼</th>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
    </tr>
    <tr>
      <td></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
    </tr>
    <tr>
      <td></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td></td>
    </tr>
  </table>
  
  <div class="table-actions vertical">
  <button class="btn-grade">ì±„ì </button>
  <button class="btn-answer">ì •ë‹µ</button>
  <button class="btn-clear">ì§€ìš°ê¸°</button>

  <div class="score">ì •ë‹µë¥  : 0%</div>
</div>

  <!-- â‘¡ ì¼ë°˜ì‚¬íšŒ ì˜ì—­ -->
  <table>
    <tr>
      <th>ì˜ì—­</th>
      <th>ì •ì¹˜</th>
      <th>ë²•</th>
      <th>ê²½ì œ</th>
      <th>ì‚¬íšŒÂ·ë¬¸í™”</th>
      <th>ì—­ì‚¬ì¼ë°˜</th>
    </tr>
    <tr>
      <td>ë²”ì£¼</td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
    </tr>
    <tr>
      <td></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
      <td></td>
    </tr>
  </table>
  
  <div class="table-actions vertical">
  <button class="btn-grade">ì±„ì </button>
  <button class="btn-answer">ì •ë‹µ</button>
  <button class="btn-clear">ì§€ìš°ê¸°</button>

  <div class="score">ì •ë‹µë¥  : 0%</div>
</div>

  <!-- â‘¢ ì—­ì‚¬ ì˜ì—­ -->
  <table>
    <tr>
      <th>ì˜ì—­</th>
      <th>ì§€ì—­ì‚¬</th>
      <th>í•œêµ­ì‚¬</th>
    </tr>
    <tr>
      <td>ë²”ì£¼</td>
      <td>ì§€ì—­ì‚¬</td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td><textarea placeholder="ì…ë ¥"></textarea></td>
    </tr>
  </table>
  
  <div class="table-actions vertical">
  <button class="btn-grade">ì±„ì </button>
  <button class="btn-answer">ì •ë‹µ</button>
  <button class="btn-clear">ì§€ìš°ê¸°</button>

  <div class="score">ì •ë‹µë¥  : 0%</div>
</div>

</div>
</div>

<!-- ===============================
ë°”ìŠ¬ì¦ ë‚´ì²´í‘œ
=============================== -->
<div id="basle" class="content">
  <div class="bs-table-wrap">

    <!-- (1) ë°”ë¥¸ ìƒí™œ -->
    <div class="bs-title">(1) ë°”ë¥¸ ìƒí™œ</div>
    <table class="subject-table">
      <thead>
        <tr>
          <th>ì˜ì—­</th><th>í•µì‹¬ ì•„ì´ë””ì–´</th><th>ë²”ì£¼</th><th colspan="2">ë‚´ìš© ìš”ì†Œ</th>
        </tr>
      </thead>
      <tbody>
        <tr><td rowspan="3">ìš°ë¦¬ëŠ” ëˆ„êµ¬ë¡œ ì‚´ì•„ê°ˆê¹Œ</td><td rowspan="3"></td><td>ì§€ì‹Â·ì´í•´</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê³¼ì •Â·ê¸°ëŠ¥</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê°€ì¹˜Â·íƒœë„</td><td colspan="2" class="answer"></td></tr>

        <tr><td rowspan="3">ìš°ë¦¬ëŠ” ì–´ë””ì„œ ì‚´ì•„ê°ˆê¹Œ</td><td rowspan="3"></td><td>ì§€ì‹Â·ì´í•´</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê³¼ì •Â·ê¸°ëŠ¥</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê°€ì¹˜Â·íƒœë„</td><td colspan="2" class="answer"></td></tr>

        <tr><td rowspan="3">ìš°ë¦¬ëŠ” ì§€ê¸ˆ ì–´ë–»ê²Œ ì‚´ì•„ê°ˆê¹Œ</td><td rowspan="3"></td><td>ì§€ì‹Â·ì´í•´</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê³¼ì •Â·ê¸°ëŠ¥</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê°€ì¹˜Â·íƒœë„</td><td colspan="2" class="answer"></td></tr>

        <tr><td rowspan="3">ìš°ë¦¬ëŠ” ë¬´ì—‡ì„ í•˜ë©° ì‚´ì•„ê°ˆê¹Œ</td><td rowspan="3"></td><td>ì§€ì‹Â·ì´í•´</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê³¼ì •Â·ê¸°ëŠ¥</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê°€ì¹˜Â·íƒœë„</td><td colspan="2" class="answer"></td></tr>
      </tbody>
    </table>

    <div class="table-actions vertical">
      <button class="btn-grade">ì±„ì </button>
      <button class="btn-answer">ì •ë‹µ</button>
      <button class="btn-clear">ì§€ìš°ê¸°</button>
      <div class="score">ì •ë‹µë¥  : 0%</div>
    </div>


    <!-- (2) ìŠ¬ê¸°ë¡œìš´ ìƒí™œ -->
    <div class="bs-title">(2) ìŠ¬ê¸°ë¡œìš´ ìƒí™œ</div>
    <table class="subject-table">
      <thead>
        <tr>
          <th>ì˜ì—­</th><th>í•µì‹¬ ì•„ì´ë””ì–´</th><th>ë²”ì£¼</th><th colspan="2">ë‚´ìš© ìš”ì†Œ</th>
        </tr>
      </thead>
      <tbody>
        <tr><td rowspan="3">ìš°ë¦¬ëŠ” ëˆ„êµ¬ë¡œ ì‚´ì•„ê°ˆê¹Œ</td><td rowspan="3"></td><td>ì§€ì‹Â·ì´í•´</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê³¼ì •Â·ê¸°ëŠ¥</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê°€ì¹˜Â·íƒœë„</td><td colspan="2" class="answer"></td></tr>

        <tr><td rowspan="3">ìš°ë¦¬ëŠ” ì–´ë””ì„œ ì‚´ì•„ê°ˆê¹Œ</td><td rowspan="3"></td><td>ì§€ì‹Â·ì´í•´</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê³¼ì •Â·ê¸°ëŠ¥</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê°€ì¹˜Â·íƒœë„</td><td colspan="2" class="answer"></td></tr>

        <tr><td rowspan="3">ìš°ë¦¬ëŠ” ì§€ê¸ˆ ì–´ë–»ê²Œ ì‚´ì•„ê°ˆê¹Œ</td><td rowspan="3"></td><td>ì§€ì‹Â·ì´í•´</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê³¼ì •Â·ê¸°ëŠ¥</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê°€ì¹˜Â·íƒœë„</td><td colspan="2" class="answer"></td></tr>

        <tr><td rowspan="3">ìš°ë¦¬ëŠ” ë¬´ì—‡ì„ í•˜ë©° ì‚´ì•„ê°ˆê¹Œ</td><td rowspan="3"></td><td>ì§€ì‹Â·ì´í•´</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê³¼ì •Â·ê¸°ëŠ¥</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê°€ì¹˜Â·íƒœë„</td><td colspan="2" class="answer"></td></tr>
      </tbody>
    </table>

    <div class="table-actions vertical">
      <button class="btn-grade">ì±„ì </button>
      <button class="btn-answer">ì •ë‹µ</button>
      <button class="btn-clear">ì§€ìš°ê¸°</button>
      <div class="score">ì •ë‹µë¥  : 0%</div>
    </div>


    <!-- (3) ê±´ê°•í•œ ìƒí™œ -->
    <div class="bs-title">(3) ê±´ê°•í•œ ìƒí™œ</div>
    <table class="subject-table">
      <thead>
        <tr>
          <th>ì˜ì—­</th><th>í•µì‹¬ ì•„ì´ë””ì–´</th><th>ë²”ì£¼</th><th colspan="2">ë‚´ìš© ìš”ì†Œ</th>
        </tr>
      </thead>
      <tbody>
        <tr><td rowspan="3">ê±´ê°•í•œ ëª¸</td><td rowspan="3"></td><td>ì§€ì‹Â·ì´í•´</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê³¼ì •Â·ê¸°ëŠ¥</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê°€ì¹˜Â·íƒœë„</td><td colspan="2" class="answer"></td></tr>

        <tr><td rowspan="3">í™œê¸°ì°¬ ì›€ì§ì„</td><td rowspan="3"></td><td>ì§€ì‹Â·ì´í•´</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê³¼ì •Â·ê¸°ëŠ¥</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê°€ì¹˜Â·íƒœë„</td><td colspan="2" class="answer"></td></tr>

        <tr><td rowspan="3">ì°½ì˜ì  í‘œí˜„</td><td rowspan="3"></td><td>ì§€ì‹Â·ì´í•´</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê³¼ì •Â·ê¸°ëŠ¥</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê°€ì¹˜Â·íƒœë„</td><td colspan="2" class="answer"></td></tr>
      </tbody>
    </table>

    <div class="table-actions vertical">
      <button class="btn-grade">ì±„ì </button>
      <button class="btn-answer">ì •ë‹µ</button>
      <button class="btn-clear">ì§€ìš°ê¸°</button>
      <div class="score">ì •ë‹µë¥  : 0%</div>
    </div>


    <!-- (4) ì¦ê±°ìš´ ìƒí™œ -->
    <div class="bs-title">(4) ì¦ê±°ìš´ ìƒí™œ</div>
    <table class="subject-table">
      <thead>
        <tr>
          <th>ì˜ì—­</th><th>í•µì‹¬ ì•„ì´ë””ì–´</th><th>ë²”ì£¼</th><th colspan="2">ë‚´ìš© ìš”ì†Œ</th>
        </tr>
      </thead>
      <tbody>
        <tr><td rowspan="3">ì²´í—˜</td><td rowspan="3"></td><td>ì§€ì‹Â·ì´í•´</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê³¼ì •Â·ê¸°ëŠ¥</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê°€ì¹˜Â·íƒœë„</td><td colspan="2" class="answer"></td></tr>

        <tr><td rowspan="3">í‘œí˜„</td><td rowspan="3"></td><td>ì§€ì‹Â·ì´í•´</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê³¼ì •Â·ê¸°ëŠ¥</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê°€ì¹˜Â·íƒœë„</td><td colspan="2" class="answer"></td></tr>

        <tr><td rowspan="3">ê°ìƒ</td><td rowspan="3"></td><td>ì§€ì‹Â·ì´í•´</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê³¼ì •Â·ê¸°ëŠ¥</td><td colspan="2" class="answer"></td></tr>
        <tr><td>ê°€ì¹˜Â·íƒœë„</td><td colspan="2" class="answer"></td></tr>
      </tbody>
    </table>

    <div class="table-actions vertical">
      <button class="btn-grade">ì±„ì </button>
      <button class="btn-answer">ì •ë‹µ</button>
      <button class="btn-clear">ì§€ìš°ê¸°</button>
      <div class="score">ì •ë‹µë¥  : 0%</div>
    </div>

  </div>
</div>

<!-- ê¸€ì“°ê¸° ëª¨ë‹¬ -->
<div id="writeModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.5); justify-content:center; align-items:center;">
  <div style="background:#fff; padding:20px; border-radius:10px; width:400px;">
    <h3>ê¸€ ì‘ì„±</h3>
    <input id="postTitle" placeholder="ì œëª©" style="width:100%; margin-bottom:10px; padding:8px;">
    <textarea id="postContent" placeholder="ë‚´ìš©" style="width:100%; height:120px; padding:8px;"></textarea>
    <div style="margin-top:10px; text-align:right;">
      <button onclick="closeWrite()">ì·¨ì†Œ</button>
      <button onclick="savePost()">ì €ì¥</button>
    </div>
  </div>
</div>

<footer class="site-footer">
  <p>
    â¬‡ï¸ë¬¸ì˜ì‚¬í•­ ë° ì˜¤ë¥˜ ì‚¬í•­ì€ ì•„ë˜ ì£¼ì†Œë¡œ ë¬¸ì˜ë°”ëë‹ˆë‹¤.â¬‡ï¸<br>
    ì„ê³ AZ ë¸”ë¡œê·¸ ì£¼ì†Œ: m.blog.naver.com/imgoaz<br>
    ì„ê³ AZ ì¸ìŠ¤íƒ€ ì£¼ì†Œ: https://www.instagram.com/imgo_atoz?igsh=NjU1Njhuc3E0MDkw
  </p>
</footer>

<script>
/* ===============================
   ë°”ìŠ¬ì¦ ì •ë‹µ ë°ì´í„°
=============================== */
const bsAnswers = [

/* (1) ë°”ë¥¸ ìƒí™œ */
[
  [
    ["í•™êµ ìƒí™œ ìŠµê´€ê³¼ í•™ìŠµ ìŠµê´€","ìê¸° ì´í•´","ìƒíƒœí™˜ê²½"],
    ["ìŠµê´€ í˜•ì„±í•˜ê¸°","ê´€ê³„ ë§ºê¸°"],
    ["ì•ˆì „í•˜ê³  ê±´ê°•í•œ ìƒí™œ","ìê¸° ì¡´ì¤‘","ë°°ë ¤","ë”ë¶ˆì–´ ì‚¬ëŠ” ì‚¶"]
  ],
  [
    ["ê³µë™ì²´ ìƒí™œ ëª¨ìŠµ","ìš°ë¦¬ë‚˜ë¼ì˜ ì†Œì¤‘í•¨"],
    ["ì‹¤ì²œí•˜ê¸°","í˜¸ê¸°ì‹¬ ê°–ê¸°"],
    ["ë‚˜ë¼ ì‚¬ë‘","ë‹¤ì–‘ì„± ì¡´ì¤‘","ì ê·¹ì„±ê³¼ ë„ì „ì˜ì‹"]
  ],
  [
    ["ì¸ë¬¼ì˜ ì‚¶","ì§€ì†ê°€ëŠ¥í•œ ì‚¶ì˜ ë°©ì‹"],
    ["í•˜ë£¨ ìƒí™œ ê´€ë¦¬í•˜ê¸°","ë³€í™”ì— ëŒ€ì‘í•˜ê¸°","ì‹¤ì²œí•˜ê¸°"],
    ["ì‹œê°„ì˜ ê°€ì¹˜","ì ì ˆì„±","ê³µë™ì²´ì„±","ì§€ì†ê°€ëŠ¥ì„±"]
  ],
  [
    ["ëª¨ë‘ë¥¼ ìœ„í•œ ìƒí™œ í™˜ê²½","í•™ìŠµ ìŠµê´€","ìƒí™œ ìŠµê´€"],
    ["ì°¸ì—¬í•˜ê¸°","ìƒê°ì´ë‚˜ ì˜ê²¬ ë‚˜ëˆ„ê¸°","í˜‘ë ¥í•˜ê¸°","ë˜ëŒì•„ë³´ê¸°"],
    ["ëª¨ë‘ë¥¼ ìœ„í•œ ë§ˆìŒ","ê°œë°©ì„±","ìë°œì„±"]
  ]
],

/* (2) ìŠ¬ê¸°ë¡œìš´ ìƒí™œ (ë°”ë¥¸ ìƒí™œê³¼ ë™ì¼) */
[
  [
    ["í•™êµ ìƒí™œ ìŠµê´€ê³¼ í•™ìŠµ ìŠµê´€","ìê¸° ì´í•´","ìƒíƒœí™˜ê²½"],
    ["ìŠµê´€ í˜•ì„±í•˜ê¸°","ê´€ê³„ ë§ºê¸°"],
    ["ì•ˆì „í•˜ê³  ê±´ê°•í•œ ìƒí™œ","ìê¸° ì¡´ì¤‘","ë°°ë ¤","ë”ë¶ˆì–´ ì‚¬ëŠ” ì‚¶"]
  ],
  [
    ["ê³µë™ì²´ ìƒí™œ ëª¨ìŠµ","ìš°ë¦¬ë‚˜ë¼ì˜ ì†Œì¤‘í•¨"],
    ["ì‹¤ì²œí•˜ê¸°","í˜¸ê¸°ì‹¬ ê°–ê¸°"],
    ["ë‚˜ë¼ ì‚¬ë‘","ë‹¤ì–‘ì„± ì¡´ì¤‘","ì ê·¹ì„±ê³¼ ë„ì „ì˜ì‹"]
  ],
  [
    ["ì¸ë¬¼ì˜ ì‚¶","ì§€ì†ê°€ëŠ¥í•œ ì‚¶ì˜ ë°©ì‹"],
    ["í•˜ë£¨ ìƒí™œ ê´€ë¦¬í•˜ê¸°","ë³€í™”ì— ëŒ€ì‘í•˜ê¸°","ì‹¤ì²œí•˜ê¸°"],
    ["ì‹œê°„ì˜ ê°€ì¹˜","ì ì ˆì„±","ê³µë™ì²´ì„±","ì§€ì†ê°€ëŠ¥ì„±"]
  ],
  [
    ["ëª¨ë‘ë¥¼ ìœ„í•œ ìƒí™œ í™˜ê²½","í•™ìŠµ ìŠµê´€","ìƒí™œ ìŠµê´€"],
    ["ì°¸ì—¬í•˜ê¸°","ìƒê°ì´ë‚˜ ì˜ê²¬ ë‚˜ëˆ„ê¸°","í˜‘ë ¥í•˜ê¸°","ë˜ëŒì•„ë³´ê¸°"],
    ["ëª¨ë‘ë¥¼ ìœ„í•œ ë§ˆìŒ","ê°œë°©ì„±","ìë°œì„±"]
  ]
],

/* (3) ê±´ê°•í•œ ìƒí™œ */
[
  [
    ["ë‚˜ì˜ ëª¸","ê±´ê°•ê³¼ ì‹ ì²´ í™œë™","ê±´ê°•í•˜ê³  ì•ˆì „í•œ ìƒí™œ ìŠµê´€"],
    ["ì‹ ì²´ í™œë™ì— ì•ˆì „í•˜ê²Œ ì°¸ì—¬í•˜ê¸°","ê±´ê°•í•˜ê³  ì•ˆì „í•œ ìƒí™œ ìŠµê´€ ê¸°ë¥´ê¸°"],
    ["ë‚˜ì˜ ëª¸ì— ëŒ€í•œ ê¸ì •ì  ì¸ì‹","ì§€ì†ì ì¸ ì‹¤ì²œ ì˜ì§€"]
  ],
  [
    ["ì œìë¦¬ ì›€ì§ì„","ê±·ê³  ë‹¬ë¦¬ëŠ” ì›€ì§ì„","ëœ€ë›°ëŠ” ì›€ì§ì„","ë„êµ¬ë¥¼ ë‹¤ë£¨ëŠ” ì›€ì§ì„"],
    ["ë‹¤ì–‘í•œ ì›€ì§ì„ íƒìƒ‰í•˜ê¸°","ë†€ì´ ì† ì›€ì§ì„ ì‹œë„í•˜ê¸°","ìƒí™©ì— ë§ëŠ” ì›€ì§ì„ ìˆ˜í–‰í•˜ê¸°","ë‹¤ì–‘í•œ ì›€ì§ì„ ì—°ê²°í•˜ê¸°"],
    ["ìê¸° ì£¼ë„ì„±","ì ê·¹ì„±","ìì‹ ê°","ìƒí˜¸ ë°°ë ¤","í•¨ê»˜ ì–´ìš¸ë¦¼"]
  ],
  [
    ["ì›€ì§ì„ í‘œí˜„","ì›€ì§ì„ ìš”ì†Œ"],
    ["ë‹¤ì–‘í•œ ì›€ì§ì„ í™œìš©í•˜ê¸°","ìƒê°ê³¼ ëŠë‚Œ í‘œí˜„í•˜ê¸°"],
    ["ì›€ì§ì„ í‘œí˜„ì˜ ì¦ê±°ì›€","ì›€ì§ì„ í‘œí˜„ì˜ ì°½ì˜ì„±"]
  ]
],

/* (4) ì¦ê±°ìš´ ìƒí™œ */
[
  [
    ["ì†Œë¦¬ì˜ íŠ¹ì§•","ì†Œë¦¬ë¥¼ ë‚´ëŠ” ë„êµ¬","ëŒ€ìƒì˜ íŠ¹ì§•ê³¼ ëŠë‚Œ","ìƒí™œ ì† ì´ë¯¸ì§€"],
    ["ì†Œë¦¬ íƒìƒ‰í•˜ê¸°","ì†Œë¦¬ë¡œ ë‚˜íƒ€ë‚´ê¸°","ê°ê°ìœ¼ë¡œ íƒìƒ‰í•˜ê¸°","ì´ë¯¸ì§€ ë°œê²¬í•˜ê¸°"],
    ["íƒìƒ‰ í™œë™ì— ëŒ€í•œ í˜¸ê¸°ì‹¬","ê°ê°ì  ê²½í—˜ì˜ ì¦ê±°ì›€"]
  ],
  [
    ["ê¸°ì´ˆì ì¸ ìì„¸ì™€ ì£¼ë²•","ê¸°ì´ˆì ì¸ ìŒì•… ìš”ì†Œ","ì¡°í˜• ìš”ì†Œ","í‘œí˜„ ì¬ë£Œì™€ ìš©êµ¬"],
    ["ë…¸ë˜ ë¶€ë¥´ê±°ë‚˜ ì•…ê¸° ì—°ì£¼í•˜ê¸°","ëª¨ë°©í•˜ì—¬ ì†Œë¦¬ë‚˜ ì‹ ì²´ë¡œ ë‚˜íƒ€ë‚´ê¸°","íƒìƒ‰í•˜ê³  ìµíˆê¸°","ê´€ì°°í•˜ê³  ìƒìƒí•˜ê¸°"],
    ["í‘œí˜„ì˜ ì†Œì¤‘í•¨","í‘œí˜„í•˜ëŠ” ì¦ê±°ì›€"]
  ],
  [
    ["ì—¬ëŸ¬ ê°€ì§€ ì•…ê³¡","ìƒí™œ ì† êµ­ì•…","ê¸°ì´ˆì ì¸ ìŒì•… ìš”ì†Œ","ì „í†µ ë¯¸ìˆ ","ë¯¸ìˆ  ì‘í’ˆê³¼ ì „ì‹œ"],
    ["ë“£ê³  ë°˜ì‘í•˜ê¸°","ë“£ê³  ì°¾ì•„ë³´ê¸°","ë°˜ì‘í•˜ê³  ë‚˜íƒ€ë‚´ê¸°","ì°¾ì•„ë³´ê³  ê´€ëŒí•˜ê¸°"],
    ["êµ­ì•…ê³¼ ì „í†µ ë¯¸ìˆ ì— ëŒ€í•œ ì¹œê·¼ê°","ë‹¤ì–‘ì„±ì— ëŒ€í•œ ìˆ˜ìš©"]
  ]
]

];

document.addEventListener("DOMContentLoaded", function(){

  const lineConfig = [
    [[3,2,4],[2,2,3],[2,3,4],[3,4,3]],
    [[3,2,4],[2,2,3],[2,3,4],[3,4,3]],
    [[3,2,2],[4,4,5],[2,2,2]],
    [[4,4,2],[4,4,2],[4,4,2]]
  ];
  
  /* ===============================
   í•µì‹¬ì•„ì´ë””ì–´ HTML(ë¹ˆì¹¸ í¬í•¨)
=============================== */
/* ===============================
   í•µì‹¬ì•„ì´ë””ì–´ HTML(ë¹ˆì¹¸ í¬í•¨) - ê´„í˜¸ ì œê±° ë²„ì „
=============================== */
const keyIdeaHTML = [
  /* (1) ë°”ë¥¸ ìƒí™œ */
  `
    <div class="ki-line">ã†ìš°ë¦¬ëŠ” ë‚´ê°€ ëˆ„êµ¬ì¸ì§€ ìƒê°í•˜ë©° ìƒí™œí•œë‹¤.</div>
    <div class="ki-line">ã†ìš°ë¦¬ëŠ” ì„œë¡œ <input class="ki-input" data-ans="ê´€ê³„">ë¥¼/ì„ ë§ºìœ¼ë©° ìƒí™œí•œë‹¤.</div>
    <div class="ki-line">ã†ìš°ë¦¬ëŠ” ì—¬ëŸ¬ <input class="ki-input" data-ans="ê³µë™ì²´"> ì†ì—ì„œ ìƒí™œí•œë‹¤.</div>
    <div class="ki-line">ã†ìš°ë¦¬ëŠ” ì‚¶ì˜ <input class="ki-input" data-ans="ê³µê°„">ë¥¼/ì„ ë„“íˆë©° ìƒí™œí•œë‹¤.</div>
    <div class="ki-line">ã†ìš°ë¦¬ëŠ” ì—¬ëŸ¬ ìœ í˜•ì˜ <input class="ki-input" data-ans="ì£¼ê¸°">ë¡œ/ìœ¼ë¡œ ìƒí™œí•œë‹¤.</div>
    <div class="ki-line">ã†ìš°ë¦¬ëŠ” ê³¼ê±°, í˜„ì¬, ë¯¸ë˜ë¥¼ ìƒê°í•˜ë©° ìƒí™œí•œë‹¤.</div>
    <div class="ki-line">ã†ìš°ë¦¬ëŠ” <input class="ki-input" data-ans="ê²½í—˜">í•˜ê³  ìƒìƒí•˜ê³  ë§Œë“¤ë©° ìƒí™œí•œë‹¤.</div>
    <div class="ki-line">ã†ìš°ë¦¬ëŠ” ëŠë¼ê³  ìƒê°í•˜ê³  í‘œí˜„í•˜ë©° ìƒí™œí•œë‹¤.</div>
  `,

  /* (2) ìŠ¬ê¸°ë¡œìš´ ìƒí™œ */
  `
    <div class="ki-line">ã†ìš°ë¦¬ëŠ” ë‚´ê°€ ëˆ„êµ¬ì¸ì§€ ìƒê°í•˜ë©° ìƒí™œí•œë‹¤.</div>
    <div class="ki-line">ã†ìš°ë¦¬ëŠ” ì„œë¡œ ê´€ê³„ë¥¼ ë§ºìœ¼ë©° ìƒí™œí•œë‹¤.</div>
    <div class="ki-line">ã†ìš°ë¦¬ëŠ” ì—¬ëŸ¬ ê³µë™ì²´ ì†ì—ì„œ ìƒí™œí•œë‹¤.</div>
    <div class="ki-line">ã†ìš°ë¦¬ëŠ” ì‚¶ì˜ ê³µê°„ì„ ë„“íˆë©° ìƒí™œí•œë‹¤.</div>
    <div class="ki-line">ã†ìš°ë¦¬ëŠ” ì—¬ëŸ¬ ìœ í˜•ì˜ ì£¼ê¸°ë¡œ ìƒí™œí•œë‹¤.</div>
    <div class="ki-line">ã†ìš°ë¦¬ëŠ” ê³¼ê±°, í˜„ì¬, ë¯¸ë˜ë¥¼ ìƒê°í•˜ë©° ìƒí™œí•œë‹¤.</div>
    <div class="ki-line">ã†ìš°ë¦¬ëŠ” ê²½í—˜í•˜ê³  ìƒìƒí•˜ê³  ë§Œë“¤ë©° ìƒí™œí•œë‹¤.</div>
    <div class="ki-line">ã†ìš°ë¦¬ëŠ” ëŠë¼ê³  ìƒê°í•˜ê³  í‘œí˜„í•˜ë©° ìƒí™œí•œë‹¤.</div>
  `,

  /* (3) ê±´ê°•í•œ ìƒí™œ */
  `
    <div class="ki-line">ã†ì§€ì†ì ì¸ ì‹ ì²´ í™œë™ì€ ê±´ê°•í•œ ìƒí™œ ìŠµê´€ì˜ ë°”íƒ•ì´ê³ , <input class="ki-input" data-ans="ê±´ê°•">ê³¼/ì™€ <input class="ki-input" data-ans="ì•ˆì „">ëŠ”/ì€ í–‰ë³µí•œ ì‚¶ì˜ í† ëŒ€ê°€ ëœë‹¤.</div>
    <div class="ki-line">ã†<input class="ki-input" data-ans="ì›€ì§ì„">ëŠ”/ì€ ì„±ì¥ê³¼ ë°œë‹¬ì˜ ì›ë™ë ¥ì´ê³ , ê¸°ë³¸ ì›€ì§ì„ ê¸°ìˆ ì€ í™œê¸°ì°¬ ì‹ ì²´ í™œë™ì˜ ê¸°ì´ˆê°€ ëœë‹¤.</div>
    <div class="ki-line">ã†ìƒê°ê³¼ ëŠë‚Œì€ ì›€ì§ì„ì„ í†µí•´ í‘œí˜„ë˜ê³ , ë‹¤ì–‘í•œ ì›€ì§ì„ì€ <input class="ki-input" data-ans="ì°½ì˜ì  í‘œí˜„">ì˜ ê¸°ë°˜ì´ ëœë‹¤.</div>
  `,

  /* (4) ì¦ê±°ìš´ ìƒí™œ */
  `
    <div class="ki-line">ã†ì†Œë¦¬ì™€ ì´ë¯¸ì§€ë¥¼ <input class="ki-input" data-ans="ê°ê°ì ">ë¡œ/ìœ¼ë¡œ ê²½í—˜í•˜ê³  íƒìƒ‰í•¨ìœ¼ë¡œì¨ ì‚¶ì˜ ì¦ê±°ì›€ê³¼ ì˜ë¯¸ë¥¼ ë°œê²¬í•œë‹¤.</div>
    <div class="ki-line">ã†ëŠë‚Œê³¼ ìƒê°ì„ <input class="ki-input" data-ans="ì²­ê°ì ">ã†<input class="ki-input" data-ans="ì‹œê°ì ">ë¡œ/ìœ¼ë¡œ ë‚˜íƒ€ë‚´ê³  ì†Œí†µí•¨ìœ¼ë¡œì¨ í‘œí˜„ì˜ ì¦ê±°ì›€ê³¼ ì†Œì¤‘í•¨ì„ ëŠë‚€ë‹¤.</div>
    <div class="ki-line">ã†ìŒì•…ê³¼ ë¯¸ìˆ  ì‘í’ˆì„ ë³´ê³  ë“¤ìœ¼ë©° <input class="ki-input" data-ans="ì˜ˆìˆ ">ì— ëŒ€í•´ í¥ë¯¸ì™€ ê´€ì‹¬ì„ ê°€ì§„ë‹¤.</div>
  `
];

  const basle = document.getElementById('basle');
  if(!basle) return;

  const tables = basle.querySelectorAll('table.subject-table');
  const actionBoxes = basle.querySelectorAll('.table-actions.vertical');

  const norm = (t)=> (t||'').replace(/\s+/g,'').trim();

  function setScore(actions, correct, total){
    const score = actions.querySelector('.score');
    const percent = total ? Math.round(correct/total*100) : 0;
    if(score) score.textContent = `ì •ë‹µë¥  : ${correct} / ${total} (${percent}%)`;
  }

  function clearMark(el){
    el.classList.remove('correct','wrong');
    el.style.color = '';
  }

  // textarea ìƒì„±
  tables.forEach((table, tableIndex)=>{
    const rows = table.querySelectorAll('tbody tr');
    let blockIndex = 0;

    for(let i=0; i<rows.length; i+=3){
      const cfg = lineConfig[tableIndex]?.[blockIndex];
      if(!cfg) continue;

      for(let j=0; j<3; j++){
        const cell = rows[i+j].querySelector('.answer');
        if(!cell) continue;
        
        // (ì¶”ê°€) í•µì‹¬ì•„ì´ë””ì–´(2ë²ˆì§¸ ì—´) ì±„ìš°ê¸°
    const kiCell = rows[i].children[1]; // 0:ì˜ì—­, 1:í•µì‹¬ì•„ì´ë””ì–´
    if(kiCell){
      kiCell.classList.add('keyidea');
      kiCell.innerHTML = keyIdeaHTML[tableIndex] || '';
    }

        cell.innerHTML = '';
        for(let k=0; k<cfg[j]; k++){
          const ta = document.createElement('textarea');
          ta.className = 'bs-input';
          cell.appendChild(ta);
        }
      }
      blockIndex++;
    }
  });

  // ë²„íŠ¼ ì—°ê²°
  actionBoxes.forEach((actions, tableIndex)=>{

    const table = tables[tableIndex];
    if(!table) return;

    const btnGrade  = actions.querySelector('.btn-grade');
    const btnAnswer = actions.querySelector('.btn-answer');
    const btnClear  = actions.querySelector('.btn-clear');

    btnAnswer?.addEventListener('click', ()=>{
      const rows = table.querySelectorAll('tbody tr');
      let blockIndex = 0;
      let total = 0;

      for(let i=0; i<rows.length; i+=3){
        for(let j=0; j<3; j++){
          const cell = rows[i+j].querySelector('.answer');
          if(!cell) continue;

          const textareas = cell.querySelectorAll('textarea');
          const answers = bsAnswers?.[tableIndex]?.[blockIndex]?.[j] || [];

          textareas.forEach((ta,k)=>{
            ta.value = answers[k] || '';
            clearMark(ta);
            ta.classList.add('correct');
            total++;
          });
        }
        blockIndex++;
      }
// (ì¶”ê°€) í•µì‹¬ì•„ì´ë””ì–´ ë¹ˆì¹¸ë„ ì •ë‹µ ì±„ìš°ê¸°
      table.querySelectorAll('.ki-input').forEach(inp=>{
        inp.value = inp.dataset.ans || '';
        clearMark(inp);
        inp.classList.add('correct');
        total++;
      });
      setScore(actions, total, total);
    });

    btnGrade?.addEventListener('click', ()=>{
      const rows = table.querySelectorAll('tbody tr');
      let blockIndex = 0;
      let correct = 0;
      let total = 0;

      for(let i=0; i<rows.length; i+=3){
        for(let j=0; j<3; j++){
          const cell = rows[i+j].querySelector('.answer');
          if(!cell) continue;

          const textareas = cell.querySelectorAll('textarea');
          const answers = bsAnswers?.[tableIndex]?.[blockIndex]?.[j] || [];

          textareas.forEach((ta,k)=>{
            const ans = answers[k] || '';
            if(ans === '') return;

            total++;
            clearMark(ta);

            if(norm(ta.value) === norm(ans)){
              ta.classList.add('correct');
              correct++;
            }else{
              ta.classList.add('wrong');
            }
          });
        }
        blockIndex++;
      }
      // (ì¶”ê°€) í•µì‹¬ì•„ì´ë””ì–´ ë¹ˆì¹¸ë„ ì±„ì  í¬í•¨
      table.querySelectorAll('.ki-input').forEach(inp=>{
        const ans = inp.dataset.ans || '';
        if(ans === '') return;

        total++;
        clearMark(inp);

        if(norm(inp.value) === norm(ans)){
          inp.classList.add('correct');
          correct++;
        }else{
          inp.classList.add('wrong');
        }
      });

      setScore(actions, correct, total);
    });

    btnClear?.addEventListener('click', ()=>{
      table.querySelectorAll('textarea, .ki-input').forEach(el=>{
        el.value = '';
        clearMark(el);
      });
      setScore(actions, 0, 0);
    });

  });

});
const postsEl = document.getElementById('posts');
const statsEl = document.getElementById('siteStats');
const ADMIN_PASSWORD = '20002026';

let isAdmin = false;
let currentTabId = 'home';
let editingPostId = null; // ìˆ˜ì • ëª¨ë“œìš©

// ===============================
// ë°©ë¬¸ì í†µê³„ (localStorage ê¸°ë°˜)
// ===============================
function loadStats(){
  return JSON.parse(localStorage.getItem('siteStats') || '{}');
}
function saveStats(s){
  localStorage.setItem('siteStats', JSON.stringify(s));
}
function todayKey(){
  const d = new Date();
  return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
}
function bumpVisitorStats(){
  const sessionKey = 'visitedThisSession';
  const today = todayKey();

  const stats = loadStats();
  stats.totalVisits = stats.totalVisits || 0;
  stats.uniqueDays = stats.uniqueDays || {};
  stats.todayVisits = stats.todayVisits || {};

  if(sessionStorage.getItem(sessionKey) !== '1'){
    sessionStorage.setItem(sessionKey, '1');
    stats.totalVisits += 1;
    stats.uniqueDays[today] = true;
    stats.todayVisits[today] = (stats.todayVisits[today] || 0) + 1;
    saveStats(stats);
  }

  renderStats(); // ê´€ë¦¬ìë©´ ë³´ì´ê³  ì•„ë‹ˆë©´ ìˆ¨ê¹€
}

function renderStats(){
  if(!statsEl) return;

  // âœ… ê´€ë¦¬ì ì•„ë‹ ë• ì•„ì˜ˆ ìˆ¨ê¹€
  if(!isAdmin){
    statsEl.style.display = 'none';
    statsEl.innerHTML = '';
    return;
  }

  statsEl.style.display = 'block';

  const stats = loadStats();
  const today = todayKey();

  const total = stats.totalVisits || 0;
  const todayCount = (stats.todayVisits && stats.todayVisits[today]) ? stats.todayVisits[today] : 0;
  const uniqueDayCount = stats.uniqueDays ? Object.keys(stats.uniqueDays).length : 0;

  statsEl.innerHTML = `
    <div style="
      background:#fff; border:1px solid #e5e7eb; border-radius:12px;
      padding:10px 12px; box-shadow:0 2px 6px rgba(0,0,0,0.05);
      font-size:13px; color:#495057; font-weight:700;
      display:flex; gap:12px; flex-wrap:wrap;
    ">
      <span>ì´ ë°©ë¬¸: ${total}</span>
      <span>ì˜¤ëŠ˜ ë°©ë¬¸: ${todayCount}</span>
      <span>ë°©ë¬¸í•œ ë‚ ì§œ ìˆ˜: ${uniqueDayCount}</span>
      <span style="font-weight:600; color:#868e96;">(ì´ ê¸°ê¸° ê¸°ì¤€)</span>
    </div>
  `;
}

// ===============================
// íƒ­ ì „í™˜
// ===============================
function show(id){
  currentTabId = id;

  document.querySelectorAll('.content')
    .forEach(c => c.classList.remove('active'));

  document.getElementById(id)?.classList.add('active');

  renderPostsForTab(id);
}

function openAdminLogin(){ adminModal.style.display = 'flex'; }
function closeAdminLogin(){ adminModal.style.display = 'none'; }

// ===============================
// ê´€ë¦¬ì ë¡œê·¸ì¸
// ===============================
function adminLogin(){
  const pw = adminPw.value;

  if(pw === ADMIN_PASSWORD){
    isAdmin = true;
    localStorage.setItem('isAdmin','true');
    closeAdminLogin();
    applyAdminUI();
    renderPostsForTab(currentTabId);
    renderStats(); // âœ… ë¡œê·¸ì¸í•˜ìë§ˆì í†µê³„ í‘œì‹œ
    alert('ê´€ë¦¬ì ëª¨ë“œ ON');
  } else alert('ë¹„ë°€ë²ˆí˜¸ í‹€ë¦¼');
}

function adminLogout(){
  isAdmin = false;
  localStorage.removeItem('isAdmin');
  applyAdminUI();
  renderPostsForTab(currentTabId);
  renderStats(); // âœ… ë¡œê·¸ì•„ì›ƒí•˜ë©´ í†µê³„ ìˆ¨ê¹€
}

function applyAdminUI(){
  adminLoginBtn.style.display = isAdmin ? 'none' : 'inline-block';
  adminLogoutBtn.style.display = isAdmin ? 'inline-block' : 'none';

  document.querySelectorAll('.admin-only')
    .forEach(el => el.style.display = isAdmin ? 'inline-block' : 'none');
}

// ===============================
// ì €ì¥ ìœ í‹¸
// ===============================
function loadPosts(){
  return JSON.parse(localStorage.getItem('posts') || '[]');
}
function savePosts(arr){
  localStorage.setItem('posts', JSON.stringify(arr));
}
function updatePostById(postId, updater){
  const saved = loadPosts();
  const idx = saved.findIndex(p => p.id === postId);
  if(idx === -1) return null;

  const updated = updater(saved[idx]) || saved[idx];

  // âœ… ì•ˆì „ì¥ì¹˜: date ì—†ìœ¼ë©´ ë§Œë“¤ì–´ì¤Œ(ì˜› ê¸€ NaN ë°©ì§€)
  if(!updated.date || isNaN(Number(updated.date))){
    updated.date = Date.now();
  }

  // âœ… ì•ˆì „ì¥ì¹˜: views/likes/comments ê¸°ë³¸ê°’
  updated.views = updated.views || 0;
  updated.likes = updated.likes || 0;
  updated.comments = updated.comments || [];

  saved[idx] = updated;
  savePosts(saved);
  return updated;
}

// ===============================
// ë‚ ì§œ í¬ë§·(NaN ë°©ì§€)
// ===============================
function formatDate(timestamp){
  const t = Number(timestamp);
  if(!t || Number.isNaN(t)) return '-';
  const d = new Date(t);
  return `${d.getFullYear()}.${String(d.getMonth()+1).padStart(2,'0')}.${String(d.getDate()).padStart(2,'0')} ${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}`;
}

// ===============================
// íƒ­ë³„ ë Œë”ë§
// ===============================
function renderPostsForTab(tabId){
  if(!postsEl) return;

  postsEl.innerHTML = '';

  const all = loadPosts();
  const list = all
    .map(p => {
      // âœ… ì˜› ê¸€ ë³´ì •(ì‘ì„±ì¼/ê¸°ë³¸ê°’)
      if(!p.date || isNaN(Number(p.date))) p.date = p.date || p.id || Date.now();
      p.views = p.views || 0;
      p.likes = p.likes || 0;
      p.comments = p.comments || [];
      p.tabId = p.tabId || 'home';
      return p;
    })
    .filter(p => p.tabId === tabId);

  // ìµœì‹ ê¸€ì´ ìœ„ë¡œ ì˜¤ê²Œ(ì›í•˜ë©´ ì œê±° ê°€ëŠ¥)
  list.sort((a,b)=> (b.date||0) - (a.date||0));

  savePosts(all); // ë³´ì •ê°’ ì €ì¥
  list.forEach(addPostToDOM);
}

// ===============================
// ì¢‹ì•„ìš”(ì´ ê¸°ê¸° 1ë²ˆë§Œ)
// ===============================
function hasLiked(postId){
  const liked = JSON.parse(localStorage.getItem('likedPosts') || '{}');
  return liked[String(postId)] === true;
}
function setLiked(postId){
  const liked = JSON.parse(localStorage.getItem('likedPosts') || '{}');
  liked[String(postId)] = true;
  localStorage.setItem('likedPosts', JSON.stringify(liked));
}

// ===============================
// ëŒ“ê¸€ ìœ í‹¸
// ===============================
function makeComment(text){
  return {
    id: Date.now() + Math.floor(Math.random()*1000),
    text,
    date: Date.now()
  };
}

// ===============================
// DOM ìƒì„±
// ===============================
function addPostToDOM(post){

  const wrap = document.createElement('div');

  const title = document.createElement('div');
  title.textContent = post.title;
  title.style.fontWeight = '800';
  title.style.cursor = 'pointer';

  const meta = document.createElement('div');
  meta.style.fontSize = '12px';
  meta.style.color = '#888';
  meta.style.margin = '4px 0';

  const likesCount = post.likes || 0;
  const viewsCount = post.views || 0;
  meta.textContent = `ì‘ì„±ì¼: ${formatDate(post.date)} | ì¡°íšŒìˆ˜: ${viewsCount} | ì¢‹ì•„ìš”: ${likesCount}`;

  // âœ… ì¤„ë°”ê¿ˆ ìœ ì§€: textContent ëŒ€ì‹ , whiteSpace ì„¤ì • + \n ê·¸ëŒ€ë¡œ ì“°ê¸°
  const content = document.createElement('div');
  content.textContent = post.content;
  content.style.whiteSpace = 'pre-wrap'; // ğŸ”¥ ì—”í„°/ì¤„ë°”ê¿ˆ ê·¸ëŒ€ë¡œ í‘œì‹œ
  content.style.display = 'none';
  content.style.marginTop = '8px';

  // ì•¡ì…˜ ë°”(ì¢‹ì•„ìš”)
  const actionRow = document.createElement('div');
  actionRow.style.display = 'none';
  actionRow.style.marginTop = '10px';

  const likeBtn = document.createElement('button');
  likeBtn.textContent = hasLiked(post.id) ? 'ğŸ‘ ì¢‹ì•„ìš” ì™„ë£Œ' : 'ğŸ‘ ì¢‹ì•„ìš”';
  likeBtn.disabled = hasLiked(post.id);
  likeBtn.onclick = () => {
    if(hasLiked(post.id)) return;

    setLiked(post.id);
    const updated = updatePostById(post.id, (p)=>{
      p.likes = (p.likes || 0) + 1;
      return p;
    });

    likeBtn.textContent = 'ğŸ‘ ì¢‹ì•„ìš” ì™„ë£Œ';
    likeBtn.disabled = true;

    meta.textContent = `ì‘ì„±ì¼: ${formatDate(updated.date)} | ì¡°íšŒìˆ˜: ${updated.views || 0} | ì¢‹ì•„ìš”: ${updated.likes || 0}`;
  };

  actionRow.appendChild(likeBtn);

  // ëŒ“ê¸€ ì˜ì—­
  const commentWrap = document.createElement('div');
  commentWrap.style.display = 'none';
  commentWrap.style.marginTop = '12px';
  commentWrap.style.borderTop = '1px solid #eee';
  commentWrap.style.paddingTop = '10px';

  const commentTitle = document.createElement('div');
  commentTitle.textContent = 'ëŒ“ê¸€';
  commentTitle.style.fontWeight = '800';
  commentTitle.style.marginBottom = '6px';

  const commentList = document.createElement('div');

  const commentForm = document.createElement('div');
  commentForm.style.display = 'flex';
  commentForm.style.gap = '8px';
  commentForm.style.marginTop = '8px';

  const commentInput = document.createElement('input');
  commentInput.placeholder = 'ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”';
  commentInput.style.flex = '1';
  commentInput.style.padding = '10px 12px';
  commentInput.style.border = '1px solid #e5e7eb';
  commentInput.style.borderRadius = '10px';

  const commentBtn = document.createElement('button');
  commentBtn.textContent = 'ë“±ë¡';
  commentBtn.onclick = () => {
    const txt = commentInput.value.trim();
    if(!txt) return alert('ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”');

    const updated = updatePostById(post.id, (p)=>{
      p.comments = p.comments || [];
      p.comments.push(makeComment(txt));
      return p;
    });

    commentInput.value = '';
    renderComments(updated);
  };

  commentForm.append(commentInput, commentBtn);
  commentWrap.append(commentTitle, commentList, commentForm);

  function renderComments(p){
    commentList.innerHTML = '';
    const comments = p.comments || [];

    if(comments.length === 0){
      const empty = document.createElement('div');
      empty.style.color = '#888';
      empty.style.fontSize = '13px';
      empty.textContent = 'ì•„ì§ ëŒ“ê¸€ì´ ì—†ì–´ìš”.';
      commentList.appendChild(empty);
      return;
    }

    comments.forEach(c=>{
      const row = document.createElement('div');
      row.style.padding = '8px 0';
      row.style.borderBottom = '1px dashed #eee';

      const top = document.createElement('div');
      top.style.display = 'flex';
      top.style.justifyContent = 'space-between';
      top.style.gap = '8px';

      const left = document.createElement('div');
      left.style.fontSize = '13px';
      left.style.color = '#495057';
      left.style.whiteSpace = 'pre-wrap'; // ëŒ“ê¸€ë„ ì—”í„° ë˜ê²Œ
      left.textContent = c.text;

      const right = document.createElement('div');
      right.style.fontSize = '12px';
      right.style.color = '#999';
      right.textContent = formatDate(c.date);

      top.append(left, right);

      if(isAdmin){
        const delC = document.createElement('button');
        delC.textContent = 'ëŒ“ê¸€ì‚­ì œ';
        delC.style.marginTop = '6px';
        delC.onclick = () => {
          const updated = updatePostById(post.id, (pp)=>{
            pp.comments = (pp.comments || []).filter(x => x.id !== c.id);
            return pp;
          });
          renderComments(updated);
        };
        row.append(top, delC);
      }else{
        row.append(top);
      }

      commentList.appendChild(row);
    });
  }

  // ê¸€ ì—´ê¸°/ë‹«ê¸° + ì¡°íšŒìˆ˜
  title.onclick = () => {
    const isOpen = content.style.display === 'block';

    content.style.display = isOpen ? 'none' : 'block';
    actionRow.style.display = isOpen ? 'none' : 'block';
    commentWrap.style.display = isOpen ? 'none' : 'block';

    if(!isOpen){
      const updated = updatePostById(post.id, (p)=>{
        p.views = (p.views || 0) + 1;
        return p;
      });

      meta.textContent = `ì‘ì„±ì¼: ${formatDate(updated.date)} | ì¡°íšŒìˆ˜: ${updated.views || 0} | ì¢‹ì•„ìš”: ${updated.likes || 0}`;
      renderComments(updated);
    }
  };

  wrap.append(title, meta, content, actionRow, commentWrap);

  // ê´€ë¦¬ì ê¸°ëŠ¥(ìˆ˜ì •/ì‚­ì œ)
  if(isAdmin){
    const edit = document.createElement('button');
    edit.textContent = 'ìˆ˜ì •';
    edit.onclick = ()=>{
      editingPostId = post.id;
      postTitle.value = post.title;
      postContent.value = post.content;
      writeModal.style.display = 'flex';
    };

    const del = document.createElement('button');
    del.textContent = 'ì‚­ì œ';
    del.onclick = ()=>{
      removePost(post.id);
      renderPostsForTab(currentTabId);
    };

    wrap.append(edit, del);
  }

  postsEl.appendChild(wrap);
}

// ===============================
// ì‚­ì œ
// ===============================
function removePost(id){
  const saved = loadPosts().filter(p => p.id !== id);
  savePosts(saved);
}

// ===============================
// ê¸€ì“°ê¸°
// ===============================
function openWrite(){
  if(!isAdmin) return alert('ê´€ë¦¬ìë§Œ ê°€ëŠ¥');
  writeModal.style.display = 'flex';
}

function closeWrite(){
  writeModal.style.display = 'none';
  editingPostId = null;
}

function savePost(){
  const title = postTitle.value.trim();
  const content = postContent.value.trim();
  if(!title || !content) return alert('ì…ë ¥í•˜ì„¸ìš”');

  const saved = loadPosts();

  if(editingPostId){
    const idx = saved.findIndex(p => p.id === editingPostId);
    if(idx !== -1){
      saved[idx].title = title;
      saved[idx].content = content;
      // âœ… ìˆ˜ì •í•´ë„ ì‘ì„±ì¼ì€ ìœ ì§€(ì›í•˜ë©´ ê°±ì‹  ê°€ëŠ¥)
      saved[idx].date = saved[idx].date || Date.now();
    }
    editingPostId = null;
  }else{
    saved.push({
      id: Date.now(),
      title,
      content,
      tabId: currentTabId,
      date: Date.now(),      // âœ… ì‘ì„±ì¼ ë°˜ë“œì‹œ ì €ì¥
      views: 0,
      likes: 0,
      comments: []
    });
  }

  savePosts(saved);

  closeWrite();
  postTitle.value = '';
  postContent.value = '';
  renderPostsForTab(currentTabId);
}

// ===============================
// ì´ˆê¸°í™”
// ===============================
document.addEventListener('DOMContentLoaded', ()=>{
  bumpVisitorStats(); // ì¼ë‹¨ ì§‘ê³„ëŠ” í•˜ê³ 

  isAdmin = localStorage.getItem('isAdmin')==='true';
  applyAdminUI();

  currentTabId = document.querySelector('.content.active')?.id || 'home';
  renderPostsForTab(currentTabId);

  renderStats(); // âœ… ê´€ë¦¬ìë©´ ë³´ì´ê³  ì•„ë‹ˆë©´ ìˆ¨ê¹€
});

// ===============================
// ê³µí†µ ìœ í‹¸
// ===============================
function cells(n){
  return '<textarea></textarea>'.repeat(n);
}

// ë¸”ë¡(ì§€ì‹Â·ì´í•´ / ê³¼ì •Â·ê¸°ëŠ¥) í–‰ ìƒì„±
function makeBlockRows(title, rows){
  return rows.map((r,i)=>`
    <tr>
      ${i===0 ? `<td rowspan="${rows.length}">${title}</td>` : ``}

      <td>
        ${r.input ? '<textarea></textarea>' : r.label}
      </td>

      <td>${cells(r.cells[0])}</td>
      <td>${cells(r.cells[1])}</td>
      <td>${cells(r.cells[2])}</td>
    </tr>
  `).join('');
}

// ===============================
// í‘œ í•˜ë‚˜ ìƒì„±
// ===============================
// ===============================
// í‘œ í•˜ë‚˜ ìƒì„± (í•µì‹¬ì•„ì´ë””ì–´ ì…ë ¥ì¹¸ ì œê±° + ë¬¸ì¥ ê³ ì •)
// ===============================
function makeKoreanTable(title, data){

  // (1)~(6) ë²ˆí˜¸ ë½‘ê¸°
  const n = (title.match(/^\((\d)\)/)?.[1]) || "";

  // âœ… í•µì‹¬ì•„ì´ë””ì–´ ë¬¸ì¥ ê³ ì • ë°ì´í„°
  const ideaMap = {
    "1": `â‹… ë“£ê¸°â‹…ë§í•˜ê¸°ëŠ” ì–¸ì–´, ì¤€ì–¸ì–´, ë¹„ì–¸ì–´, ë§¤ì²´ ë“±ì„ í™œìš©í•˜ì—¬ ì„œë¡œì˜ ìƒê°ê³¼ ê°ì •ì„ ì£¼ê³ ë°›ëŠ” í–‰ìœ„ì´ë‹¤.<br>
         â‹… í™”ìì™€ ì²­ìëŠ” ìƒí™© ë§¥ë½ ë° ì‚¬íšŒâ‹…ë¬¸í™”ì  ë§¥ë½ ì†ì—ì„œ ì˜ì‚¬ì†Œí†µ ëª©ì ì„ ë‹¬ì„±í•˜ê¸° ìœ„í•˜ì—¬ ë‹¤ì–‘í•œ ìœ í˜•ì˜ ë‹´í™”ë¥¼ ë“£ê³  ë§í•œë‹¤.<br>
         â‹… í™”ìì™€ ì²­ìëŠ” ì˜ì‚¬ì†Œí†µ ê³¼ì •ì— í˜‘ë ¥ì ìœ¼ë¡œ ì°¸ì—¬í•˜ê³  ë“£ê¸°â‹…ë§í•˜ê¸° ê³¼ì •ì—ì„œì˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì ì ˆí•œ ì „ëµì„ ì‚¬ìš©í•˜ì—¬ ë“£ê³  ë§í•œë‹¤.<br>
         â‹… í™”ìì™€ ì²­ìëŠ” ë“£ê¸°â‹…ë§í•˜ê¸°ì— í¥ë¯¸ë¥¼ ê°€ì§€ê³  ì ê·¹ì ìœ¼ë¡œ ì°¸ì—¬í•˜ë©´ì„œ ë‹´í™” ê³µë™ì²´ êµ¬ì„±ì›ìœ¼ë¡œ ì„±ì¥í•˜ê³ , ìƒí˜¸ ì¡´ì¤‘í•˜ê³  ê³µê°í•˜ëŠ” ì†Œí†µ ë¬¸í™”ë¥¼ ë§Œë“¤ì–´ ê°„ë‹¤.`,
    "2": `â‹… ì½ê¸°ëŠ” ë…ìê°€ ìì‹ ì˜ ë°°ê²½ì§€ì‹ì´ë‚˜ ê²½í—˜ì„ í™œìš©í•˜ì—¬ ì–¸ì–´ë¥¼ ë¹„ë¡¯í•œ ë‹¤ì–‘í•œ ê¸°í˜¸ë‚˜ ë§¤ì²´ë¡œ í‘œí˜„ëœ ê¸€ì˜ ì˜ë¯¸ë¥¼ ëŠ¥ë™ì ìœ¼ë¡œ êµ¬ì„±í•˜ëŠ” í–‰ìœ„ì´ë‹¤.<br>
         â‹… ë…ìëŠ” ë‹¤ì–‘í•œ ìƒí™© ë§¥ë½ê³¼ ì‚¬íšŒâ‹…ë¬¸í™”ì  ë§¥ë½ ì†ì—ì„œ ìì‹ ì˜ ì½ê¸° ëª©ì ì„ ë‹¬ì„±í•˜ê¸° ìœ„í•˜ì—¬ ë‹¤ì–‘í•œ ìœ í˜•ì˜ ê¸€ì„ ì½ëŠ”ë‹¤.<br>
         â‹… ë…ìëŠ” ì½ê¸° ê³¼ì •ì„ ì ê²€â‹…ì¡°ì •í•˜ë©° ì½ê¸° ê³¼ì •ì—ì„œ ë¶€ë”ªíˆëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì ì ˆí•œ ì½ê¸° ì „ëµì„ ì‚¬ìš©í•˜ì—¬ ê¸€ì„ ì½ëŠ”ë‹¤.<br>
         â‹… ë…ìëŠ” ì½ê¸° ê²½í—˜ì„ í†µí•´ ì½ê¸°ì— ëŒ€í•œ ê¸ì •ì  ì •ì„œë¥¼ í˜•ì„±í•˜ê³  ì‚¶ê³¼ ê³µë™ì²´ì˜ ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ê³µë™ì²´ êµ¬ì„±ì›ê³¼ í•¨ê»˜ ë…ì„œë¥¼ í†µí•´ ì†Œí†µí•¨ìœ¼ë¡œì¨ ì‚¬íšŒì  ë…ì„œ ë¬¸í™”ë¥¼ ë§Œë“¤ì–´ ê°„ë‹¤.`,
    "3": `â‹… ì“°ê¸°ëŠ” ì–¸ì–´ë¥¼ ë¹„ë¡¯í•œ ë‹¤ì–‘í•œ ê¸°í˜¸ë‚˜ ë§¤ì²´ë¥¼ í™œìš©í•˜ì—¬ ì¸ê°„ì˜ ìƒê°ê³¼ ê°ì •ì„ ê¸€ë¡œ í‘œí˜„í•¨ìœ¼ë¡œì¨ ì˜ë¯¸ë¥¼ êµ¬ì„±í•˜ëŠ” í–‰ìœ„ì´ë‹¤.<br>
         â‹… í•„ìëŠ” ìƒí™© ë§¥ë½ ë° ì‚¬íšŒâ‹…ë¬¸í™”ì  ë§¥ë½ ì†ì—ì„œ ìì‹ ì˜ ì˜ì‚¬ì†Œí†µ ëª©ì ì„ ë‹¬ì„±í•˜ê¸° ìœ„í•˜ì—¬ ë‹¤ì–‘í•œ ìœ í˜•ì˜ ê¸€ì„ ì“´ë‹¤.<br>
         â‹… í•„ìëŠ” ì“°ê¸° ê³¼ì •ì—ì„œ ë¶€ë”ªíˆëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•˜ì—¬ ì ì ˆí•œ ì“°ê¸° ì „ëµì„ ì‚¬ìš©í•˜ì—¬ ê¸€ì„ ì“´ë‹¤.<br>
         â‹… í•„ìëŠ” ì“°ê¸° ê²½í—˜ì„ í†µí•´ ì–¸ì–´ ê³µë™ì²´ì˜ êµ¬ì„±ì›ìœ¼ë¡œ ì„±ì¥í•˜ê³ , ì“°ê¸° ìœ¤ë¦¬ë¥¼ ê°–ì¶”ì–´ ë…ìì™€ ì†Œí†µí•¨ìœ¼ë¡œì¨ ë°”ëŒì§í•œ ì˜ì‚¬ì†Œí†µ ë¬¸í™”ë¥¼ ë§Œë“¤ì–´ ê°„ë‹¤.`,
    "4": `â‹… ë¬¸ë²•ì€ êµ­ì–´ì˜ í˜•ì‹ê³¼ ë‚´ìš©ì„ ì´ë£¨ëŠ” í‹€ë¡œì„œ ê·œì¹™ê³¼ ì›ë¦¬ë¡œ êµ¬ì„±â‹…ìš´ì˜ë˜ë©°, ë¬¸ë²• íƒêµ¬ëŠ” ë¬¸ë²•ì— ëŒ€í•´ ì‚¬ê³ í•˜ëŠ” í™œë™ìœ¼ë¡œ êµ­ì–´ì— ëŒ€í•œ ì´ì²´ì  ì•ì„ ì´ëˆë‹¤.<br>
         â‹… êµ­ì–´ëŠ” ì²´ê³„ì™€ êµ¬ì¡°ë¥¼ ê°–ì¶˜ ì˜ë¯¸ ìƒì„± ìì›ì´ì, ì‚¬íšŒì ìœ¼ë¡œ êµ¬ì„±ëœ ê´€ìŠµì  ê·œì•½ì´ë©°, ê³µë™ì²´ì˜ ì‚¬ê³ ì™€ ê°€ì¹˜ë¥¼ í‘œìƒí•˜ëŠ” ë¬¸í™”ì  ì‚°ë¬¼ì´ë‹¤.<br>
         â‹… êµ­ì–´ ìë£ŒëŠ” ë‹¤ì–‘í•œ ë§¥ë½ì—ì„œ ë§Œë“¤ì–´ì§€ëŠ” ì˜ì‚¬ì†Œí†µì˜ ê²°ê³¼ë¬¼ë¡œì„œ, êµ­ì–´ í˜„ìƒì„ íŒŒì•…í•˜ê³  êµ­ì–´ ë¬¸ì œë¥¼ ë°œê²¬í•  ìˆ˜ ìˆëŠ” ë¬¸ë²• íƒêµ¬ì˜ ëŒ€ìƒì´ë‹¤.<br>
         â‹… êµ­ì–´ ì‚¬ìš©ìëŠ” ì¼ìƒìƒí™œì—ì„œ êµ­ì–´ í˜„ìƒê³¼ êµ­ì–´ ë¬¸ì œë¥¼ íƒêµ¬í•˜ê³  ì„±ì°°í•˜ë©´ì„œ ì–¸ì–´ ì£¼ì²´ë¡œì„œì˜ ì •ì²´ì„±ê³¼ êµ­ì–´ ì˜ì‹ì„ í˜•ì„±í•œë‹¤.`,
    "5": `â‹… ë¬¸í•™ì€ ì¸ê°„ì˜ ì‚¶ì„ ì–¸ì–´ë¡œ í˜•ìƒí™”í•œ ì‘í’ˆì„ í†µí•´ ì¦ê±°ì›€ê³¼ ê¹¨ë‹¬ìŒì„ ì–»ê³  íƒ€ìì™€ ì†Œí†µí•˜ëŠ” í–‰ìœ„ì´ë‹¤.<br>
         â‹… ë¬¸í•™ ì‘í’ˆì„ í†µí•œ ì†Œí†µì€ ì‘í’ˆì˜ ê°ˆë˜, ì‘ê°€ì™€ ë…ì, ì‚¬íšŒì™€ ë¬¸í™”, ë¬¸í•™ì‚¬ì˜ ì˜í–¥ ë“±ì„ ê³ ë ¤í•˜ë©° ì´ë£¨ì–´ì§„ë‹¤.<br>
         â‹… ë¬¸í•™ ìˆ˜ìš©â‹…ìƒì‚° ëŠ¥ë ¥ì€ ë¬¸í•™ì˜ í•´ì„, ê°ìƒ, ë¹„í‰, ì°½ì‘ í™œë™ì„ í†µí•´ í–¥ìƒëœë‹¤.<br>
         â‹… ì¸ê°„ì€ ë¬¸í•™ì„ í–¥ìœ í•˜ë©´ì„œ ìì•„ë¥¼ ì„±ì°°í•˜ê³  íƒ€ìë¥¼ ì´í•´í•˜ë©° ê³µë™ì²´ì˜ ì¼ì›ìœ¼ë¡œ ì„±ì¥í•œë‹¤.`,
    "6": `â‹… ë§¤ì²´ëŠ” ì†Œí†µì„ ë§¤ê°œí•˜ëŠ” ë„êµ¬, ê¸°ìˆ , í™˜ê²½ìœ¼ë¡œ ë‹¹ëŒ€ ì‚¬íšŒì˜ ì†Œí†µ ë°©ì‹ê³¼ ì†Œí†µ ë¬¸í™”ì— ì˜í–¥ì„ ë¯¸ì¹œë‹¤.<br>
         â‹… ë§¤ì²´ ì´ìš©ìëŠ” ë§¤ì²´ ìë£Œì˜ ì£¼ì²´ì ì¸ ìˆ˜ìš©ê³¼ ìƒì‚°ì„ í†µí•´ ì •ì²´ì„±ì„ í˜•ì„±í•˜ê³  ì‚¬íšŒì  ì˜ë¯¸ êµ¬ì„± ê³¼ì •ì— ê´€ì—¬í•œë‹¤.<br>
         â‹… ë§¤ì²´ ì´ìš©ìëŠ” ë§¤ì²´ ë° ë§¤ì²´ ì†Œí†µì˜ ì˜í–¥ë ¥ì— ëŒ€í•œ ì´í•´ì™€ ìì‹ ê³¼ íƒ€ì¸ì˜ ê¶Œë¦¬ë¥¼ ì§€í‚¤ê¸° ìœ„í•œ ì ê·¹ì ì¸ ë…¸ë ¥ì„ í†µí•´ ê±´ê°•í•œ ì†Œí†µ ê³µë™ì²´ë¥¼ í˜•ì„±í•œë‹¤.`
  };

  const ideaHTML = ideaMap[n] || "";

  return `
  <div class="nt-title">${title}</div>

  <table class="subject-table">

    <!-- âœ… í•µì‹¬ ì•„ì´ë””ì–´: ì…ë ¥ì¹¸ ì œê±° + ë¬¸ì¥ ê³ ì • -->
    <tr>
      <th>í•µì‹¬ ì•„ì´ë””ì–´</th>
      <td colspan="4" class="idea-block">${ideaHTML}</td>
    </tr>

    <!-- ë²”ì£¼ / í•™ë…„êµ° -->
    <tr>
      <th rowspan="2" colspan="2">ë²”ì£¼</th>
      <th colspan="3">ë‚´ìš©ìš”ì†Œ</th>
    </tr>
    <tr>
      <th>1~2í•™ë…„</th>
      <th>3~4í•™ë…„</th>
      <th>5~6í•™ë…„</th>
    </tr>

    <!-- ì§€ì‹Â·ì´í•´ -->
    ${makeBlockRows('ì§€ì‹ Â· ì´í•´', data.knowledge)}

    <!-- ê³¼ì •Â·ê¸°ëŠ¥ -->
    ${makeBlockRows('ê³¼ì • Â· ê¸°ëŠ¥', data.process)}

    <!-- ê°€ì¹˜Â·íƒœë„ -->
    <tr>
      <td colspan="2">ê°€ì¹˜ Â· íƒœë„</td>
      <td>${cells(data.value[0])}</td>
      <td>${cells(data.value[1])}</td>
      <td>${cells(data.value[2])}</td>
    </tr>

  </table>

  <div class="actions-bar">
    <button class="grade">ì±„ì </button>
    <button class="grade">ì •ë‹µ</button>
    <button class="clear">ì§€ìš°ê¸°</button>
    <div class="score">ì •ë‹µë¥  : 0%</div>
  </div>
  `;
}

// ===============================
// ì‹¤ì œ ì¶œë ¥
// ===============================
const koreanWrap = document.getElementById('koreanTables');

koreanWrap.innerHTML = `
${makeKoreanTable('(1) ë“£ê¸°Â·ë§í•˜ê¸°',{
  knowledge:[
    {label:'ë“£ê¸° â€¢ ë§í•˜ê¸° ë§¥ë½', cells:[1,1,2]},
    {label:'ë‹´í™” ìœ í˜•', cells:[2,3,5]}
  ],
  process:[
    {label:'ë‚´ìš© í™•ì¸Â·ì¶”ë¡ Â·í‰ê°€', cells:[3,4,2]},
    {label:'ë‚´ìš© ìƒì„±Â·ì¡°ì§Â·í‘œí˜„Â·ì „ë‹¬', cells:[4,5,5]},
    {label:'ìƒí˜¸ ì‘ìš©', cells:[2,3,4]},
    {label:'ì ê²€ê³¼ ì¡°ì •', cells:[0,1,1]}
  ],
  value:[1,1,1]
})}

${makeKoreanTable('(2) ì½ê¸°',{
  knowledge:[
    {label:'ì½ê¸° ë§¥ë½', cells:[0,1,2]},
    {label:'ê¸€ì˜ ìœ í˜•', cells:[3,4,4]}
  ],
  process:[
    {label:'ì½ê¸°ì˜ ê¸°ì´ˆ', cells:[3,1,0]},
    {label:'ë‚´ìš© í™•ì¸ê³¼ ì¶”ë¡ ', input:true, cells:[2,3,4]},
    {label:'í‰ê°€ì™€ ì°½ì˜', input:true, cells:[1,3,2]},
    {label:'ì ê²€ê³¼ ì¡°ì •', cells:[0,1,1]}
  ],
  value:[1,1,2]
})}

${makeKoreanTable('(3) ì“°ê¸°',{
  knowledge:[
    {label:'ì“°ê¸° ë§¥ë½', cells:[0,1,2]},
    {label:'ê¸€ì˜ ìœ í˜•', cells:[2,3,3]}
  ],
  process:[
    {label:'ì“°ê¸°ì˜ ê¸°ì´ˆ', cells:[3,1,0]},
    {label:'ê³„íší•˜ê¸°', input:true, cells:[0,1,1]},
    {label:'ë‚´ìš© ìƒì„±í•˜ê¸°', cells:[1,1,1]},
    {label:'ë‚´ìš© ì¡°ì§í•˜ê¸°', cells:[0,1,1]},
    {label:'í‘œí˜„í•˜ê¸°', cells:[1,1,1]},
    {label:'ê³ ì³ì“°ê¸°', cells:[0,1,1]},
    {label:'ê³µìœ í•˜ê¸°', input:true, cells:[1,1,1]},
    {label:'ì ê²€Â·ì¡°ì •', cells:[0,1,1]}
  ],
  value:[1,1,2]
})}

${makeKoreanTable('(4) ë¬¸ë²•',{
  knowledge:[
    {label:'ì–¸ì–´ì˜ ë³¸ì§ˆê³¼ ë§¥ë½', cells:[0,2,2]},
    {label:'ì–¸ì–´ ë‹¨ìœ„', cells:[1,4,4]},
    {label:'í•œê¸€ì˜ ê¸°ì´ˆì™€ ì–¸ì–´ ê·œë²”', cells:[3,1,1]}
  ],
  process:[
    {label:'êµ­ì–´ì˜ ë¶„ì„ê³¼ í™œìš©', cells:[1,3,2]},
    {label:'êµ­ì–´ ì‹¤ì²œì˜ ì„±ì°°ê³¼ ë¹„íŒ', cells:[1,1,2]}
  ],
  value:[1,1,2]
})}

${makeKoreanTable('(5) ë¬¸í•™',{
  knowledge:[
    {label:'ê°ˆë˜', cells:[2,3,4]},
    {label:'ë§¥ë½', cells:[0,1,2]}
  ],
  process:[
    {label:'ì‘í’ˆ ì½ê¸°ì™€ ì´í•´', cells:[2,2,2]},
    {label:'í•´ì„ê³¼ ê°ìƒ', input:true, cells:[2,2,2]},
    {label:'ë¹„í‰', input:true, cells:[0,1,1]},
    {label:'ì°½ì‘', input:true, cells:[1,1,1]}
  ],
  value:[1,1,2]
})}

${makeKoreanTable('(6) ë§¤ì²´',{
  knowledge:[
  {label:'ë©”ì²´ ì†Œí†µ ë§¥ë½', cells:[0,1,2]},
    {label:'ë§¤ì²´ ìë£Œ ìœ í˜•', input:true, cells:[1,1,1]}
  ],
  process:[
    {label:'ì ‘ê·¼ê³¼ ì„ íƒ', cells:[1,1,1]},
    {label:'í•´ì„ê³¼ í‰ê°€', input:true, cells:[0,1,1]},
    {label:'ì œì‘ê³¼ ê³µìœ ', cells:[1,2,1]},
    {label:'ì ê²€ê³¼ ì¡°ì •', cells:[0,1,1]}
  ],
  value:[1,1,1]
})}
`;
/* ======================================================
   âœ… êµ­ì–´ ë‚´ì²´í‘œ (1)~(6) ì „ì²´ ì •ë‹µ/ì±„ì /ì§€ìš°ê¸° + ì •ë‹µë¥ 
   - "+"ëŠ” ì…€ ë¶„ë¦¬
   - ì…€ ê°œìˆ˜ë³´ë‹¤ ë¶€ì¡±í•˜ë©´: ì½¤ë§ˆ(,)ë¡œ ì¶”ê°€ ë¶„ë¦¬(â€˜ â€™ ì•ˆì€ ë³´í˜¸)
   - ì…€ ê°œìˆ˜ë³´ë‹¤ ë§ìœ¼ë©´: ë‚¨ëŠ” ê±´ ë²„ë¦¼
   - ì±„ì ì€ "ì •ë‹µì´ ìˆëŠ” ì¹¸ë§Œ" ì¹´ìš´íŠ¸
   - â­ input:true(ë²”ì£¼ ë¹ˆì¹¸)ë„ ì •ë‹µ/ì±„ì /ì§€ìš°ê¸° í¬í•¨
====================================================== */

(function () {
  // ê³µë°±/ê¸°í˜¸ ë¬´ì‹œ ì •ê·œí™”
  function norm(t) {
    return (t || "")
      .replace(/[\sÂ·â‹…â€¢,/â€™â€˜"'â€œâ€()\-\u00b7]/g, "")
      .trim();
  }

  // â€˜ â€™ ì•ˆì—ì„œëŠ” + / , ë¶„ë¦¬ ë¬´ì‹œ
  function splitOutsideQuotes(text, delimiter) {
    const s = (text || "").trim();
    const out = [];
    let cur = "";
    let inQuote = false;

    for (let i = 0; i < s.length; i++) {
      const ch = s[i];
      if (ch === "â€˜" || ch === "â€™") {
        inQuote = !inQuote;
        cur += ch;
        continue;
      }
      if (!inQuote && ch === delimiter) {
        out.push(cur.trim());
        cur = "";
        continue;
      }
      cur += ch;
    }
    out.push(cur.trim());
    return out.filter(v => v !== "");
  }

  // + ë¨¼ì € ë¶„ë¦¬, ë¶€ì¡±í•˜ë©´ ì½¤ë§ˆë¡œ ì¶”ê°€ ë¶„ë¦¬
  function splitToCount(text, expectedCount) {
    let parts = splitOutsideQuotes(text, "+").map(v => v.trim());

    if (!expectedCount) return parts;

    while (parts.length < expectedCount && parts.length > 0) {
      const last = parts.pop();
      const more = splitOutsideQuotes(last, ",").map(v => v.trim());
      if (more.length <= 1) {
        parts.push(last);
        break;
      }
      parts.push(...more);
    }

    return parts.slice(0, expectedCount);
  }

  function clearMark(el) {
    el.classList.remove("correct", "wrong");
    el.style.color = "";
    el.style.background = "";
  }

  function setScore(bar, correct, total) {
    const score = bar.querySelector(".score");
    const pct = total ? Math.round((correct / total) * 100) : 0;
    if (score) score.textContent = `ì •ë‹µë¥  : ${correct} / ${total} (${pct}%)`;
  }

  /* ===============================
     âœ… input:true(ë²”ì£¼ ë¹ˆì¹¸) ì •ë‹µ
     - í‘œ(1)~(6) ìˆœì„œë¡œ, "ë²”ì£¼ ë¹ˆì¹¸ì´ ë‚˜íƒ€ë‚˜ëŠ” ìˆœì„œëŒ€ë¡œ" ì ì–´ë‘ 
     - (ì½ê¸°) ë‚´ìš©í™•ì¸ê³¼ì¶”ë¡ , í‰ê°€ì™€ì°½ì˜
     - (ì“°ê¸°) ê³„íší•˜ê¸°, ê³µìœ í•˜ê¸°
     - (ë¬¸í•™) í•´ì„ê³¼ê°ìƒ, ë¹„í‰, ì°½ì‘
     - (ë§¤ì²´) ë§¤ì²´ìë£Œìœ í˜•, í•´ì„ê³¼í‰ê°€
  =============================== */
  const CATEGORY_INPUT_ANS = [
    [], // (1) ë“£ê¸°ë§í•˜ê¸°
    ["ë‚´ìš©í™•ì¸ê³¼ ì¶”ë¡ ", "í‰ê°€ì™€ ì°½ì˜"], // (2) ì½ê¸°
    ["ê³„íší•˜ê¸°", "ê³µìœ í•˜ê¸°"], // (3) ì“°ê¸°
    [], // (4) ë¬¸ë²•
    ["í•´ì„ê³¼ ê°ìƒ", "ë¹„í‰", "ì°½ì‘"], // (5) ë¬¸í•™
    ["ë§¤ì²´ ìë£Œ ìœ í˜•", "í•´ì„ê³¼ í‰ê°€"] // (6) ë§¤ì²´
  ];

  /* ===============================
     âœ… ì •ë‹µ ë°ì´í„° (í‘œ 6ê°œ)
     - ìˆœì„œ: (1)ë“£ë§ (2)ì½ê¸° (3)ì“°ê¸° (4)ë¬¸ë²• (5)ë¬¸í•™ (6)ë§¤ì²´
  =============================== */
  const KOR_ANS = [
    // (1) ë“£ê¸°Â·ë§í•˜ê¸°
    {
      knowledge: [
        { g12: "ìƒí™©ë§¥ë½", g34: "ìƒí™©ë§¥ë½", g56: "ìƒí™©ë§¥ë½+ì‚¬íšŒë¬¸í™”ì ë§¥ë½" },
        { g12: "ëŒ€í™”+ë°œí‘œ", g34: "ëŒ€í™”+ë°œí‘œ+í† ì˜", g56: "ëŒ€í™”+ë©´ë‹´+ë°œí‘œ+í† ì˜+í† ë¡ " }
      ],
      process: [
        {
          g12: "ì§‘ì¤‘í•˜ê¸°+ì¤‘ìš”í•œ ë‚´ìš© í™•ì¸í•˜ê¸°+ì¼ì´ ì¼ì–´ë‚œ ìˆœì„œ íŒŒì•…í•˜ê¸°",
          g34: "ì¤‘ìš”í•œ ë‚´ìš©ê³¼ ì£¼ì œ íŒŒì•…í•˜ê¸°+ë‚´ìš© ìš”ì•½í•˜ê¸°+ì›ì¸ê³¼ ê²°ê³¼ íŒŒì•…í•˜ê¸°+ë‚´ìš© ì˜ˆì¸¡í•˜ê¸°",
          g56: "ìƒëµëœ ë‚´ìš© ì¶”ë¡ í•˜ê¸°+ì£¼ì¥, ì´ìœ , ê·¼ê±°ê°€ íƒ€ë‹¹í•œì§€ í‰ê°€í•˜ê¸°"
        },
        {
          g12: "ê²½í—˜ê³¼ ë°°ê²½ì§€ì‹ í™œìš©í•˜ê¸°+ì¼ì´ ì¼ì–´ë‚œ ìˆœì„œì— ë”°ë¼ ì¡°ì§í•˜ê¸°+ë°”ë¥´ê³  ê³ ìš´ ë§ë¡œ í‘œí˜„í•˜ê¸°+ë°”ë¥¸ ìì„¸ë¡œ ë§í•˜ê¸°",
          g34: "ëª©ì ê³¼ ì£¼ì œ ê³ ë ¤í•˜ê¸°+ìë£Œ ì •ë¦¬í•˜ê¸°+ì›ì¸ê³¼ ê²°ê³¼ êµ¬ì¡°ì— ë”°ë¼ ì¡°ì§í•˜ê¸°+ì£¼ì œì— ì ì ˆí•œ ì˜ê²¬ê³¼ ì´ìœ  ì œì‹œí•˜ê¸°+ì¤€ì–¸ì  ë¹„ì–¸ì–´ì  í‘œí˜„ í™œìš©í•˜ê¸°",
          g56: "ì²­ìì™€ ë§¤ì²´ ê³ ë ¤í•˜ê¸°+ìë£Œ ì„ ë³„í•˜ê¸°+í•µì‹¬ ì •ë³´ ì¤‘ì‹¬ìœ¼ë¡œ ë‚´ìš© êµ¬ì„±í•˜ê¸°+ì£¼ì¥, ì´ìœ , ê·¼ê±°ë¡œ ë‚´ìš© êµ¬ì„±í•˜ê¸°+ë§¤ì²´ í™œìš©í•˜ì—¬ ì „ë‹¬í•˜ê¸°"
        },
        {
          g12: "ë§ì°¨ë¡€ ì§€í‚¤ê¸°+ê°ì • ë‚˜ëˆ„ê¸°",
          g34: "ìƒí™©ê³¼ ìƒëŒ€ì˜ ì…ì¥ ì´í•´í•˜ê¸°+ì˜ˆì˜ë¥¼ ì§€í‚¤ë©° ë“£ê³  ë§í•˜ê¸°, ì˜ê²¬ êµí™˜í•˜ê¸°",
          g56: "ê¶ê¸ˆí•œ ë‚´ìš© ì§ˆë¬¸í•˜ê¸°+ì ˆì°¨ì™€ ê·œì¹™ ì¤€ìˆ˜í•˜ê¸°+í˜‘ë ¥ì ìœ¼ë¡œ ì°¸ì—¬í•˜ê¸°+ì˜ê²¬ ë¹„êµí•˜ê¸° ë° ì¡°ì •í•˜ê¸°"
        },
        {
          g12: "",
          g34: "ë“£ê¸°+ë§í•˜ê¸° ê³¼ì •ê³¼ ì „ëµì— ëŒ€í•´ ì ê²€ ì¡°ì •í•˜ê¸°",
          g56: "ë“£ê¸°+ë§í•˜ê¸° ê³¼ì •ê³¼ ì „ëµì— ëŒ€í•´ ì ê²€ ì¡°ì •í•˜ê¸°"
        }
      ],
      value: { g12: "ë“£ê¸° ë§í•˜ê¸°ì— ëŒ€í•œ í¥ë¯¸", g34: "ë“£ê¸° ë§í•˜ê¸° íš¨ëŠ¥ê°", g56: "ë“£ê¸° ë§í•˜ê¸°ì— ì ê·¹ì  ì°¸ì—¬" }
    },

    // (2) ì½ê¸°
    {
      knowledge: [
        { g12: "", g34: "ìƒí™© ë§¥ë½", g56: "ìƒí™© ë§¥ë½+ì‚¬íšŒ ë¬¸í™”ì  ë§¥ë½" },
        {
          g12: "ì¹œìˆ™í•œ í™”ì œì˜ ê¸€+ì„¤ëª… ëŒ€ìƒê³¼ ì£¼ì œê°€ ëª…ì‹œì ì¸ ê¸€+ìƒê°ì´ë‚˜ ê°ì •ì´ ëª…ì‹œì ìœ¼ë¡œ ì œì‹œëœ ê¸€",
          g34: "ì¹œìˆ™í•œ í™”ì œì˜ ê¸€+ì„¤ëª… ëŒ€ìƒê³¼ ì£¼ì œê°€ ëª…ì‹œì ì¸ ê¸€+ì£¼ì¥, ì´ìœ , ê·¼ê±°ê°€ ëª…ì‹œì ì¸ ê¸€+ìƒê°ì´ë‚˜ ê°ì •ì´ ëª…ì‹œì ìœ¼ë¡œ ì œì‹œëœ ê¸€",
          g56: "ì¼ìƒì  í™”ì œë‚˜ ì‚¬íšŒ ë¬¸í™”ì  í™”ì œì˜ ê¸€+ë‹¤ì–‘í•œ ì„¤ëª… ë°©ë²•ì„ í™œìš©í•˜ì—¬ ì£¼ì œë¥¼ ì œì‹œí•œ ê¸€+ì£¼ì¥ì´ ëª…ì‹œì ì´ê³  ë‹¤ì–‘í•œ ì´ìœ ì™€ ê·¼ê±°ê°€ ì œì‹œëœ ê¸€+ìƒê°ì´ë‚˜ ê°ì •ì´ í•¨ì¶•ì ìœ¼ë¡œ ì œì‹œëœ ê¸€"
        }
      ],
      process: [
        {
          g12: "â€˜ê¸€ì, ë‹¨ì–´ ì½ê¸°â€™+ë¬¸ì¥, ì§§ì€ ê¸€ ì†Œë¦¬ ë‚´ì–´ ì½ê¸°+ì•Œë§ê²Œ ë„ì–´ ì½ê¸°",
          g34: "ìœ ì°½í•˜ê²Œ ì½ê¸°",
          g56: ""
        },
        {
          g12: "ê¸€ì˜ ì¤‘ì‹¬ ë‚´ìš© í™•ì¸í•˜ê¸°, ì¸ë¬¼ì˜ ë§ˆìŒì´ë‚˜ ìƒê° ì§ì‘í•˜ê¸°",
          g34: "ì¤‘ì‹¬ ìƒê° íŒŒì•…í•˜ê¸°+ë‚´ìš© ìš”ì•½í•˜ê¸°+ë‹¨ì–´ì˜ ì˜ë¯¸ë‚˜ ë‚´ìš© ì˜ˆì¸¡í•˜ê¸°",
          g56: "ê¸€ì˜ êµ¬ì¡°ë¥¼ íŒŒì•…í•˜ê¸°+ê¸€ì˜ ì£¼ì¥ì´ë‚˜ ì£¼ì œ íŒŒì•…í•˜ê¸°+ê¸€ì˜ êµ¬ì¡° ê³ ë ¤í•˜ë©° ë‚´ìš© ìš”ì•½í•˜ê¸°+ìƒëµëœ ë‚´ìš©ê³¼ í•¨ì¶•ëœ ì˜ë¯¸ ì¶”ë¡ í•˜ê¸°"
        },
        {
          g12: "ì¸ë¬¼ê³¼ ìì‹ ì˜ ë§ˆìŒì´ë‚˜ ìƒê° ë¹„êµí•˜ê¸°",
          g34: "ì‚¬ì‹¤ê³¼ ì˜ê²¬ êµ¬ë³„í•˜ê¸°+ê¸€ì´ë‚˜ ìë£Œì˜ ì¶œì²˜ ì‹ ë¢°ì„± í‰ê°€í•˜ê¸°+í•„ìì™€ ìì‹ ì˜ ì˜ê²¬ ë¹„êµí•˜ê¸°",
          g56: "ê¸€ì´ë‚˜ ìë£Œì˜ ë‚´ìš©ê³¼ í‘œí˜„ í‰ê°€í•˜ê¸°+ë‹¤ì–‘í•œ ê¸€ì´ë‚˜ ìë£Œ ì½ê¸°ë¥¼ í†µí•´ ë¬¸ì œ í•´ê²°í•˜ê¸°"
        },
        {
          g12: "",
          g34: "ì½ê¸° ê³¼ì •ê³¼ ì „ëµì— ëŒ€í•´ ì ê²€ ì¡°ì •í•˜ê¸°",
          g56: "ì½ê¸° ê³¼ì •ê³¼ ì „ëµì— ëŒ€í•´ ì ê²€ ì¡°ì •í•˜ê¸°"
        }
      ],
      value: { g12: "ì½ê¸°ì— ëŒ€í•œ í¥ë¯¸", g34: "ì½ê¸° íš¨ëŠ¥ê°", g56: "ê¸ì •ì  ì½ê¸° ë™ê¸°+ì½ê¸°ì— ì ê·¹ì  ì°¸ì—¬" }
    },

    // (3) ì“°ê¸°
    {
      knowledge: [
        { g12: "", g34: "ìƒí™© ë§¥ë½", g56: "ìƒí™© ë§¥ë½+ì‚¬íšŒ ë¬¸í™”ì  ë§¥ë½" },
        {
          g12: "ì£¼ë³€ ì†Œì¬ì— ëŒ€í•´ ì†Œê°œí•˜ëŠ” ê¸€+ê²ªì€ ì¼ì„ í‘œí˜„í•˜ëŠ” ê¸€",
          g34: "ì ˆì°¨ì™€ ê²°ê³¼ë¥¼ ë³´ê³ í•˜ëŠ” ê¸€+ì´ìœ ë¥¼ ë“¤ì–´ ì˜ê²¬ì„ ì œì‹œí•˜ëŠ” ê¸€+ë…ìì—ê²Œ ë§ˆìŒì„ ì „í•˜ëŠ” ê¸€",
          g56: "ëŒ€ìƒì˜ íŠ¹ì„±ì´ ë‚˜íƒ€ë‚˜ê²Œ ì„¤ëª…í•˜ëŠ” ê¸€+ì ì ˆí•œ ê·¼ê±°ë¥¼ ë“¤ì–´ ì£¼ì¥í•˜ëŠ” ê¸€+ì²´í—˜ì— ëŒ€í•œ ê°ìƒì„ ë‚˜íƒ€ë‚´ëŠ” ê¸€"
        }
      ],
      process: [
        { g12: "ê¸€ì ì“°ê¸°+ë‹¨ì–´ ì“°ê¸°+ë¬¸ì¥ ì“°ê¸°", g34: "ë¬¸ë‹¨ ì“°ê¸°", g56: "" },
        { g12: "", g34: "ëª©ì +ì£¼ì œ ê³ ë ¤í•˜ê¸°", g56: "ë…ì+ë§¤ì²´ ê³ ë ¤í•˜ê¸°" },
        { g12: "ì¼ìƒì„ ì†Œì¬ë¡œ ë‚´ìš© ìƒì„±í•˜ê¸°", g34: "ëª©ì , ì£¼ì œì— ë”°ë¼ ë‚´ìš© ìƒì„±í•˜ê¸°", g56: "ë…ì+ë§¤ì²´ë¥¼ ê³ ë ¤í•˜ì—¬ ë‚´ìš© ìƒì„±í•˜ê¸°" },
        { g12: "", g34: "ì ˆì°¨ì™€ ê²°ê³¼ì— ë”°ë¼ ë‚´ìš© ì¡°ì§í•˜ê¸°", g56: "í†µì¼ì„±ì„ ê³ ë ¤í•˜ì—¬ ë‚´ìš© ì¡°ì§í•˜ê¸°" },
        { g12: "ììœ ë¡­ê²Œ í‘œí˜„í•˜ê¸°", g34: "ì •í™•í•˜ê²Œ í‘œí˜„í•˜ê¸°", g56: "ë…ìë¥¼ ê³ ë ¤í•˜ì—¬ í‘œí˜„í•˜ê¸°" },
        { g12: "", g34: "ë¬¸ì¥, ë¬¸ë‹¨ ìˆ˜ì¤€ì—ì„œ ê³ ì³ì“°ê¸°", g56: "ê¸€ ìˆ˜ì¤€ì—ì„œ ê³ ì³ì“°ê¸°" },
        { g12: "ì“´ ê¸€ì„ í•¨ê»˜ ì½ê³  ë°˜ì‘í•˜ê¸°", g34: "ì“´ ê¸€ì„ í•¨ê»˜ ì½ê³  ë°˜ì‘í•˜ê¸°", g56: "ì“´ ê¸€ì„ í•¨ê»˜ ì½ê³  ë°˜ì‘í•˜ê¸°" },
        { g12: "", g34: "ì“°ê¸° ê³¼ì •ê³¼ ì „ëµì— ëŒ€í•´ ì ê²€ ì¡°ì •í•˜ê¸°", g56: "ì“°ê¸° ê³¼ì •ê³¼ ì „ëµì— ëŒ€í•´ ì ê²€ ì¡°ì •í•˜ê¸°" }
      ],
      value: { g12: "ì“°ê¸°ì— ëŒ€í•œ í¥ë¯¸", g34: "ì“°ê¸° íš¨ëŠ¥ê°", g56: "ì“°ê¸°ì— ì ê·¹ì  ì°¸ì—¬+ì“°ê¸° ìœ¤ë¦¬ ì¤€ìˆ˜" }
    },

    // (4) ë¬¸ë²•
    {
      knowledge: [
        { g12: "", g34: "ì˜ì‚¬ì†Œí†µê³¼ ê´€ê³„ í˜•ì„± ìˆ˜ë‹¨ìœ¼ë¡œì„œì˜ ì–¸ì–´+ì°¸ì—¬ì ê°„ ê´€ê³„ ë° ì¥ë©´ì— ë”°ë¥¸ ì–¸ì–´", g56: "ìŒì„± ì–¸ì–´ ë° ë¬¸ì ì–¸ì–´ì˜ íŠ¹ì„±ê³¼ ë§¤ì²´+ì§€ì—­ì— ë”°ë¥¸ ì–¸ì–´ì™€ í‘œì¤€ì–´" },
        { g12: "ê¸€ì ë‹¨ì–´ ë¬¸ì¥", g34: "ë‹¨ì–´ì˜ ì˜ë¯¸ì™€ ë‹¨ì–´ ê°„ì˜ ì˜ë¯¸ ê´€ê³„+ë‹¨ì–´ì˜ ë¶„ë¥˜+ë¬¸ì¥ì˜ ê¸°ë³¸ êµ¬ì¡°+ê¸€ê³¼ ë‹´í™”ì˜ ë†’ì„ í‘œí˜„ê³¼ ì§€ì‹œ ì ‘ì† í‘œí˜„", g56: "ì–´íœ˜ ì²´ê³„ì™€ ê³ ìœ ì–´+ê´€ìš© í‘œí˜„+ë¬¸ì¥ ì„±ë¶„ê³¼ í˜¸ì‘+ê¸€ê³¼ ë‹´í™”ì˜ ì‹œê°„ í‘œí˜„" },
        { g12: "í•œê¸€ ìëª¨ì˜ ì´ë¦„ê³¼ ì†Œë¦¬+ë‹¨ì–´ì˜ ë°œìŒê³¼ í‘œê¸°+ë¬¸ì¥ê³¼ ë¬¸ì¥ ë¶€í˜¸", g34: "ë‹¨ì–´ì˜ ì •í™•í•œ ë°œìŒê³¼ í‘œê¸°", g56: "ë‹¨ì–´ì™€ ë¬¸ì¥ì˜ ì •í™•í•œ í‘œê¸°ì™€ ì‚¬ìš©" }
      ],
      process: [
        { g12: "ì–¸ì–´ ë‹¨ìœ„ ê´€ì°°í•˜ê¸°", g34: "ì–¸ì–´ ë‹¨ìœ„ ê´€ì°°í•˜ê³  ë¶„ì„í•˜ê¸°+êµ­ì–´ì‚¬ì „ í™œìš©í•˜ì—¬ ë¬¸ì œ í•´ê²°í•˜ê¸°+ê¸€ê³¼ ë‹´í™”ì— ì ì ˆí•œ í‘œí˜„ ì‚¬ìš©í•˜ê¸°", g56: "ì–¸ì–´ í‘œí˜„ì˜ íŠ¹ì§• ë¶„ì„í•˜ê¸°+ê¸€ê³¼ ë‹´í™”ì— ì ì ˆí•œ í‘œí˜„ ì‚¬ìš©í•˜ê¸°" },
        { g12: "ì†Œë¦¬ì™€ í‘œê¸°ì˜ ì°¨ì´ ì¸ì‹í•˜ê¸°", g34: "êµ­ì–´ ê·œë²” ì¸ì§€í•˜ê³  ìˆ˜ìš©í•˜ê¸°", g56: "êµ­ì–´ìƒí™œ ì ê²€í•˜ê³  ì‹¤ì²œí•˜ê¸°+ì–¸ì–´ í‘œí˜„ì˜ íš¨ê³¼ í‰ê°€í•˜ê¸°" }
      ],
      value: { g12: "í•œê¸€ì— ëŒ€í•œ í˜¸ê¸°ì‹¬", g34: "êµ­ì–´ì˜ ì†Œì¤‘í•¨ ì¸ì‹", g56: "êµ­ì–´ìƒí™œì— ëŒ€í•œ ë¯¼ê°ì„±+ì§‘ë‹¨ ì‚¬íšŒì˜ ì–¸ì–´ì™€ ë‚˜ì˜ ì–¸ì–´ì˜ ê´€ê³„ ì¸ì‹" }
    },

    // (5) ë¬¸í•™
    {
      knowledge: [
        { g12: "â€˜ì‹œ, ë…¸ë˜â€™+â€˜ì´ì•¼ê¸°, ê·¸ë¦¼ì±…â€™", g34: "ì‹œ+ì´ì•¼ê¸°+ê·¹", g56: "ì‹œ+ì†Œì„¤+ê·¹+ìˆ˜í•„" },
        { g12: "", g34: "ë…ìë§¥ë½", g56: "ì‘ê°€ë§¥ë½+ë…ìë§¥ë½" }
      ],
      process: [
        { g12: "â€˜ë‚­ì†¡í•˜ê¸°, ë§ë†€ì´í•˜ê¸°â€™+ë§ì˜ ì¬ë¯¸ ëŠë¼ê¸°", g34: "ìì‹ ì˜ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ì½ê¸°+ì‚¬ì‹¤ê³¼ í—ˆêµ¬ì˜ ì°¨ì´ ì´í•´í•˜ê¸°", g56: "ì‘ê°€ì˜ ì˜ë„ë¥¼ ìƒê°í•˜ë©° ì½ê¸°+ê°ˆë˜ì˜ ê¸°ë³¸ íŠ¹ì„± ì´í•´í•˜ê¸°" },
        { g12: "ì‘í’ˆ ì† ì¸ë¬¼ ìƒìƒí•˜ê¸°+ì‘í’ˆ ì½ê³  ëŠë‚€ ì  ë§í•˜ê¸°", g34: "ì¸ë¬¼ì˜ ì„±ê²©ê³¼ ì—­í•  íŒŒì•…í•˜ê¸°+ì´ì•¼ê¸°ì˜ íë¦„ ìƒê°í•˜ë©° ê°ìƒí•˜ê¸°", g56: "ì¸ë¬¼, ì‚¬ê±´, ë°°ê²½ íŒŒì•…í•˜ê¸°+ë¹„ìœ ì  í‘œí˜„ì— ìœ ì˜í•˜ì—¬ ê°ìƒí•˜ê¸°" },
        { g12: "", g34: "ë§ˆìŒì— ë“œëŠ” ì‘í’ˆ ì†Œê°œí•˜ê¸°", g56: "ì¸ìƒì ì¸ ë¶€ë¶„ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì‘í’ˆì— ëŒ€í•´ ì˜ê²¬ ë‚˜ëˆ„ê¸°" },
        { g12: "ì‹œ, ë…¸ë˜, ì´ì•¼ê¸°, ê·¸ë¦¼ ë“± ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ í‘œí˜„í•˜ê¸°", g34: "ê°ê°ì  í‘œí˜„ í™œìš©í•˜ì—¬ í‘œí˜„í•˜ê¸°", g56: "ê°ˆë˜ íŠ¹ì„±ì— ë”°ë¼ í‘œí˜„í•˜ê¸°" }
      ],
      value: { g12: "ë¬¸í•™ì— ëŒ€í•œ í¥ë¯¸", g34: "ì‘í’ˆ ê°ìƒì˜ ì¦ê±°ì›€", g56: "ë¬¸í•™ì„ í†µí•œ ìì•„ì„±ì°°+ë¬¸í•™ ì†Œí†µì˜ ì¦ê±°ì›€" }
    },

    // (6) ë§¤ì²´
    {
      knowledge: [
        { g12: "", g34: "ìƒí™© ë§¥ë½", g56: "ìƒí™© ë§¥ë½+ì‚¬íšŒ ë¬¸í™”ì  ë§¥ë½" },
        { g12: "ì¼ìƒì˜ ë§¤ì²´ ìë£Œ", g34: "ì¸í„°ë„·ì˜ í•™ìŠµ ìë£Œ", g56: "ë‰´ìŠ¤ ë° ê°ì¢… ì •ë³´ ë§¤ì²´ ìë£Œ" }
      ],
      process: [
        { g12: "ë§¤ì²´ ìë£Œ ì ‘ê·¼í•˜ê¸°", g34: "ì¸í„°ë„· ìë£Œ íƒìƒ‰ ì„ íƒí•˜ê¸°", g56: "ëª©ì ì— ë§ëŠ” ì •ë³´ ê²€ìƒ‰í•˜ê¸°" },
        { g12: "", g34: "ë§¤ì²´ ìë£Œ ì˜ë¯¸ íŒŒì•…í•˜ê¸°", g56: "ë§¤ì²´ ìë£Œì˜ ì‹ ë¢°ì„± í‰ê°€í•˜ê¸°" },
        { g12: "ê¸€ê³¼ ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ê¸°", g34: "ë°œí‘œ ìë£Œ ë§Œë“¤ê¸°+ë§¤ì²´ ìë£Œ í™œìš© ê³µìœ í•˜ê¸°", g56: "ë³µí•©ì–‘ì‹ ë§¤ì²´ ìë£Œ ì œì‘ ê³µìœ í•˜ê¸°" },
        { g12: "", g34: "ë§¤ì²´ ì†Œí†µì˜ ëª©ì  ì ê²€í•˜ê¸°", g56: "ë§¤ì²´ ì´ìš© ì–‘ìƒ ì ê²€í•˜ê¸°" }
      ],
      value: { g12: "ë§¤ì²´ ì†Œí†µì— ëŒ€í•œ í¥ë¯¸ì™€ ê´€ì‹¬", g34: "ë§¤ì²´ ì†Œí†µ ìœ¤ë¦¬", g56: "ë§¤ì²´ ì†Œí†µì— ëŒ€í•œ ì„±ì°°" }
    }
  ];

  // âœ… table ì•ˆì—ì„œ input:true(ë²”ì£¼ ë¹ˆì¹¸) textareaë“¤ì„ "ë“±ì¥ ìˆœì„œëŒ€ë¡œ" ëª¨ìœ¼ê¸°
  function getCategoryInputsInTable(table){
    const rows = Array.from(table.querySelectorAll("tr")).slice(3); // í—¤ë” 3ì¤„ ì œì™¸
    const midRows = rows.slice(0, -1); // ë§ˆì§€ë§‰ ê°€ì¹˜Â·íƒœë„ ì œì™¸
    const inputs = [];

    midRows.forEach(r=>{
      const tds = r.querySelectorAll("td");
      if(!tds.length) return;

      // ë¼ë²¨ì¹¸(td[0])ì— textareaê°€ ìˆìœ¼ë©´ = input:true ë²”ì£¼ì¹¸
      const ta = tds[0].querySelector("textarea");
      if(ta) inputs.push(ta);
    });

    return inputs;
  }

  document.addEventListener("DOMContentLoaded", () => {
    const wrap = document.getElementById("koreanTables");
    if (!wrap) return;

    const tables = Array.from(wrap.querySelectorAll("table.subject-table"));
    if (!tables.length) return;

    tables.forEach((table, idx) => {
      const data = KOR_ANS[idx];
      if (!data) return;

      // actions-barëŠ” table ë°”ë¡œ ë‹¤ìŒì— ìˆìŒ(ë„ˆê°€ ë§Œë“  êµ¬ì¡°)
      const bar = table.nextElementSibling?.classList.contains("actions-bar")
        ? table.nextElementSibling
        : null;
      if (!bar) return;

      const buttons = Array.from(bar.querySelectorAll("button"));
      const btnGrade = buttons.find(b => b.textContent.trim() === "ì±„ì ");
      const btnAnswer = buttons.find(b => b.textContent.trim() === "ì •ë‹µ");
      const btnClear = buttons.find(b => b.textContent.trim() === "ì§€ìš°ê¸°");

      const rows = Array.from(table.querySelectorAll("tr")).slice(3);
      const valueRow = rows[rows.length - 1];
      const midRows = rows.slice(0, -1);

      const kRows = midRows.slice(0, data.knowledge.length);
      const pRows = midRows.slice(data.knowledge.length, data.knowledge.length + data.process.length);

      function gradeCellsFromRow(row, ansObj, mode) {
        const tds = Array.from(row.querySelectorAll("td"));
        if (tds.length < 3) return { correct: 0, total: 0 };

        const g12Cell = tds[tds.length - 3];
        const g34Cell = tds[tds.length - 2];
        const g56Cell = tds[tds.length - 1];

        const g12 = Array.from(g12Cell.querySelectorAll("textarea"));
        const g34 = Array.from(g34Cell.querySelectorAll("textarea"));
        const g56 = Array.from(g56Cell.querySelectorAll("textarea"));

        const a12 = splitToCount(ansObj.g12 || "", g12.length);
        const a34 = splitToCount(ansObj.g34 || "", g34.length);
        const a56 = splitToCount(ansObj.g56 || "", g56.length);

        let correct = 0, total = 0;

        function apply(list, answers) {
          list.forEach((ta, i) => {
            const ans = answers[i] || "";
            if (mode === "answer") {
              ta.value = ans;
              clearMark(ta);
              if (ans) ta.classList.add("correct");
              return;
            }
            if (!ans) return; // ì •ë‹µ ì—†ëŠ” ì¹¸ì€ ì±„ì  ì œì™¸
            total++;
            clearMark(ta);
            if (norm(ta.value) === norm(ans)) { ta.classList.add("correct"); correct++; }
            else ta.classList.add("wrong");
          });
        }

        apply(g12, a12);
        apply(g34, a34);
        apply(g56, a56);

        return { correct, total };
      }

      function fillValueRow(mode) {
        const tds = valueRow.querySelectorAll("td");
        // [ë¼ë²¨] [1~2] [3~4] [5~6]
        const g12 = Array.from(tds[1]?.querySelectorAll("textarea") || []);
        const g34 = Array.from(tds[2]?.querySelectorAll("textarea") || []);
        const g56 = Array.from(tds[3]?.querySelectorAll("textarea") || []);

        const a12 = splitToCount(data.value.g12 || "", g12.length);
        const a34 = splitToCount(data.value.g34 || "", g34.length);
        const a56 = splitToCount(data.value.g56 || "", g56.length);

        let correct = 0, total = 0;

        function apply(list, answers) {
          list.forEach((ta, i) => {
            const ans = answers[i] || "";
            if (mode === "answer") {
              ta.value = ans;
              clearMark(ta);
              if (ans) ta.classList.add("correct");
              return;
            }
            if (!ans) return;
            total++;
            clearMark(ta);
            if (norm(ta.value) === norm(ans)) { ta.classList.add("correct"); correct++; }
            else ta.classList.add("wrong");
          });
        }

        apply(g12, a12);
        apply(g34, a34);
        apply(g56, a56);

        return { correct, total };
      }

      // âœ… ë²”ì£¼(input:true) ì²˜ë¦¬
      function applyCategoryInputs(mode, scoreAcc){
        const inputs = getCategoryInputsInTable(table);
        const answers = CATEGORY_INPUT_ANS[idx] || [];

        inputs.forEach((ta,i)=>{
          const ans = answers[i] || "";

          if(mode === "answer"){
            ta.value = ans;
            clearMark(ta);
            if(ans) ta.classList.add("correct");
            return;
          }

          // grade
          if(!ans) return;
          scoreAcc.total++;
          clearMark(ta);
          if(norm(ta.value) === norm(ans)){
            ta.classList.add("correct");
            scoreAcc.correct++;
          }else{
            ta.classList.add("wrong");
          }
        });
      }

      // âœ… ì •ë‹µ
      btnAnswer?.addEventListener("click", () => {
        table.querySelectorAll("textarea").forEach(clearMark);

        kRows.forEach((row, i) => gradeCellsFromRow(row, data.knowledge[i], "answer"));
        pRows.forEach((row, i) => gradeCellsFromRow(row, data.process[i], "answer"));
        fillValueRow("answer");

        applyCategoryInputs("answer");

        const total = table.querySelectorAll("textarea").length; // ë²”ì£¼ì¹¸ë„ í¬í•¨ë¨
        setScore(bar, total, total);
      });

      // âœ… ì±„ì 
      btnGrade?.addEventListener("click", () => {
        table.querySelectorAll("textarea").forEach(clearMark);

        let acc = { correct: 0, total: 0 };

        kRows.forEach((row, i) => {
          const r = gradeCellsFromRow(row, data.knowledge[i], "grade");
          acc.correct += r.correct; acc.total += r.total;
        });

        pRows.forEach((row, i) => {
          const r = gradeCellsFromRow(row, data.process[i], "grade");
          acc.correct += r.correct; acc.total += r.total;
        });

        const v = fillValueRow("grade");
        acc.correct += v.correct; acc.total += v.total;

        applyCategoryInputs("grade", acc);

        setScore(bar, acc.correct, acc.total);
      });

      // âœ… ì§€ìš°ê¸°
      btnClear?.addEventListener("click", () => {
        table.querySelectorAll("textarea").forEach(t => {
          t.value = "";
          clearMark(t);
        });
        setScore(bar, 0, 0);
      });
    });
  });
})();
/* ===============================
   (1)ë²ˆ í‘œ ì •ë‹µ ë°ì´í„°
=============================== */
const answers1 = {
  k: [
    'ì•„ë™ê¸°ë°œë‹¬ê³¼ìê¸°ì´í•´',
    'ìë¦½ì ì¼ìƒìƒí™œ',
    'ê· í˜•ì¡íŒì‹ì‚¬',
    'ì˜·ì˜ê¸°ëŠ¥ê³¼ì˜·ì°¨ë¦¼',
    'ê°€ì •ìƒí™œê³¼ê°€ì •ì¼',
    'ì§„ë¡œë°œë‹¬ê³¼ì§ì—…'
  ],
  p: [
    'ê±´ê°•í•œë°œë‹¬ì„ìœ„í•œìê¸°ê´€ë¦¬ë°©ë²•íƒìƒ‰í•˜ê¸°',
    'ìë¦½ì ì¼ìƒìƒí™œì—í•„ìš”í•œì¡°ê±´ì‚´í´ë³´ê¸°',
    'ê°€ì¡±ì›ì˜ë‹¤ì–‘í•œìš”êµ¬íŒŒì•…í•˜ê¸°',
    'ë°”ëŒì§í•œì‹ìŠµê´€í˜•ì„±í•˜ê¸°',
    'ê±´ê°•í•˜ê³ ì ì ˆí•œì˜·ì°¨ë¦¼íŒŒì•…í•˜ê¸°',
    'ê°€ì •ìƒí™œì„ìœ ì§€í•˜ëŠ”ê°€ì •ì¼ì˜ì¢…ë¥˜ì‚´í´ë³´ê¸°',
    'ê°€ì •ì¼ìˆ˜í–‰ì—ì°¸ì—¬í•˜ê¸°'
  ],
  v: [
    'ì•„ë™ê¸°ë°œë‹¬ì—ëŒ€í•œê¸ì •ì ì¸ìˆ˜ìš©',
    'ì¼ìƒìƒí™œì†ì˜¬ë°”ë¥¸ìƒí™œìŠµê´€ê³¼ì˜ˆì ˆì„ì‹¤ì²œí•˜ëŠ”íƒœë„',
    'ê°€ì¡±ê°„ë°°ë ¤ì™€ëŒë´„ì˜ê°€ì¹˜',
    'í˜‘ë ¥ì ì†Œí†µì—ê¸°ë°˜í•œì—­í• ë¶„ë‹´ì˜ê°€ì¹˜ìˆ˜ìš©',
    'ì¼ê³¼ë…¸ë™ì˜ê°€ì¹˜',
    'ì§„ë¡œë¥¼ì£¼ë„ì ìœ¼ë¡œíƒìƒ‰í•˜ëŠ”íƒœë„'
  ]
};

const answers2 = {
  k: [
    'ìƒí™œìì›ì˜íŠ¹ì§•',
    'ìƒí™œìì›ì˜ë³´ê´€ê³¼í™œìš©',
    'ì‹ì¬ë£Œì˜ìƒì‚°ê³¼ì„ íƒ',
    'ìŒì‹ì˜ë§ˆë ¨ê³¼ì„­ì·¨',
    'ì˜·ì´ë‚˜ìƒí™œìš©í’ˆì˜êµ¬ì„±',
    'ìƒí™œê³µê°„ê³¼ì •ë¦¬ì •ëˆ',
    'ì§€ì†ê°€ëŠ¥í•œì˜ì‹ì£¼ìƒí™œ'
  ],
  p: [
    'ìƒí™œìì›ì˜ì‚¬ìš©ê°€ì¹˜ë¥¼ë†’ì´ëŠ”ë°©ë²•íƒìƒ‰í•˜ê¸°',
    'í•©ë¦¬ì ì¸ê´€ë¦¬ë°©ë²•ì‹¤ì²œí•˜ê¸°',
    'ìì‹ ì˜ì„ íƒì´ê³µë™ì²´ì˜ì‚¶ê³¼í™˜ê²½ì—ë¯¸ì¹˜ëŠ”ì˜í–¥ì„¤ëª…í•˜ê¸°',
    'ìŒì‹ì„ë§ˆë ¨í•˜ëŠ”ê³¼ì •ì²´í—˜í•˜ê¸°',
    'ìƒí™œìš©í’ˆì„ë§Œë“œëŠ”ê³¼ì •ê²½í—˜í•˜ê¸°',
    'ìƒí™œì†ì˜ìƒí™œë¬¸ì œí•´ê²°í•˜ê¸°',
    'ìƒí™œê³µê°„ì„ì²­ê²°í•˜ê²Œí•˜ëŠ”ê³¼ì •ê²½í—˜í•˜ê¸°',
    'ì¼ìƒìƒí™œì—ì„œì˜ì§€ì†ê°€ëŠ¥í•œí–‰ë™ì„ê³„íší•˜ì—¬ì‹¤ì²œí•˜ê¸°'
  ],
  v: [
    'ìƒí™œìì›ì„ì†Œì¤‘í•˜ê²Œì—¬ê¸°ëŠ”íƒœë„',
    'í•¨ê»˜í•˜ëŠ”ì‹ì‚¬ì˜ì¦ê±°ì›€',
    'ì‹ì‚¬ì˜ˆì ˆì„ì‹¤ì²œí•˜ëŠ”íƒœë„',
    'ì§ì ‘ë§Œë“¤ì–´ì“°ê¸°ì˜ê°€ì¹˜ì™€ì°½ì˜ì íƒœë„',
    'ì œì‘ê³¼ì •ì—ì„œì ˆì°¨ì ì‚¬ê³ ë¥¼ì¤‘ì‹œí•˜ëŠ”íƒœë„',
    'ì•ˆì „í•œìƒí™œì„ì‹¤ì²œí•˜ëŠ”íƒœë„',
    'ì¾Œì í•œìƒí™œê³µê°„ìœ ì§€ë¥¼ìœ„í•œë…¸ë ¥',
    'ë‚˜ëˆ”ì˜ë´‰ì‚¬í™œë™ê³¼ê¸°ë¶€ë¬¸í™”ì˜ì¡´ì¤‘'
  ]
};

const answers3 = {
  k: [
    'ë°œëª…ì˜ì˜ë¯¸ì™€ë°œëª…í’ˆ',
    'ê¸°ìˆ ì ë¬¸ì œí•´ê²°ê³¼ë°œëª…ì‚¬ê³ ê¸°ë²•',
    'ë°œëª…ê³¼íŠ¹í—ˆì˜ê°œë…',
    'ì§€ì‹ì¬ì‚°ê¶Œì˜ì¤‘ìš”ì„±',
    'ìˆ˜ì†¡ì˜ì˜ë¯¸ì™€ìˆ˜ì†¡ìˆ˜ë‹¨ì˜ë°œë‹¬',
    'ìˆ˜ì†¡ìˆ˜ë‹¨ì˜êµ¬ì„±ìš”ì†Œ'
  ],
  p: [
    'ìƒí™œì†ê¸°ìˆ ì ë¬¸ì œí™•ì¸í•˜ê¸°',
    'ì°½ì˜ì ì¸ì œí’ˆêµ¬ìƒí•˜ê¸°',
    'ë°œëª…ì œí’ˆì˜ì„¤ê³„ì™€ì œì‘í•˜ê¸°',
    'ë°œëª…í’ˆì˜íŠ¹í—ˆì •ë³´ê²€ìƒ‰í•˜ê¸°',
    'ë‹¤ì–‘í•œìˆ˜ì†¡ìˆ˜ë‹¨íƒìƒ‰í•˜ê¸°',
    'ì¹œí™˜ê²½ìˆ˜ì†¡ìˆ˜ë‹¨ì˜ì„¤ê³„ì™€ì œì‘í•˜ê¸°'
  ],
  v: [
    'ë°œëª…ê³¼ê¸°ìˆ ì—ëŒ€í•œê´€ì‹¬ê³¼í¥ë¯¸',
    'ê¸°ìˆ ì—ëŒ€í•œê°€ì¹˜ì¸ì‹',
    'ë°œëª…ì•„ì´ë””ì–´ë°œìƒì˜ì‹¤ì²œì íƒœë„',
    'ì§€ì‹ì¬ì‚°ë³´í˜¸ì—ëŒ€í•œì¸ì‹',
    'ë¯¸ë˜ìˆ˜ì†¡ìˆ˜ë‹¨ì—ëŒ€í•œê´€ì‹¬'
  ]
};

const answers4 = {
  k: [
    'ê±´ì„¤ê¸°ìˆ ì˜ê°œë…ê³¼ì¹œí™˜ê²½êµ¬ì¡°ë¬¼',
    'ë””ì§€í„¸ê¸°ìˆ ì˜íŠ¹ì§•ê³¼ë””ì§€í„¸ì½˜í…ì¸ ì˜ì¢…ë¥˜',
    'ë¡œë´‡ì˜ê°œë…ê³¼ì‘ë™ì›ë¦¬',
    'ë¡œë´‡ìœµí•©ê¸°ìˆ ì˜ì´í•´',
    'ìƒí™œì†ë™ì‹ë¬¼ì˜ì´í•´',
    'ë™ì‹ë¬¼ìì›ì˜ë¶„ë¥˜',
    'ë™ì‹ë¬¼ìì›ì˜ì¹œí™˜ê²½ë†ì—…',
    'ë¯¸ë˜ìƒí™œê³¼ì—°ê´€ëœë†ì—…í™œë™',
    'ë†ì—…ê³¼ë†ì´Œì˜ë‹¤ì›ì ì¸ì—­í• '
  ],
  p: [
    'ìƒí™œì†ê±´ì„¤êµ¬ì¡°ë¬¼íƒìƒ‰ê³¼ì²´í—˜í•˜ê¸°',
    'ë””ì§€í„¸ì½˜í…ì¸ ì˜ì œì‘ê³¼ê³µìœ í•˜ê¸°',
    'ê°„ë‹¨í•œë¡œë´‡ì˜ì¡°ë¦½ê³¼ì‘ë™ì‹œí‚¤ê¸°',
    'ë¡œë´‡ì˜ë™ì‘ì—ì½”ë”©í”„ë¡œê·¸ë¨ì ìš©í•˜ê¸°',
    'ìœµí•©ì ì‚¬ê³ í•˜ê¸°',
    'ë™ì‹ë¬¼ê³¼ê´€ë ¨ëœìƒëª…ê¸°ìˆ íƒìƒ‰í•˜ê¸°',
    'ë™ì‹ë¬¼ì„ê¸°ë¥´ê³ ê°€ê¾¸ê¸°',
    'ìƒí™œì†ë†ì—…í™œë™ì²´í—˜í•˜ê¸°'
  ],
  v: [
    'ê±´ì„¤ê¸°ìˆ ì—ëŒ€í•œê°€ì¹˜ì¸ì‹',
    'ë¡œë´‡ì—ëŒ€í•œê´€ì‹¬ê³¼í¥ë¯¸',
    'ê±´ì „í•œì‚¬ì´ë²„ê³µê°„ì˜í™œìš©íƒœë„',
    'ë™ì‹ë¬¼ì—ëŒ€í•œìƒíƒœì¡´ì¤‘ê°ì„ê°–ëŠ”íƒœë„',
    'ì§€ì†ê°€ëŠ¥í•œë†ì—…ì˜ìˆœí™˜ì„±ê³¼ì¤‘ìš”ì„±ì¸ì‹',
    'ë†ì—…ì—ëŒ€í•œê´€ì‹¬ê³¼í¥ë¯¸',
    'ë†ì‚°ì—…ì—ëŒ€í•œì˜¬ë°”ë¥¸ì§„ë¡œê´€ì„ê°–ëŠ”íƒœë„'
  ]
};

const answers5 = {
  k: [
    'ì»´í“¨í„°ì˜ê°œë…',
    'ë¬¸ì œì°¾ê¸°ì™€ë¬¸ì œí•´ê²°ì ˆì°¨',
    'ì»´í“¨í„°ì—ê²Œëª…ë ¹í•˜ëŠ”ë°©ë²•',
    'ë°ì´í„°ì˜ì¢…ë¥˜ì™€í‘œí˜„',
    'ìƒí™œì†ì¸ê³µì§€ëŠ¥'
  ],
  p: [
    'ìƒí™œì†ì—ì„œí™œìš©ë˜ëŠ”ì»´í“¨í„°ì˜ì‚¬ë¡€íƒìƒ‰í•˜ê¸°',
    'ì¼ìƒìƒí™œì˜ë¬¸ì œë¥¼í•´ê²°í•˜ê¸°ìœ„í•œì•Œê³ ë¦¬ì¦˜êµ¬ìƒí•˜ê¸°',
    'ë¬¸ì œë¥¼í•´ê²°í•˜ëŠ”ê¸°ì´ˆì ì¸í”„ë¡œê·¸ë˜ë°í•˜ê¸°',
    'ë°ì´í„°ê°„ì—ê³µí†µë˜ëŠ”ìœ í˜•ì´ë‚˜í˜•íƒœíƒìƒ‰í•˜ê¸°',
    'ì¸ê³µì§€ëŠ¥ì´ë§Œë“¤ì–´ì§€ëŠ”ê³¼ì •íƒìƒ‰í•˜ê¸°'
  ],
  v: [
    'ìƒí™œì†ì—ì„œì»´í“¨í„°ë¥¼í™œìš©í•´í•´ê²°ê°€ëŠ¥í•œë¬¸ì œë¥¼íƒìƒ‰í•´ë³´ë ¤ëŠ”ìì„¸',
    'í”„ë¡œê·¸ë˜ë°ì„í†µí•´ë§Œë“ ì‚°ì¶œë¬¼ì„íƒ€ì¸ê³¼ê³µìœ í•˜ê³ í˜‘ë ¥í•˜ë ¤ëŠ”ìì„¸',
    'ìƒí™œì†ì˜ì—¬ëŸ¬ê°€ì§€ë°ì´í„°ê°€ê°–ëŠ”ì˜ë¯¸ë¥¼íŒŒì•…í•˜ëŠ”ìì„¸',
    'ì¸ê³µì§€ëŠ¥ì´ì‚¬íšŒì—ë¯¸ì¹˜ëŠ”ì˜í–¥ì„íŒŒì•…í•˜ëŠ”ìì„¸'
  ]
};

/* ê³µë°± ì œê±° */
function norm(t){
  return t.replace(/\s/g,'');
}

/* ===============================
   (1)ë²ˆ í‘œ ì±„ì 
=============================== */
function grade1(){
  checkRow(0, 'k', answers1.k); // ì§€ì‹Â·ì´í•´
  checkRow(1, 'p', answers1.p); // ê³¼ì •Â·ê¸°ëŠ¥
  checkRow(2, 'v', answers1.v); // ê°€ì¹˜Â·íƒœë„
}

function checkRow(rowIndex,key,answers){
  const table = document.querySelectorAll('#tables table')[0];
  const textareas = table.querySelectorAll('tr')[rowIndex+2].querySelectorAll('textarea');

  textareas.forEach((t,i)=>{
    t.style.color = ''; // ì´ˆê¸°í™”
    if(!answers[i]) return;

    if(norm(t.value) === answers[i]){
      t.style.color = '#0d6efd'; // íŒŒë‘
    }else{
      t.style.color = '#dc3545'; // ë¹¨ê°•
    }
  });
}

/* ===============================
   (1)ë²ˆ í‘œ ì •ë‹µ ë³´ê¸°
=============================== */
function answer1(){
  const table = document.querySelectorAll('#tables table')[0];
  fillRow(table,2,answers1.k);
  fillRow(table,3,answers1.p);
  fillRow(table,4,answers1.v);
}

function fillRow(table,rowIndex,answers){
  const textareas = table.querySelectorAll('tr')[rowIndex].querySelectorAll('textarea');
  textareas.forEach((t,i)=>{
    t.value = answers[i] ? answers[i].replace(/([ê°€-í£])/g,'$1 ') : '';
  });
}

/* ===============================
   (1)ë²ˆ í‘œ ì§€ìš°ê¸°
=============================== */
function clear1(){
  const table = document.querySelectorAll('#tables table')[0];
  table.querySelectorAll('textarea').forEach(t=>{
    t.value='';
    t.classList.remove('correct','wrong');
    t.style.color='';
  });
}
/* ì²´í¬ë°•ìŠ¤ */
const subjects=[
['êµ­ì–´',['í•µì‹¬ì—­ëŸ‰','ëª¨í˜•','ë‚´ì²´í‘œ']],
['ìˆ˜í•™',['í•µì‹¬ì—­ëŸ‰','ëª¨í˜•']],
['ì‚¬íšŒ',['í•µì‹¬ì—­ëŸ‰','ëª¨í˜•','ë‚´ì²´í‘œ']],
['ê³¼í•™',['í•µì‹¬ì—­ëŸ‰','ëª¨í˜•']],
['ì˜ì–´',['í•µì‹¬ì—­ëŸ‰','ëª¨í˜•']],
['ìŒì•…',['í•µì‹¬ì—­ëŸ‰','ê°œì²´í‘œ','ë‚´ì²´í‘œ']],
['ë¯¸ìˆ ',['í•µì‹¬ì—­ëŸ‰','ëª¨í˜•','ë‚´ì²´í‘œ']],
['ì²´ìœ¡',['í•µì‹¬ì—­ëŸ‰','ëª¨í˜•','ë‚´ì²´í‘œ']],
['ë„ë•',['í•µì‹¬ì—­ëŸ‰','ëª¨í˜•','ë‚´ì²´í‘œ']],
['ì‹¤ê³¼',['í•µì‹¬ì—­ëŸ‰','ëª¨í˜•','ë‚´ì²´í‘œ']],
['ë°”ìŠ¬ì¦',['í•µì‹¬ì—­ëŸ‰','ëª¨í˜•','ë‚´ì²´í‘œ']],
['ì´ë¡ &ì°½ì²´',['í•µì‹¬ì—­ëŸ‰','ì´ë¡ ','ì˜ì—­ë³„ í™œë™']]
];

const wrap=document.getElementById('subjects');
subjects.forEach((s,i)=>{
let html=`<div class="subject"><div class="subject-title">${s[0]}</div>`;
s[1].forEach((t,j)=>{
html+=`<label><input type="checkbox" data-k="s${i}_${j}"> ${t}</label>`;
});
html+=`<div class="progress-box"><div class="progress-bar"></div></div>
<div class="percent">0%</div></div>`;
wrap.innerHTML+=html;
});

function updateAll(){
let sum=0;
document.querySelectorAll('.subject').forEach(sub=>{
const boxes=sub.querySelectorAll('input');
const bar=sub.querySelector('.progress-bar');
const p=sub.querySelector('.percent');
const c=[...boxes].filter(b=>b.checked).length;
const percent=Math.round(c/boxes.length*100);
bar.style.width=percent+'%';
p.textContent=percent+'%';
sum+=percent;
});
const total=Math.round(sum/subjects.length);
totalBar.style.width=total+'%';
totalPercent.textContent=total+'%';
}

document.querySelectorAll('input[type=checkbox]').forEach(b=>{
b.checked=localStorage.getItem(b.dataset.k)==='1';
b.onchange=()=>{
localStorage.setItem(b.dataset.k,b.checked?'1':'0');
updateAll();
};
});
updateAll();

/* ì‹¤ê³¼ í‘œ 5ê°œ */
const config=[[6,7,6],[7,8,6],[6,6,5],[9,8,7],[5,5,4]];
const container=document.getElementById('tables');

config.forEach((c,i)=>{
container.innerHTML+=`
<div class="nt-title">
  (${i+1})
  ${i===0 ? `
    ì¸ê°„ <input class="blank" data-key="s1-title-1">
    ê³¼ <input class="blank" data-key="s1-title-2"> ì‚¶
  ` : ``}

  ${i===1 ? `
    <input class="blank" data-key="s2-title-1">
    ê³¼/ì™€ <input class="blank" data-key="s2-title-2">í•œ ì„ íƒ
  ` : ``}

  ${i===2 ? `
    <input class="blank" data-key="s3-title-1">
    ë¬¸ì œí•´ê²°ê³¼ <input class="blank" data-key="s3-title-2">
  ` : ``}
  
  ${i===3 ? `
    <input class="blank" data-key="s4-title-1"> ê¸°ìˆ ê³¼ ìœµí•©
  ` : ``}

  ${i===4 ? `
    ë””ì§€í„¸ ì‚¬íšŒì™€ <input class="blank" data-key="s5-title-1">
  ` : ``}
</div>
<table class="subject-table">
<tr>
  <th class="row-title">í•µì‹¬ ì•„ì´ë””ì–´</th>
  <td class="idea-block">

    ${i===0 ? `
    â‹… ì¸ê°„ <input class="blank" data-key="s1-1">ì— ëŒ€í•œ ì´í•´ëŠ”
    <input class="blank" data-key="s1-2"> ì‚¶ì„ ì´ëŒê³ 
    <input class="blank" data-key="s1-3">ê³¼/ì™€ì˜ ê±´ê°•í•œ ê´€ê³„ë¥¼ í˜•ì„±í•˜ëŠ” ê¸°ì´ˆê°€ ëœë‹¤.<br>

    â‹… ì¼ìƒì—ì„œ ì§ë©´í•˜ëŠ” ë¬¸ì œì— ëŒ€ì²˜í•  ìˆ˜ ìˆëŠ” ì—­ëŸ‰ì€ ê°œì¸ ë° ê°€ì¡±ì˜
    <input class="blank" data-key="s1-4">ê³¼/ì™€ í–‰ë³µí•œ ì¼ìƒì˜ ì‚¶ì„ ì£¼ë„ì ìœ¼ë¡œ ì´ëŒ ìˆ˜ ìˆê²Œ í•œë‹¤.<br>

    â‹… ì¼ìƒì—ì„œ ì§ë©´í•˜ëŠ”
    <input class="blank" data-key="s1-5">ê³¼/ì™€
    <input class="blank" data-key="s1-6">ì— ê¸°ë°˜í•œ ê´€ê³„ë§ºìŒì˜ ê²½í—˜ì€
    ê±´ê°•í•œ <input class="blank" data-key="s1-7">ë¥¼/ì„ í™•ì¥í•˜ëŠ” ë°‘ê±°ë¦„ì´ ëœë‹¤.<br>

    â‹… ê°€ì •ì¼ê³¼ <input class="blank" data-key="s1-8">ëŠ”/ì€ ë³€í™”í•˜ëŠ” ì¼ìƒì—ì„œ
    ê°œì¸ ë° ê°€ì¡±ì˜ ìš”êµ¬ì™€ ë¬¸ì œë¥¼ í•´ê²°í•´ ë‚˜ê°ˆ ìˆ˜ ìˆê²Œ í•˜ë©´ì„œ
    <input class="blank" data-key="s1-9">ê³¼/ì™€
    <input class="blank" data-key="s1-10">ë¥¼/ì„ ìŠ¤ìŠ¤ë¡œ ê°œì²™í•˜ê³  ì„±ì¥í•˜ê¸° ìœ„í•œ ë°”íƒ•ì´ ëœë‹¤.
    ` : ``}

    ${i===1 ? `
    â‹… ì‚¶ì˜ <input class="blank" data-key="s2-1">ê³¼/ì™€
    <input class="blank" data-key="s2-2">ë¥¼/ì„ í•´ê²°í•˜ëŠ” ê³¼ì •ì—ì„œ ì¸ê°„ì´ ê²½í—˜í•˜ëŠ”
    <input class="blank" data-key="s2-3">ì˜ ì œí•œì„±ì€ ê°œì¸ê³¼ ê°€ì¡±ì˜ ê´€ë¦¬ëŠ¥ë ¥ì„ ìš”êµ¬í•œë‹¤.<br>

    â‹… ìƒí™œì˜ ê¸°ë³¸ ì¡°ê±´ìœ¼ë¡œì„œ <input class="blank" data-key="s2-4">ì˜ ìˆ˜í–‰ëŠ¥ë ¥ì„ ê°–ì¶”ëŠ” ì¼ì€
    ì°½ì˜ì ì´ê³  ê°€ì¹˜ ìˆëŠ” ì‚¶ì„ ì„¤ê³„í•˜ê³  ì˜ìœ„í•  ìˆ˜ ìˆëŠ” ê¸°ì´ˆê°€ ëœë‹¤.<br>

    â‹… ë³€í™”í•˜ëŠ” <input class="blank" data-key="s2-5">ë¥¼/ì„ ì•ˆì „í•˜ê³  ê±´ê°•í•˜ê²Œ ìœ ì§€í•˜ê³ ì í•˜ëŠ”
    ê°œì¸ê³¼ ê°€ì¡±ì˜ ì±…ì„ ìˆëŠ” í–‰ë™ì„ í†µí•´
    <input class="blank" data-key="s2-6">ë¥¼/ì„ í•¨ì–‘í•  ìˆ˜ ìˆë‹¤.<br>

    â‹… ì¼ìƒìƒí™œì—ì„œ <input class="blank" data-key="s2-7">ë¥¼/ì„ ì§€í–¥í•˜ëŠ” ê²ƒì€
    í˜„ì¬ <input class="blank" data-key="s2-8">ê³¼/ì™€ì˜ ê³µì¡´ê³¼ í•¨ê»˜
    ë¯¸ë˜ ì„¸ëŒ€ì˜ ê±´ê°•í•œ ì‚¶ì„ ìœ„í•œ ì±…ì„ ìˆëŠ” í–‰ë™ì´ë‹¤.
    ` : ``}

    ${i===2 ? `
    â‹… <input class="blank" data-key="s3-1">ëŠ”/ì€ ì¸ê°„ì˜ í•„ìš”ì™€ ìš•êµ¬ë¥¼ ì¶©ì¡±í•˜ê¸° ìœ„í•œ
    í˜ì‹ ì ì¸ ë¬¸ì œ í•´ê²° í™œë™ìœ¼ë¡œ
    <input class="blank" data-key="s3-2">ë¥¼/ì„ ì£¼ë„í•˜ê³ 
    ì‚¬íšŒâ‹…<input class="blank" data-key="s3-3">â‹…
    <input class="blank" data-key="s3-4"> ë“±ì— ë°”ëŒì§í•œ ì˜í–¥ì„ ë¼ì¹˜ë„ë¡ í™œìš©ë˜ì–´ì•¼ í•œë‹¤.<br>

    â‹… ì¸ê°„ì€ <input class="blank" data-key="s3-5"> ë¬¸ì œ í•´ê²° ê³¼ì •ì„ í†µí•´
    <input class="blank" data-key="s3-6"> ë¬¸ì œë¥¼ ì°½ì˜ì ìœ¼ë¡œ í•´ê²°í•˜ë©°,
    <input class="blank" data-key="s3-7">ì— ëŒ€í•œ ë³´í˜¸ ë° ë°œëª…ê³¼ í˜ì‹ ì€ ê¸°ìˆ ì˜ ê°€ì¹˜ë¥¼ ë†’ì¸ë‹¤.<br>

    â‹… <input class="blank" data-key="s3-8"> ì œí’ˆì˜ ê°œë°œì€ ê¸°ìˆ ì  ë¬¸ì œ í•´ê²° ê³¼ì •ì„ í†µí•´ ì´ë£¨ì–´ì§€ë©°,
    ì œí’ˆì„ ìƒì‚°í•˜ê¸° ìœ„í•´ì„œëŠ” <input class="blank" data-key="s3-9"> í™œë™ ë°
    ë‹¤ì–‘í•œ ì¬ë£Œì™€ ë„êµ¬ì˜ í™œìš©ì´ í•„ìš”í•˜ë‹¤.<br>

    â‹… <input class="blank" data-key="s3-10">ë¥¼/ì„ í™œìš©í•œ ìˆ˜ì†¡ ìˆ˜ë‹¨ì€
    <input class="blank" data-key="s3-11">ê³¼/ì™€ í™˜ê²½ ë¬¸ì œë¥¼ ê·¹ë³µí•˜ëŠ” ëŒ€ì•ˆì´ë©°,
    í˜ì‹ ì  ìˆ˜ì†¡ ìˆ˜ë‹¨ê³¼ ë¬¼ë¥˜ ì²´ì œ êµ¬ì¶•ì€ ì œí’ˆì˜
    <input class="blank" data-key="s3-12"> ìˆ˜ì†¡ì„ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.
    ` : ``}
    
    ${i===3 ? `
    â‹… <input class="blank" data-key="s4-1">ëŠ”/ì€ ì¾Œì í•˜ê³  í¸ë¦¬í•˜ë©° ì•ˆì „í•œ ìƒí™œì„ ìœ„í•œ ë‹¤ì–‘í•œ ì„¤ê³„ì™€ ì‹œê³µ ë° ìœ ì§€ê´€ë¦¬ ë°©ë²•ì„ ì ìš©í•˜ê³  ìˆìœ¼ë©°,
    ë‹¤ë¥¸ ì‚°ì—…ì˜ ìˆ˜í–‰ì„ ìœ„í•œ ê¸°ë°˜ ìš”ì†Œë¡œì„œ ê°€ì¹˜ë¥¼ ê°€ì§„ë‹¤.<br>

    â‹… <input class="blank" data-key="s4-2-1">ëŠ”/ì€ ê¸°ê³„ìš”ì†Œ, ì „ê¸°ì „ì ë“±ì˜ í•˜ë“œì›¨ì–´ì™€ ì´ë¥¼ ì œì–´í•˜ëŠ”
    <input class="blank" data-key="s4-2-2">ë¡œ/ìœ¼ë¡œ êµ¬ì„±ë˜ë©°,
    ì—¬ëŸ¬ ê°€ì§€ ê¸°ìˆ ê³¼ ì§€ì‹ì´ ì ìš©ëœ ì²¨ë‹¨ ìœµí•©ê¸°ìˆ ì˜ ì‚°ë¬¼ë¡œì„œ ì‚¬íšŒ ê° ë¶„ì•¼ì— í™œìš©ëœë‹¤.<br>

    â‹… <input class="blank" data-key="s4-3"> ê¸°ìˆ ì˜ ë°œë‹¬ì€ ì‹œê³µê°„ ê·¹ë³µì„ í†µí•´ ì •ë³´ì™€ ë¬¸í™”ì˜ êµë¥˜ ë° ì„¸ê³„í™”ì— ê¸°ì—¬í•´ì™”ìœ¼ë©°,
    ë‹¤ì–‘í•œ ê¸°ìˆ ê³¼ ìœµí•©í•˜ì—¬ ì¸ê°„ì„ ìƒˆë¡œìš´ ì˜ì—­ìœ¼ë¡œ ì´ëˆë‹¤.<br>

    â‹… <input class="blank" data-key="s4-4"> ê¸°ìˆ ì€ ë‹¤ì–‘í•œ ê¸°ìˆ ê³¼ ìœµí•©í•˜ì—¬ ë°œë‹¬í•˜ê³  ìˆìœ¼ë©°,
    ì‹ëŸ‰ìì›ì˜ í™œìš©ê³¼ ë†ì—…ì˜ ìˆœí™˜ì²´í—˜ì€ ì§€ì†ê°€ëŠ¥í•œ ë¯¸ë˜ ìƒí™œì„ ìœ„í•œ ê¸°ì´ˆê°€ ëœë‹¤.
    ` : ``}
    
    ${i===4 ? `
    â‹… <input class="blank" data-key="s5-1">ëŠ”/ì€ ë””ì§€í„¸ ì‚¬íšŒì—ì„œ ë°œìƒí•˜ëŠ” ë‹¤ì–‘í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë° ë„ì›€ì„ ì¤€ë‹¤.<br>

    â‹… ì»´í“¨í„°ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë°ì´í„°ëŠ”
    <input class="blank" data-key="s5-2-1"> ë°ì´í„°ì´ë©°,
    ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ ëª…ë ¹ì€ ëª…í™•í•œ
    <input class="blank" data-key="s5-2-2">ê°€/ì´ê°€ í•„ìš”í•˜ë‹¤.<br>

    â‹… <input class="blank" data-key="s5-3">ëŠ”/ì€ ì¸ê°„ì˜ ì§€ëŠ¥ì„ ëª¨ë°©í•˜ì—¬ ë§Œë“  í”„ë¡œê·¸ë¨ ì‹œìŠ¤í…œìœ¼ë¡œ
    ìƒí™œ ì†ì˜ ë‹¤ì–‘í•œ ë¶„ì•¼ì— ì˜í–¥ì„ ë¯¸ì¹œë‹¤.
    ` : ``}

  </td>
</tr>
<tr><th class="row-title">ë²”ì£¼</th><td class="center">ë‚´ìš©ìš”ì†Œ</td></tr>
<tr><th class="row-title">ì§€ì‹Â·ì´í•´</th><td class="rows">${'<textarea></textarea>'.repeat(c[0])}</td></tr>
<tr><th class="row-title">ê³¼ì •Â·ê¸°ëŠ¥</th><td class="rows">${'<textarea></textarea>'.repeat(c[1])}</td></tr>
<tr><th class="row-title">ê°€ì¹˜Â·íƒœë„</th><td class="rows">${'<textarea></textarea>'.repeat(c[2])}</td></tr>
</table>
<button class="grade" onclick="grade(this, ${i})">ì±„ì </button>
<button class="grade" onclick="showAnswer(this, ${i})">ì •ë‹µ</button>
<button class="clear" onclick="clearTable(this)">ì§€ìš°ê¸°</button>
<div class="score" id="score${i}">ì •ë‹µë¥ : 0%</div>
`;
});
const answerSets=[answers1,answers2,answers3,answers4,answers5];
const silgwaAnswers = {
  // (1) ì œëª©
  "s1-title-1":"ë°œë‹¬",
  "s1-title-2":"ì£¼ë„ì ",

  // (1) í•µì‹¬ ì•„ì´ë””ì–´
  "s1-1":"ë°œë‹¬","s1-2":"ìë¦½ì ì¸","s1-3":"íƒ€ì¸",
  "s1-4":"ê¸ì •ì ë°œë‹¬",
  "s1-5":"ìƒí˜¸ì¡´ì¤‘","s1-6":"í˜‘ë ¥ì ì†Œí†µ","s1-7":"ëŒ€ì¸ê´€ê³„",
  "s1-8":"ìƒí™œìŠµê´€","s1-9":"ìƒí™œë°©ì‹","s1-10":"ì§„ë¡œ",

  // (2) ì œëª©
  "s2-title-1":"ìƒí™œí™˜ê²½",
  "s2-title-2":"ì§€ì†ê°€ëŠ¥",

  // (2) í•µì‹¬ ì•„ì´ë””ì–´
  "s2-1":"ìš•êµ¬","s2-2":"ë¬¸ì œ","s2-3":"ìƒí™œìì›",
  "s2-4":"ì˜ì‹ì£¼ìƒí™œ",
  "s2-5":"ìƒí™œí™˜ê²½","s2-6":"ì†Œë¹„ìì‹œë¯¼ì„±",
  "s2-7":"ì§€ì†ê°€ëŠ¥í•œì„ íƒ","s2-8":"ìƒí™œê³µë™ì²´",

  // (3) ì œëª©
  "s3-title-1":"ê¸°ìˆ ì ",
  "s3-title-2":"í˜ì‹ ",

  // (3) í•µì‹¬ ì•„ì´ë””ì–´
  "s3-1":"ê¸°ìˆ ","s3-2":"ì¸ë¥˜ë¬¸ëª…","s3-3":"ë¬¸í™”","s3-4":"ê²½ì œ",
  "s3-5":"ê¸°ìˆ ì ","s3-6":"ë°œëª…","s3-7":"ì§€ì‹ì¬ì‚°",
  "s3-8":"ì°½ì˜ì ì¸","s3-9":"ì„¤ê³„",
  "s3-10":"ì¹œí™˜ê²½ì—ë„ˆì§€","s3-11":"ìì›ì˜ê³ ê°ˆ","s3-12":"íš¨ìœ¨ì ì¸",
  
  // (4)
  "s4-title-1":"ì§€ì†ê°€ëŠ¥í•œ",
  "s4-1":"ê±´ì„¤ê¸°ìˆ ",
  "s4-2-1":"ë¡œë´‡",
  "s4-2-2":"ì†Œí”„íŠ¸ì›¨ì–´",
  "s4-3":"ì •ë³´í†µì‹ ",
  "s4-4":"ìƒëª…",

  // (5)
  "s5-title-1":"ì¸ê³µì§€ëŠ¥",
  "s5-1":"í”„ë¡œê·¸ë˜ë°",
  "s5-2-1":"ë””ì§€í„¸",
  "s5-2-2":"ì ˆì°¨",
  "s5-3":"ì¸ê³µì§€ëŠ¥"
};
function getTableFromBtn(btn){
  let el = btn.previousElementSibling;
  while (el && el.tagName !== 'TABLE') {
    el = el.previousElementSibling;
  }
  return el;
}

/* ===============================
   âœ… ì‹¤ê³¼ ë‚´ì²´í‘œ: correct/wrong í´ë˜ìŠ¤ ë²„ì „ (ì •ìƒ ì‘ë™)
   - textarea + í•µì‹¬ì•„ì´ë””ì–´ ë¹ˆì¹¸(.blank) ëª¨ë‘ ë°°ê²½ìƒ‰ ì ìš©
   - ì •ë‹µ/ì±„ì /ì§€ìš°ê¸° + ì •ë‹µë¥  ì •ìƒ í‘œì‹œ
=============================== */

function getTableFromBtn(btn){
  let el = btn.previousElementSibling;
  while(el && el.tagName !== 'TABLE') el = el.previousElementSibling;
  return el;
}

// âœ… ë§ˆí¬ ì œê±°
function clearMark(el){
  el.classList.remove('correct','wrong');
  el.style.color = '';
  el.style.background = '';
}

// âœ… ì ìˆ˜ ë°•ìŠ¤ ì°¾ê¸°(ë²„íŠ¼ ë‹¤ìŒì— scoreê°€ ìˆìŒ)
function setScoreFromBtn(btn, correct, total){
  let el = btn.nextElementSibling;
  while(el && !el.classList.contains('score')){
    el = el.nextElementSibling;
  }
  if(!el) return;

  const percent = total ? Math.round(correct/total*100) : 0;
  el.textContent = `ì •ë‹µë¥  : ${correct} / ${total} (${percent}%)`;
}

function grade(btn,index){
  const table = getTableFromBtn(btn);
  const a = answerSets[index];
  if(!table || !a) return;

  let correct=0, total=0;

  // â‘  textarea ì±„ì 
  [a.k,a.p,a.v].forEach((arr,rowIdx)=>{
    const row = table.querySelectorAll('tr')[rowIdx+2];
    const textareas = row.querySelectorAll('textarea');

    textareas.forEach((t,i)=>{
      const ans = arr[i];
      if(!ans) return;

      total++;
      clearMark(t);

      if(norm(t.value) === norm(ans)){
        t.classList.add('correct');
        correct++;
      }else{
        t.classList.add('wrong');
      }
    });
  });

  // â‘¡ ë¹ˆì¹¸(.blank) ì±„ì  (í‘œ ì•ˆ + ì œëª© nt-titleê¹Œì§€)
  const title = table.previousElementSibling;
  const blanks = [
    ...table.querySelectorAll('.blank'),
    ...(title ? title.querySelectorAll('.blank') : [])
  ];

  blanks.forEach(b=>{
    const key = b.dataset.key;
    if(!silgwaAnswers[key]) return;

    total++;
    clearMark(b);

    if(norm(b.value) === norm(silgwaAnswers[key])){
      b.classList.add('correct');
      correct++;
    }else{
      b.classList.add('wrong');
    }
  });

  setScoreFromBtn(btn, correct, total);
}

function showAnswer(btn,index){
  const table = getTableFromBtn(btn);
  const a = answerSets[index];
  if(!table || !a) return;

  // â‘  textarea ì •ë‹µ ì±„ìš°ê¸°
  [a.k,a.p,a.v].forEach((arr,rowIdx)=>{
    const row = table.querySelectorAll('tr')[rowIdx+2];
    row.querySelectorAll('textarea').forEach((t,i)=>{
      t.value = arr[i] || '';
      clearMark(t);
      if(arr[i]) t.classList.add('correct');
    });
  });

  // â‘¡ ë¹ˆì¹¸(.blank) ì •ë‹µ ì±„ìš°ê¸° (í‘œ ì•ˆ + ì œëª©)
  const title = table.previousElementSibling;
  const blanks = [
    ...table.querySelectorAll('.blank'),
    ...(title ? title.querySelectorAll('.blank') : [])
  ];

  blanks.forEach(b=>{
    const key = b.dataset.key;
    if(!silgwaAnswers[key]) return;

    b.value = silgwaAnswers[key];
    clearMark(b);
    b.classList.add('correct');
  });

  // â‘¢ 100% í‘œì‹œ(ì •ë‹µ ìˆëŠ” ê°œìˆ˜ ê¸°ì¤€)
  let total = 0;
  total += a.k.filter(Boolean).length;
  total += a.p.filter(Boolean).length;
  total += a.v.filter(Boolean).length;

  blanks.forEach(b=>{
    const key = b.dataset.key;
    if(silgwaAnswers[key]) total++;
  });

  setScoreFromBtn(btn, total, total);
}

function clearTable(btn){
  const table = getTableFromBtn(btn);
  if(!table) return;

  // â‘  textarea ì´ˆê¸°í™”
  table.querySelectorAll('textarea').forEach(t=>{
    t.value = '';
    clearMark(t);
  });

  // â‘¡ ë¹ˆì¹¸(.blank) ì´ˆê¸°í™” (í‘œ ì•ˆ + ì œëª©)
  const title = table.previousElementSibling;
  const blanks = [
    ...table.querySelectorAll('.blank'),
    ...(title ? title.querySelectorAll('.blank') : [])
  ];

  blanks.forEach(b=>{
    b.value = '';
    clearMark(b);
  });

  // â‘¢ ì ìˆ˜ ì´ˆê¸°í™”
  setScoreFromBtn(btn, 0, 0);
}
/* ===============================
   ë„ë• ë‚´ì²´í‘œ ì „ìš© (ì´ë¦„ ì¶©ëŒ ë°©ì§€ ë²„ì „)
   - í•¨ìˆ˜ëª…: moralNT_*
=============================== */

/* ê³µí†µ ìœ í‹¸ (ì—¬ê¸°ì„œë§Œ ì”€) */
function moralNT_norm(t){
  return (t || '').replace(/\s+/g,'').trim();
}

/* ===== ì •ë‹µ ë°ì´í„° (ë¨¼ì € ìˆì–´ì•¼ í•¨) ===== */
const moralBlankAnswers = {
  // ì œëª© ì˜†
  "m1-title":"ìì‹ ",
  "m2-title":"íƒ€ì¸",
  "m3-title":"ì‚¬íšŒê³µë™ì²´",
  "m4-title":"ìì—°",

  // (1)
  "m1-1":"ì„±ì‹¤",
  "m1-2":"ë„ë•ì ",
  "m1-3":"ìì•„",

  // (2)
  "m2-1":"ë°°ë ¤",
  "m2-2":"ê³µê°",
  "m2-3":"ì°¨ì´",
  "m2-4":"ê°ˆë“±",

  // (3)
  "m3-1":"ì‚¬íšŒì •ì˜",
  "m3-2":"ë„ë•ê³µë™ì²´",
  "m3-3":"ì„¸ê³„ì‹œë¯¼",
  "m3-4":"ì„¸ê³„í‰í™”",

  // (4) ìƒˆë¡œ ì¶”ê°€í•œ í•µì‹¬ì•„ì´ë””ì–´ ë¹ˆì¹¸
  "m4-1":"ì„±ì‹¤",   // ( )ëŠ”/ì€
  "m4-2":"íƒêµ¬",   // ìì•„ì— ëŒ€í•œ ( )
  "m4-3":"ì„±ì°°"    // ê³¼/ì™€ ( )
};

const moralAnswers = [
  // (1)
  {
    k:{ g34:[
          'ë‚˜ëŠ”ì™œì†Œì¤‘í•œì‚¬ëŒì¸ê°€',
          'ì–´ë–¤ì‚¬ëŒì„ì •ì§í•œì‚¬ëŒì´ë¼ê³ í•˜ëŠ”ê°€',
          'ìì‹ ì—ê²Œì •ì„±ì„ë‹¤í•˜ëŠ”ì‚¶ì„ì‚´ì•„ì•¼í•˜ëŠ”ì´ìœ ëŠ”ë¬´ì—‡ì¸ê°€',
          'ë„ë•ì ìœ¼ë¡œí–‰ë™í•˜ëŠ”ì¼ì€ì™œí•„ìš”í• ê¹Œ'
        ],
        g56:[
          'ìì£¼ì ìœ¼ë¡œì‚´ì•„ì•¼í•˜ëŠ”ì´ìœ ëŠ”ë¬´ì—‡ì¼ê¹Œ',
          'ìì‹ ì˜ìƒí™œì„ë°˜ì„±í•˜ëŠ”ì¼ì€ì™œì¤‘ìš”í• ê¹Œ',
          'ìì‹ ì´í•˜ê³ ì‹¶ì€ì¼ì„ì„ íƒí• ë•Œì–´ë–¤ê²ƒì„ê³ ë ¤í•´ì•¼í• ê¹Œ'
        ]},
    p:{ g34:[
          'ìì‹ ì„íƒêµ¬í•˜ì—¬ìê¸°ê°ì •ì˜ì†Œì¤‘í•¨ì„¤ëª…í•˜ê¸°',
          'ì •ì§í•œí–‰ë™ì°¾ì•„ë³´ê¸°',
          'ì„±ì‹¤í•œìƒí™œì˜ëª¨ë²”ì •í•˜ê¸°',
          'ë‹¤ë¥¸ì‚¬ëŒì˜ê´€ì ì—ì„œë¬¸ì œë°”ë¼ë³´ê¸°'
        ],
        g56:[
          'ìì£¼ì˜ì˜ë¯¸ë¥¼ì‚´í´ë³´ê³ ìì‹ ì˜ìƒí™œì—ë°˜ì˜í•˜ê¸°',
          'ìì‹ ì˜ìƒí™œì ê²€í•˜ì—¬ì„±ì°°í•˜ê¸°',
          'ìì‹ ì˜ì ì„±ì„ë„ë•ì ìœ¼ë¡œíƒìƒ‰í•˜ê¸°'
        ]},
    v:{ g34:[
          'ìê¸°ë¥¼ì†Œì¤‘íˆí•˜ëŠ”íƒœë„',
          'ì •ì§í•˜ê²Œí–‰ë™í•˜ë ¤ëŠ”ìì„¸',
          'ì„±ì‹¤í•œíƒœë„',
          'ë„ë•ì ìœ¼ë¡œí–‰ë™í•˜ë ¤ëŠ”ìì„¸'
        ],
        g56:[
          'ì£¼ì²´ì ì¸ì‚¶ì˜íƒœë„',
          'ë°˜ì„±í•˜ëŠ”íƒœë„',
          'ë„ë•ì ì„±ì¥ì„ì§€í–¥í•˜ëŠ”ìì„¸'
        ]}
  },

  // (2)
  {
    k:{ g34:[
          'ê°€ì¡±ì˜í–‰ë³µì„ìœ„í•´ë¬´ì—‡ì„í•´ì•¼í• ê¹Œ',
          'ì¹œêµ¬ë¼ë¦¬ë°°ë ¤í•´ì•¼í•˜ëŠ”ì´ìœ ëŠ”ë¬´ì—‡ì¼ê¹Œ',
          'íƒ€ì¸ì—ëŒ€í•œê³µê°ì€ì™œí•„ìš”í• ê¹Œ'
        ],
        g56:[
          'íƒ€ì¸ì„ì™œë„ì™€ì•¼í•˜ë©°ì–´ë–»ê²Œë„ìš¸ìˆ˜ìˆì„ê¹Œ',
          'ì„œë¡œì˜ë‹¤ë¦„ì„ì¡´ì¤‘í•´ì•¼í•˜ëŠ”ì´ìœ ëŠ”ë¬´ì—‡ì¼ê¹Œ',
          'ì¸ê³µì§€ëŠ¥ë¡œë´‡ê³¼ì¹œêµ¬'
        ]},
    p:{ g34:[
          'íš¨ìš°ì• ì˜ì˜ë¯¸ì„¤ëª…í•˜ê¸°',
          'ì¹œêµ¬ë¥¼ì„œë¡œë°°ë ¤í•˜ëŠ”ë°©ë²•íƒìƒ‰í•˜ê¸°',
          'íƒ€ì¸ì˜ê°ì •í•¨ê»˜ë‚˜ëˆ„ê¸°'
        ],
        g56:[
          'íƒ€ì¸ì˜ìƒí™©ì„ì£¼ì˜ê¹Šê²Œê´€ì°°í•˜ê³ ë‹¤ì–‘í•œë„ì›€ë°©ì•ˆíƒìƒ‰í•˜ê¸°',
          'í¸ê²¬ì‚¬ë¡€ë¥¼ì°¾ê³ ìˆ˜ì •ë°©ì•ˆì œì•ˆí•˜ê¸°',
          'ì¸ê³µì§€ëŠ¥ë¡œë´‡ê³¼ê´€ê³„ë§ºì„ë•Œí•„ìš”í•œìœ¤ë¦¬ì ì›ì¹™ì ê²€í•˜ê¸°'
        ]},
    v:{ g34:[
          'ê°€ì¡±ì„ì‚¬ë‘í•˜ëŠ”íƒœë„',
          'ì¹œêµ¬ë¥¼ë°°ë ¤í•˜ëŠ”ìì„¸',
          'íƒ€ì¸ì—ê³µê°í•˜ëŠ”íƒœë„'
        ],
        g56:[
          'íƒ€ì¸ì„ìœ„í•˜ëŠ”ìì„¸',
          'ë‹¤ì–‘ì„±ì„ì¡´ì¤‘í•˜ëŠ”íƒœë„',
          'ì¸ê³µì§€ëŠ¥ë¡œë´‡ê³¼ì˜ë°”ë¥¸ê´€ê³„í˜•ì„±ì˜ì§€í•¨ì–‘'
        ]}
  },

  // (3)
  {
    k:{ g34:[
          'ê³µì •í•œì‚¬íšŒë¥¼ìœ„í•´ì„œë‚´ê°€í• ì¼ì€ë¬´ì—‡ì¼ê¹Œ',
          'ë””ì§€í„¸ì‚¬íšŒì—ì„œë°œìƒí•˜ëŠ”ë¬¸ì œë¥¼ì–´ë–»ê²Œí•´ê²°í• ê¹Œ',
          'í†µì¼ì€ì™œí•„ìš”í• ê¹Œ'
        ],
        g56:[
          'ì¸ê¶Œì„ì¡´ì¤‘í•´ì•¼í•˜ëŠ”ì´ìœ ëŠ”ë¬´ì—‡ì¼ê¹Œ',
          'ì •ì˜ë¡œìš´ê³µë™ì²´ë¥¼ìœ„í•´ì–´ë–»ê²Œí–‰ë™í•´ì•¼í•˜ëŠ”ê°€',
          'í†µì¼ê³¼ì •ê³¼í†µì¼ì´í›„ì‚¬íšŒëŠ”ì–´ë–¤ëª¨ìŠµì´ì–´ì•¼í• ê¹Œ',
          'ë‹¤ë¥¸ë‚˜ë¼ì˜ì‚¬ëŒë“¤ê¹Œì§€ì‚¬ë‘í•´ì•¼í•˜ëŠ”ì´ìœ ëŠ”ë¬´ì—‡ì¼ê¹Œ'
        ]},
    p:{ g34:[
          'ë¶ˆê³µì •í•œì‚¬ë¡€ë¶„ì„ì„í†µí•´ê³µì •ì‚¬íšŒë¥¼ìœ„í•´ë‚´ê°€í• ì¼íƒìƒ‰í•˜ê¸°',
          'ë””ì§€í„¸ì‚¬íšŒì—ì„œë°œìƒí•˜ëŠ”ë¬¸ì œì•Œì•„ë³´ê³ í•´ê²°ë°©ì•ˆíƒìƒ‰í•˜ê¸°',
          'í†µì¼ì˜í•„ìš”ì„±ì„¤ëª…í•˜ê¸°'
        ],
        g56:[
          'ì¸ê¶Œê´€ë ¨ë¬¸ì œì‚¬ë¡€ì¡°ì‚¬í•˜ê¸°',
          'ì •ì˜ë¡œìš´ê³µë™ì²´ë¥¼ìœ„í•œê·œì¹™ê³ ì•ˆí•˜ê¸°',
          'í†µì¼ê³¼ì •ê³¼í†µì¼ì´í›„ë°”ëŒì§í•œì‚¬íšŒëª¨ìŠµíƒìƒ‰í•˜ê¸°',
          'ë‹¤ë¥¸ë‚˜ë¼ì˜ì‚¬ëŒë“¤ì´ê²ªëŠ”ë¬¸ì œì‚´í´ë³´ê³ í•´ê²°ë°©ì•ˆìƒê°í•˜ê¸°'
        ]},
    v:{ g34:[
          'ê³µì •ì„ì‹¤ì²œí•˜ë ¤ëŠ”íƒœë„',
          'ì •ë³´í†µì‹ ìœ¤ë¦¬ì˜ì‹í•¨ì–‘',
          'í†µì¼ê°ìˆ˜ì„±í•¨ì–‘'
        ],
        g56:[
          'ì¸ê¶Œê°ìˆ˜ì„±í•¨ì–‘',
          'ì •ì˜ë¡œìš´ê³µë™ì²´í˜•ì„±ì˜ì§€í•¨ì–‘',
          'í†µì¼ì„ì¶”êµ¬í•˜ëŠ”íƒœë„ì™€ì˜ì§€í•¨ì–‘',
          'ì¸ë¥˜ë¥¼ì‚¬ë‘í•˜ëŠ”íƒœë„'
        ]}
  },

  // (4)
  {
    k:{ g34:[
          'ìƒëª…ì€ì™œì†Œì¤‘í• ê¹Œ',
          'ì¸ê°„ê³¼ìì—°ì´í•¨ê»˜ì‚´ì•„ì•¼í•˜ëŠ”ì´ìœ ëŠ”ë¬´ì—‡ì¼ê¹Œ'
        ],
        g56:[
          'í™˜ê²½ìœ„ê¸°ë¥¼ê·¹ë³µí•˜ê¸°ìœ„í•´ì–´ë–»ê²Œí•´ì•¼í•˜ëŠ”ê°€',
          'ì§€ì†ê°€ëŠ¥í•œì‚¶ì´ë€ë¬´ì—‡ì¼ê¹Œ'
        ]},
    p:{ g34:[
          'ìƒëª…ê²½ì‹œì‚¬ë¡€ì¡°ì‚¬í•˜ê¸°',
          'ìì—°ê³¼ê³µìƒí•˜ê¸°ìœ„í•´ìì‹ ì´í• ìˆ˜ìˆëŠ”ì¼íƒìƒ‰í•˜ê¸°'
        ],
        g56:[
          'í™˜ê²½ìœ„ê¸°ë¥¼ê·¹ë³µí•˜ê¸°ìœ„í•œë°©ì•ˆì‚´í´ë³´ê¸°',
          'ë¯¸ë˜ì„¸ëŒ€ì˜ê¶Œë¦¬ë¥¼ì§€í‚¤ê¸°ìœ„í•œê³„íšì„¸ìš°ê¸°'
        ]},
    v:{ g34:[
          'ìƒëª…ì—ëŒ€í•œì¡´ì¤‘',
          'ìƒíƒœê°ìˆ˜ì„±í•¨ì–‘'
        ],
        g56:[
          'í™˜ê²½ìœ„ê¸°ë¥¼ê·¹ë³µí•˜ëŠ”ìì„¸',
          'ë¯¸ë˜ì„¸ëŒ€ì—ëŒ€í•œì±…ì„ì˜ì‹í•¨ì–‘'
        ]}
  }
];

/* ===============================
   ë„ë• í‘œ ìƒì„±
=============================== */
document.addEventListener("DOMContentLoaded", () => {
  const moralContainer = document.getElementById('moralTables');
  if(!moralContainer) return;

  moralContainer.innerHTML = '';

  moralAnswers.forEach((a,i)=>{
    moralContainer.innerHTML += `
      <div class="moral-block">
        <div class="nt-title">
          (${i+1})
          <input class="blank moral-title" data-key="m${i+1}-title">
          ê³¼/ì™€ì˜ ê´€ê³„
        </div>

        <table class="subject-table">
          <tr><td colspan="3">
            ${i===0 ? `
              â‹… <input class="blank" data-key="m1-1">ëŠ”/ì€ ë„ë•ì  ê°€ì¹˜ì™€ ë•ëª©ì„ ì¼ê´€ë˜ê²Œ ì¶”êµ¬í•˜ë„ë¡ í•˜ì—¬
              <input class="blank" data-key="m1-2"> ì‚¶ìœ¼ë¡œ ì´ëˆë‹¤.<br>
              â‹… <input class="blank" data-key="m1-3">ì— ëŒ€í•œ íƒêµ¬ì™€ ì„±ì°°ì€ ìì‹ ì„ ì¡´ì¤‘í•˜ëŠ” ë§ˆìŒì„ ê¸°ë¥´ëŠ” ë„ë• ê³µë¶€ì˜ ê¸°ì´ˆì´ë‹¤.
            ` : ``}

            ${i===1 ? `
              â‹… <input class="blank" data-key="m2-1">ëŠ”/ì€ íƒ€ì¸ì— ëŒ€í•œ ê´€ì‹¬ê³¼
              <input class="blank" data-key="m2-2">ì„/ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íƒ€ì¸ì˜ ì‚¶ì„ ê°œì„ í•œë‹¤.<br>
              â‹… <input class="blank" data-key="m2-3">ì˜ ì¡´ì¤‘ì€
              <input class="blank" data-key="m2-4">ë¥¼/ì„ í‰í™”ì ìœ¼ë¡œ í•´ê²°í•˜ê³  íƒ€ì¸ê³¼ ë”ë¶ˆì–´ ì‚¬ëŠ” ì‚¶ìœ¼ë¡œ ì´ëˆë‹¤.
            ` : ``}

            ${i===2 ? `
              â‹… <input class="blank" data-key="m3-1">ëŠ”/ì€ ì‹œë¯¼ì˜ ì¸ê°„ë‹¤ìš´ ì‚¶ì„ ë³´ì¥í•˜ëŠ”
              <input class="blank" data-key="m3-2">ì˜ í† ëŒ€ê°€ ëœë‹¤.<br>
              â‹… <input class="blank" data-key="m3-3">ëŠ”/ì€ ì¸ë¥˜ì˜ ë¬¸ì œë¥¼ ì´í•´í•˜ê³  ê³µê°í•˜ì—¬
              ì¸ë¥˜ ë²ˆì˜ê³¼ <input class="blank" data-key="m3-4">ì— ê¸°ì—¬í•œë‹¤.
            ` : ``}

            ${i===3 ? `
              â‹… <input class="blank" data-key="m4-1">ëŠ”/ì€ ë„ë•ì  ê°€ì¹˜ì™€ ë•ëª©ì„ ì¼ê´€ë˜ê²Œ ì¶”êµ¬í•˜ë„ë¡ í•˜ì—¬ ë„ë•ì  ì‚¶ìœ¼ë¡œ ì´ëˆë‹¤.<br>
              â‹… ìì•„ì— ëŒ€í•œ <input class="blank" data-key="m4-2">ê³¼/ì™€ <input class="blank" data-key="m4-3">ëŠ”/ì€ ìì‹ ì„ ì¡´ì¤‘í•˜ëŠ” ë§ˆìŒì„ ê¸°ë¥´ëŠ” ë„ë• ê³µë¶€ì˜ ê¸°ì´ˆì´ë‹¤.
            ` : ``}
          </td></tr>

          <tr>
            <th rowspan="2">ë²”ì£¼</th>
            <th>3-4í•™ë…„êµ°</th>
            <th>5-6í•™ë…„êµ°</th>
          </tr>
          <tr>
            <th>ë‚´ìš©ìš”ì†Œ</th>
            <th>ë‚´ìš©ìš”ì†Œ</th>
          </tr>

          <tr>
            <th>ì§€ì‹Â·ì´í•´</th>
            <td>${'<textarea></textarea>'.repeat(a.k.g34.length)}</td>
            <td>${'<textarea></textarea>'.repeat(a.k.g56.length)}</td>
          </tr>

          <tr>
            <th>ê³¼ì •Â·ê¸°ëŠ¥</th>
            <td>${'<textarea></textarea>'.repeat(a.p.g34.length)}</td>
            <td>${'<textarea></textarea>'.repeat(a.p.g56.length)}</td>
          </tr>

          <tr>
            <th>ê°€ì¹˜Â·íƒœë„</th>
            <td>${'<textarea></textarea>'.repeat(a.v.g34.length)}</td>
            <td>${'<textarea></textarea>'.repeat(a.v.g56.length)}</td>
          </tr>
        </table>

        <div class="moral-btns">
          <button onclick="moralNT_grade(this, ${i})">ì±„ì </button>
          <button onclick="moralNT_show(this, ${i})">ì •ë‹µ</button>
          <button onclick="moralNT_clear(this)">ì§€ìš°ê¸°</button>
        </div>

        <div class="score">ì •ë‹µë¥  : 0%</div>
      </div>
    `;
  });
});

/* ===============================
   âœ… ë„ë• ë‚´ì²´í‘œ: correct/wrong í´ë˜ìŠ¤ ë²„ì „
   - textarea + input.blank ì „ë¶€ ë°°ê²½ìƒ‰ ì ìš©
   - ì •ë‹µ/ì±„ì /ì§€ìš°ê¸° + ì •ë‹µë¥  ìœ ì§€
=============================== */

function moralNT_clearMark(el){
  el.classList.remove('correct','wrong');
  el.style.color = '';
  el.style.background = '';
}

function moralNT_grade(btn, idx){
  const block = btn.closest('.moral-block');
  const table = block.querySelector('table');
  const a = moralAnswers[idx];

  let correct = 0, total = 0;
  const rows = table.querySelectorAll('tr');
  const rowMap = { k:3, p:4, v:5 };

  // 1) ë‚´ìš©ìš”ì†Œ(textarea) ì±„ì 
  ['k','p','v'].forEach(key=>{
    const row = rows[rowMap[key]];
    const left = row.children[1].querySelectorAll('textarea');
    const right = row.children[2].querySelectorAll('textarea');

    a[key].g34.forEach((ans,i)=>{
      const ta = left[i];
      if(!ta) return;
      total++;
      moralNT_clearMark(ta);

      if(moralNT_norm(ta.value) === moralNT_norm(ans)){
        ta.classList.add('correct');
        correct++;
      }else{
        ta.classList.add('wrong');
      }
    });

    a[key].g56.forEach((ans,i)=>{
      const ta = right[i];
      if(!ta) return;
      total++;
      moralNT_clearMark(ta);

      if(moralNT_norm(ta.value) === moralNT_norm(ans)){
        ta.classList.add('correct');
        correct++;
      }else{
        ta.classList.add('wrong');
      }
    });
  });

  // 2) ì œëª©+í•µì‹¬ì•„ì´ë””ì–´ ë¹ˆì¹¸(input.blank) ì±„ì 
  block.querySelectorAll('.blank').forEach(b=>{
    const key = b.dataset.key;
    const ans = moralBlankAnswers[key];
    if(!ans) return;

    total++;
    moralNT_clearMark(b);

    if(moralNT_norm(b.value) === moralNT_norm(ans)){
      b.classList.add('correct');
      correct++;
    }else{
      b.classList.add('wrong');
    }
  });

  const percent = total ? Math.round(correct/total*100) : 0;
  block.querySelector('.score').textContent = `ì •ë‹µë¥  : ${percent}% (${correct}/${total})`;
}

function moralNT_show(btn, idx){
  const block = btn.closest('.moral-block');
  const table = block.querySelector('table');
  const a = moralAnswers[idx];

  const rows = table.querySelectorAll('tr');
  const rowMap = { k:3, p:4, v:5 };

  // 1) ë‚´ìš©ìš”ì†Œ(textarea) ì •ë‹µ ì±„ìš°ê¸°
  ['k','p','v'].forEach(key=>{
    const row = rows[rowMap[key]];
    const left = row.children[1].querySelectorAll('textarea');
    const right = row.children[2].querySelectorAll('textarea');

    a[key].g34.forEach((ans,i)=>{
      const ta = left[i];
      if(!ta) return;
      ta.value = ans;
      moralNT_clearMark(ta);
      ta.classList.add('correct');
    });

    a[key].g56.forEach((ans,i)=>{
      const ta = right[i];
      if(!ta) return;
      ta.value = ans;
      moralNT_clearMark(ta);
      ta.classList.add('correct');
    });
  });

  // 2) ì œëª©+í•µì‹¬ì•„ì´ë””ì–´ ë¹ˆì¹¸ ì •ë‹µ ì±„ìš°ê¸°
  let blankCount = 0;
  block.querySelectorAll('.blank').forEach(b=>{
    const key = b.dataset.key;
    const ans = moralBlankAnswers[key];
    if(!ans) return;

    b.value = ans;
    moralNT_clearMark(b);
    b.classList.add('correct');
    blankCount++;
  });

  // 3) ì •ë‹µë¥  100% (ì •ë‹µ ìˆëŠ” ê°œìˆ˜ ê¸°ì¤€)
  let total = 0;
  total += a.k.g34.length + a.k.g56.length;
  total += a.p.g34.length + a.p.g56.length;
  total += a.v.g34.length + a.v.g56.length;
  total += blankCount;

  block.querySelector('.score').textContent = `ì •ë‹µë¥  : 100% (${total}/${total})`;
}

function moralNT_clear(btn){
  const block = btn.closest('.moral-block');

  block.querySelectorAll('textarea').forEach(t=>{
    t.value = '';
    moralNT_clearMark(t);
  });

  block.querySelectorAll('.blank').forEach(b=>{
    b.value = '';
    moralNT_clearMark(b);
  });

  block.querySelector('.score').textContent = 'ì •ë‹µë¥  : 0%';
}
/* ===============================
   ì²´ìœ¡ ë‚´ì²´í‘œ ì •ë‹µ ë°ì´í„°
=============================== */
/* ===============================
   ì²´ìœ¡ í•µì‹¬ ì•„ì´ë””ì–´ ë¹ˆì¹¸ ì •ë‹µ
=============================== */
const peBlankAnswers = {
  // (1) ìš´ë™
  pe1_1_1: ['ì²´ë ¥'],
  pe1_1_2: ['ê±´ê°•'],

  pe1_2_1: ['ì²´ë ¥'],
  pe1_2_2: ['ê±´ê°•'],
  pe1_2_3: ['ì‹ ì²´ì '],
  pe1_2_4: ['ìƒí™œìŠµê´€','ìƒí™œ ìŠµê´€'],

  pe1_3_1: ['ì¸ê°„'],
  pe1_3_2: ['ì‹¬ì‹ '],

  // (2) ìŠ¤í¬ì¸ 
  pe2_1_1: ['ìŠ¤í¬ì¸ '],
  pe2_1_2: ['ì›€ì§ì„ê¸°ìˆ ','ì›€ì§ì„ ê¸°ìˆ '],

  pe2_2_1: ['í™˜ê²½'],
  pe2_2_2: ['ì „ëµ'],

  pe2_3_1: ['ì›€ì§ì„'],
  pe2_3_2: ['í™œë™ì '],

  // (3) í‘œí˜„
  pe3_1_1: ['ìƒê°'],
  pe3_1_2: ['ê°ì •'],
  pe3_1_3: ['ì‹¬ë¯¸ì '],
  pe3_1_4: ['ì°½ì˜ì '],
  pe3_1_5: ['ì‹ ì²´í™œë™','ì‹ ì²´ í™œë™'],

  pe3_2_1: ['ê¸°ë³¸ì›€ì§ì„','ê¸°ë³¸ ì›€ì§ì„'],

  pe3_3_1: ['ì‹¬ë¯¸ì ê°€ì¹˜','ì‹¬ë¯¸ì  ê°€ì¹˜'],
  pe3_3_2: ['ì£¼ì²´ì ']
};
const peAnswers = [
  /* (1) ìš´ë™ */
  {
    k: {
      g34: [
        'ìš´ë™ê³¼ì²´ë ¥',
        'ê¸°ë³¸ì²´ë ¥ìš´ë™ë°©ë²•',
        'ìš´ë™ê³¼ê±´ê°•',
        'ê±´ê°•í•œìƒí™œìŠµê´€'
      ],
      g56: [
        'ê±´ê°•ì²´ë ¥ê³¼ìš´ë™ì²´ë ¥',
        'ì²´ë ¥ì¢…ë¥˜ë³„ìš´ë™ë°©ë²•',
        'ìš´ë™ê³¼ì„±ì¥ë°œë‹¬',
        'ì•ˆì „í•œìƒí™œìŠµê´€'
      ]
    },
    p: {
      g34: [
        'ìš´ë™ê³¼ì²´ë ¥ì˜ê´€ê³„íŒŒì•…í•˜ê¸°',
        'ê¸°ë³¸ì²´ë ¥ìš´ë™ì‹œë„í•˜ê¸°',
        'ìš´ë™ê³¼ê±´ê°•ì˜ê´€ê³„íŒŒì•…í•˜ê¸°',
        'ê±´ê°•í•œìƒí™œìŠµê´€ì‹œë„í•˜ê¸°',
        'ì•ˆì „í•˜ê²Œí™œë™í•˜ê¸°'
      ],
      g56: [
        'ê±´ê°•ì²´ë ¥ê³¼ìš´ë™ì²´ë ¥ì˜ì˜ë¯¸ì™€ìš”ì†ŒíŒŒì•…í•˜ê¸°',
        'ì²´ë ¥ì„ì¸¡ì •í•˜ê³ ë‹¤ì–‘í•œìš´ë™ì‹œë„í•˜ê¸°',
        'ìš´ë™ê³¼ì„±ì¥ë°œë‹¬ì˜ê´€ê³„íŒŒì•…í•˜ê¸°',
        'ìš´ë™ê³¼ìƒí™œì†ì•ˆì „ì‚¬ê³ ì˜ˆë°©ë°©ë²•íƒìƒ‰í•˜ë©°ëŒ€ì²˜í•˜ê¸°',
        'ì•ˆì „í•˜ê²Œí™œë™í•˜ê¸°'
      ]
    },
    v: {
      g34: [
        'ê¸ì •ì ì‹ ì²´ì¸ì‹',
        'ìš´ë™ë°ê±´ê°•ì—ê´€í•œê´€ì‹¬',
        'ìš´ë™ë°ê±´ê°•ìŠµê´€ì‹¤ì²œì˜ì§€'
      ],
      g56: [
        'ì²´ë ¥ìš´ë™ì°¸ì—¬ì˜ê·¼ë©´ì„±',
        'ì²´ë ¥ì¦ì§„ì„ìœ„í•œëˆê¸°',
        'ì„±ì¥ë°œë‹¬ì˜ì°¨ì´ê³µê°',
        'ì•ˆì „ì‚¬ê³ ì—ì„œì˜ì¹¨ì°©ì„±'
      ]
    }
  },

  /* (2) ìŠ¤í¬ì¸  */
  {
    k: {
      g34: [
        'ìŠ¤í¬ì¸ ì™€ì›€ì§ì„ê¸°ìˆ ',
        'ê¸°ë³¸ì›€ì§ì„ê¸°ìˆ ì˜ì¢…ë¥˜ì™€ìˆ˜í–‰ë°©ë²•',
        'ìŠ¤í¬ì¸ ì—ì„œì˜ê¸°ë³¸ì›€ì§ì„ê¸°ìˆ ìˆ˜í–‰ë°©ë²•'
      ],
      g56: [
        'ê¸°ìˆ í˜•ì „ëµí˜•ìƒíƒœí˜•ìŠ¤í¬ì¸ ì˜ìœ í˜•',
        'ê¸°ìˆ í˜•ì „ëµí˜•ìƒíƒœí˜•ìŠ¤í¬ì¸ ì˜ìœ í˜•ë³„ì›€ì§ì„ê¸°ìˆ ì‘ìš©ë°©ë²•',
        'ê¸°ìˆ í˜•ì „ëµí˜•ìƒíƒœí˜•ìŠ¤í¬ì¸ ì˜í™œë™ë°©ë²•ê³¼ê¸°ë³¸ì „ëµ'
      ]
    },
    p: {
      g34: [
        'ìŠ¤í¬ì¸ ì˜ì˜ë¯¸ì™€ìœ í˜•ì´í•´í•˜ê¸°',
        'ê¸°ë³¸ì›€ì§ì„ê¸°ìˆ ê³¼ìŠ¤í¬ì¸ ì˜ê´€ê³„íŒŒì•…í•˜ê¸°',
        'ê¸°ë³¸ì›€ì§ì„ê¸°ìˆ ì˜ì¢…ë¥˜íŒŒì•…í•˜ê³ ì‹œë„í•˜ê¸°',
        'ìŠ¤í¬ì¸ ìœ í˜•ë³„ì›€ì§ì„ê¸°ìˆ ì¢…ë¥˜íŒŒì•…í•˜ê¸°',
        'ìŠ¤í¬ì¸ ìœ í˜•ë³„ì›€ì§ì„ê¸°ìˆ ì‹œë„í•˜ê¸°',
        'ì•ˆì „í•˜ê²Œì›€ì§ì´ê¸°'
      ],
      g56: [
        'ê¸°ìˆ í˜•ì „ëµí˜•ìƒíƒœí˜•ìŠ¤í¬ì¸ ì˜ìœ í˜•íŒŒì•…í•˜ê¸°',
        'ê¸°ìˆ í˜•ì „ëµí˜•ìƒíƒœí˜•ìŠ¤í¬ì¸ ì˜ìœ í˜•ë³„ì›€ì§ì„ê¸°ìˆ ì‘ìš©ë°©ë²•í™œìš©í•˜ê¸°',
        'ê¸°ìˆ í˜•ì „ëµí˜•ìƒíƒœí˜•ìŠ¤í¬ì¸ ì˜ê¸°ë³¸ì „ëµì ìš©í•˜ê¸°',
        'ì•ˆì „í•˜ê²Œí™œë™í•˜ê¸°'
      ]
    },
    v: {
      g34: [
        'ì›€ì§ì„ìˆ˜í–‰ì˜ìì‹ ê°ê³¼ì ê·¹ì„±',
        'ìµœì„ ì„ë‹¤í•˜ëŠ”íƒœë„',
        'ê²Œì„ê·œì¹™ì¤€ìˆ˜',
        'ìŠ¤í¬ì¸ í™˜ê²½ì—ëŒ€í•œê°œë°©ì„±',
        'ìŠ¤í¬ì¸ í™œë™ì°¸ì—¬ì˜ì ê·¹ì„±'
      ],
      g56: [
        'ëª©í‘œë‹¬ì„±ì˜ì§€',
        'ìƒëŒ€ê¸°ìˆ ì¸ì •',
        'íŒ€ì›ê³¼ì˜í˜‘ë ¥',
        'êµ¬ì„±ì›ë°°ë ¤',
        'ìŠ¤í¬ì¸ í™˜ê²½ì„ì•„ë¼ëŠ”íƒœë„',
        'ìŠ¤í¬ì¸ í™˜ê²½ì—ê°ì‚¬í•˜ëŠ”íƒœë„'
      ]
    }
  },

  /* (3) í‘œí˜„ */
  {
    k: {
      g34: [
        'í‘œí˜„í™œë™ê³¼ì›€ì§ì„ê¸°ìˆ ',
        'ê¸°ë³¸ì›€ì§ì„ê¸°ìˆ ì˜í‘œí˜„ë°©ë²•'
      ],
      g56: [
        'í‘œí˜„í™œë™ì˜ìœ í˜•',
        'í‘œí˜„í™œë™ì˜ìœ í˜•ë³„ì›€ì§ì„ê¸°ìˆ ì‘ìš©ë°©ë²•',
        'í‘œí˜„í™œë™ì˜ìœ í˜•ë³„ì›€ì§ì„ê¸°ìˆ êµ¬ì„±'
      ]
    },
    p: {
      g34: [
        'í‘œí˜„í™œë™ì˜ì›€ì§ì„ê¸°ìˆ íŒŒì•…í•˜ê³ ì‹œë„í•˜ê¸°',
        'ë‹¤ì–‘í•œë°©ë²•ìœ¼ë¡œì›€ì§ì„ê¸°ìˆ í‘œí˜„í•˜ê¸°'
      ],
      g56: [
        'í‘œí˜„í™œë™ì˜ìœ í˜•íŒŒì•…í•˜ê¸°',
        'í‘œí˜„í™œë™ì˜ìœ í˜•ë³„ì›€ì§ì„ê¸°ìˆ ì‘ìš©ë°©ë²•í™œìš©í•˜ê¸°',
        'í‘œí˜„í™œë™ì˜ìœ í˜•ë³„ì›€ì§ì„ê¸°ìˆ êµ¬ì„±í•˜ê³ ë°œí‘œí•˜ê¸°'
      ]
    },
    v: {
      g34: [
        'ì›€ì§ì„í‘œí˜„ì—ëŒ€í•œí˜¸ê¸°ì‹¬',
        'ì›€ì§ì„í‘œí˜„ì—ëŒ€í•œê°ìˆ˜ì„±'
      ],
      g56: [
        'ë‹¤ì–‘í•œí‘œí˜„í™œë™ìœ í˜•ì—ëŒ€í•œìˆ˜ìš©ì íƒœë„',
        'ì›€ì§ì„í‘œí˜„ì˜ì‹¬ë¯¸ì„±ì¶”êµ¬'
      ]
    }
  }
];
/* ===============================
   ğŸµ ìŒì•… ê°œì²´í‘œ (correct / wrong ë°°ê²½ ë²„ì „) - ìˆ˜ì •ë³¸(ë¦¬ë“¬ 56 ì¤„ìˆ˜ -1)
   âœ… 56í•™ë…„ ì •ë‹µ 15ê°œ "ì „ë¶€" ë°˜ì˜:
   - ë¦¬ë“¬(5ì¹¸)ê¹Œì§€ë§Œ ë¦¬ë“¬ì— ë„£ê³ ,
   - ë‚¨ëŠ” 1ê°œ(ìŒì´ë¦„ ê³„ì´ë¦„ ìœ¨ëª…)ëŠ” ê°€ë½ ì²« ì¹¸ìœ¼ë¡œ ì´ë™
=============================== */
document.addEventListener("DOMContentLoaded", function(){

  const musicWrap = document.getElementById('music-objectTables');
  if(!musicWrap) return;

  musicWrap.innerHTML = `
  <div class="nt-title"></div>

  <table class="subject-table">
    <tr>
      <th rowspan="2">ë²”ì£¼</th>
      <th colspan="2">ë‚´ìš©ìš”ì†Œ</th>
    </tr>
    <tr>
      <th>3~4í•™ë…„</th>
      <th>5~6í•™ë…„</th>
    </tr>

    <tr>
      <td>ë¦¬ë“¬</td>
      <td>${'<textarea></textarea>'.repeat(6)}</td>
      <td>${'<textarea></textarea>'.repeat(5)}</td> <!-- âœ… 6 â†’ 5 -->
    </tr>

    <tr>
      <td>ê°€ë½</td>
      <td>${'<textarea></textarea>'.repeat(3)}</td>
      <td>${'<textarea></textarea>'.repeat(4)}</td>
    </tr>

    <tr>
      <td>í™”ì„±</td>
      <td><textarea></textarea></td>
      <td>${'<textarea></textarea>'.repeat(2)}</td>
    </tr>

    <tr>
      <td>í˜•ì‹</td>
      <td><textarea></textarea></td>
      <td><textarea></textarea></td>
    </tr>

    <tr>
      <td>ì…ˆì—¬ë¦¼</td>
      <td><textarea></textarea></td>
      <td><textarea></textarea></td>
    </tr>

    <tr>
      <td>ë¹ ë¥´ê¸°</td>
      <td><textarea></textarea></td>
      <td><textarea></textarea></td>
    </tr>

    <tr>
      <td>ìŒìƒ‰</td>
      <td><textarea></textarea></td>
      <td><textarea></textarea></td>
    </tr>
  </table>

  <div class="actions-bar">
    <button class="grade btn-grade">ì±„ì </button>
    <button class="grade btn-answer">ì •ë‹µ</button>
    <button class="clear btn-clear">ì§€ìš°ê¸°</button>
    <div class="score">ì •ë‹µë¥  : 0%</div>
  </div>
  `;

  /* ===== âœ… ì •ë‹µ ë°ì´í„° ===== */
  const musicObjectAnswers = {
    // 3~4í•™ë…„(14ì¹¸) = ë¦¬ë“¬6 + ê°€ë½3 + í™”ì„±1 + í˜•ì‹1 + ì…ˆì—¬ë¦¼1 + ë¹ ë¥´ê¸°1 + ìŒìƒ‰1
    g34: [
      "ë°• ë°•ì",
      "ì¥ë‹¨ ì¥ë‹¨ì˜ ì„¸",
      "ìŒì˜ ê¸¸ê³  ì§§ìŒ",
      "ê°„ë‹¨í•œ ë¦¬ë“¬ê¼´",
      "ì¥ë‹¨ê¼´",
      "ë§ë¶™ì„ìƒˆ",
      "ìŒì˜ ë†’ê³  ë‚®ìŒ",
      "ì°¨ë¡€ê°€ê¸°ì™€ ë›°ì–´ê°€ê¸°",
      "ì‹œê¹€ìƒˆ",
      "ì†Œë¦¬ì˜ ì–´ìš¸ë¦¼",
      "í˜•ì‹(ë©”ê¸°ê³  ë°›ëŠ” í˜•ì‹, abë“±)",
      "ì…ˆì—¬ë¦¼",
      "ë¹ ë¥´ê¸°, í•œë°°",
      "ëª©ì†Œë¦¬, ë¬¼ì²´ ì†Œë¦¬, íƒ€ì•…ê¸°ì˜ ìŒìƒ‰"
    ],

    // 5~6í•™ë…„(15ì¹¸) = ë¦¬ë“¬5 + ê°€ë½4 + í™”ì„±2 + í˜•ì‹1 + ì…ˆì—¬ë¦¼1 + ë¹ ë¥´ê¸°1 + ìŒìƒ‰1
    // âœ… ë„¤ê°€ ì¤€ 15ê°œë¥¼ ëª¨ë‘ ë„£ê¸° ìœ„í•´ "ìŒì´ë¦„ ê³„ì´ë¦„ ìœ¨ëª…"ì„ ê°€ë½ ì²« ì¹¸ìœ¼ë¡œ ë°°ì¹˜
    g56: [
      // ë¦¬ë“¬(5ì¹¸)
      "ë°• ë°•ì",
      "ì¥ë‹¨ ì¥ë‹¨ì˜ì„¸",
      "ì—¬ëŸ¬ê°€ì§€ ë¦¬ë“¬ê¼´",
      "ì¥ë‹¨ê¼´",
      "ë§ë¶™ì„ìƒˆ",

      // ê°€ë½(4ì¹¸)  â† ì—¬ê¸° ì²« ì¹¸ì— "ìŒì´ë¦„ ê³„ì´ë¦„ ìœ¨ëª…" ë“¤ì–´ê°
      "ìŒì´ë¦„ ê³„ì´ë¦„ ìœ¨ëª…",
      "ì¥ìŒê³„ ë‹¨ìŒê³„",
      "ì—¬ëŸ¬ì§€ì—­ì˜ í† ë¦¬",
      "ì‹œê¹€ìƒˆ",

      // í™”ì„±(2ì¹¸)
      "ì£¼ìš” 3í™”ìŒ",
      "ë‹¤ì–‘í•œ ì†Œë¦¬ì˜ ì–´ìš¸ë¦¼",

      // í˜•ì‹(1ì¹¸)
      "í˜•ì‹(ê¸´ìì§„ í˜•ì‹, ì‹œì¡° í˜•ì‹, aba, ABë“±)",

      // ì…ˆì—¬ë¦¼(1ì¹¸)
      "ì…ˆì—¬ë¦¼ì˜ ë³€í™”",

      // ë¹ ë¥´ê¸°(1ì¹¸)
      "ë¹ ë¥´ê¸°ì˜ ë³€í™”, í•œë°°ì˜ ë³€í™”",

      // ìŒìƒ‰(1ì¹¸)
      "ê´€ì•…ê¸°, í˜„ì•…ê¸°ì˜ ìŒìƒ‰"
    ]
  };

  const table = musicWrap.querySelector('table');
  const scoreBox = musicWrap.querySelector('.score');

  const btnGrade  = musicWrap.querySelector('.btn-grade');
  const btnAnswer = musicWrap.querySelector('.btn-answer');
  const btnClear  = musicWrap.querySelector('.btn-clear');

  function norm(t){
    return (t || '').replace(/\s+/g,'').trim();
  }
  function clearMark(el){
    el.classList.remove('correct','wrong');
  }
  function setScore(correct, total){
    const pct = total ? Math.round(correct/total*100) : 0;
    scoreBox.textContent = `ì •ë‹µë¥  : ${correct} / ${total} (${pct}%)`;
  }

  // âœ… ì™¼ìª½(3~4), ì˜¤ë¥¸ìª½(5~6) textareaë¥¼ "ë”°ë¡œ" ëª¨ìœ¼ê¸°
  function getSideTextareas(){
    const rows = Array.from(table.querySelectorAll('tr')).slice(2); // í—¤ë” 2ì¤„ ì œì™¸
    const left = [];
    const right = [];

    rows.forEach(r=>{
      const tds = r.querySelectorAll('td');
      if(tds.length < 3) return;
      left.push(...tds[1].querySelectorAll('textarea'));
      right.push(...tds[2].querySelectorAll('textarea'));
    });

    return { left, right };
  }

  /* ğŸ”µ ì±„ì  */
  btnGrade.onclick = function(){
    const { left, right } = getSideTextareas();

    let correct = 0;
    let total = 0;

    left.forEach((ta,i)=>{
      clearMark(ta);
      const ans = musicObjectAnswers.g34[i] || '';
      if(!ans) return;
      total++;
      if(norm(ta.value) === norm(ans)){
        ta.classList.add('correct'); correct++;
      }else{
        ta.classList.add('wrong');
      }
    });

    right.forEach((ta,i)=>{
      clearMark(ta);
      const ans = musicObjectAnswers.g56[i] || '';
      if(!ans) return;
      total++;
      if(norm(ta.value) === norm(ans)){
        ta.classList.add('correct'); correct++;
      }else{
        ta.classList.add('wrong');
      }
    });

    setScore(correct, total);
  };

  /* ğŸŸ¢ ì •ë‹µ */
  btnAnswer.onclick = function(){
    const { left, right } = getSideTextareas();

    left.forEach((ta,i)=>{
      clearMark(ta);
      const ans = musicObjectAnswers.g34[i] || '';
      ta.value = ans;
      if(ans) ta.classList.add('correct');
    });

    right.forEach((ta,i)=>{
      clearMark(ta);
      const ans = musicObjectAnswers.g56[i] || '';
      ta.value = ans;
      if(ans) ta.classList.add('correct');
    });

    const total = musicObjectAnswers.g34.length + musicObjectAnswers.g56.length;
    scoreBox.textContent = `ì •ë‹µë¥  : ${total} / ${total} (100%)`;
  };

  /* âšª ì§€ìš°ê¸° */
  btnClear.onclick = function(){
    const { left, right } = getSideTextareas();

    [...left, ...right].forEach(ta=>{
      ta.value = '';
      clearMark(ta);
    });

    scoreBox.textContent = 'ì •ë‹µë¥  : 0%';
  };

});
/* ===============================
   ìŒì•… ë‚´ì²´í‘œ (3ê°œ)
=============================== */
const musicConfig = [
  { title:'í‘œí˜„', k:4, p:3, v:2 },
  { title:'ê°ìƒ', k:5, p:3, v:2 },
  { title:'ì°½ì‘', k:4, p:3, v:2 }
];

let musicBuilt = false;

function buildMusicTables(){
  if(musicBuilt) return;
  musicBuilt = true;

  const container = document.getElementById('musicTables');
  if(!container) return;

  container.innerHTML = '';

  musicConfig.forEach((c,i)=>{
    container.innerHTML += `
  <div class="music-block">
    <div class="nt-title">(${i+1}) ${c.title}</div>

    <table class="subject-table">
      <tr>
        <th>í•µì‹¬ ì•„ì´ë””ì–´</th>
        <td class="idea-block"></td>
      </tr>
      <tr>
        <th rowspan="2">ë²”ì£¼</th>
        <td class="center">ë‚´ìš©ìš”ì†Œ</td>
      </tr>
      <tr>
        <td class="center sub-head">
          <span>3~4í•™ë…„êµ°</span>
          <span>5~6í•™ë…„êµ°</span>
        </td>
      </tr>
      <tr>
        <th>ì§€ì‹Â·ì´í•´</th>
        <td class="rows two-col">
          <div class="col g34">${'<textarea></textarea>'.repeat(c.k)}</div>
          <div class="col g56">${'<textarea></textarea>'.repeat(c.k)}</div>
        </td>
      </tr>
      <tr>
        <th>ê³¼ì •Â·ê¸°ëŠ¥</th>
        <td class="rows two-col">
          <div class="col g34">${'<textarea></textarea>'.repeat(c.p)}</div>
          <div class="col g56">${'<textarea></textarea>'.repeat(c.p)}</div>
        </td>
      </tr>
      <tr>
        <th>ê°€ì¹˜Â·íƒœë„</th>
        <td class="rows two-col">
          <div class="col g34">${'<textarea></textarea>'.repeat(c.v)}</div>
          <div class="col g56">${'<textarea></textarea>'.repeat(c.v)}</div>
        </td>
      </tr>
    </table>

    <div class="music-btns">
      <button onclick="gradeMusic(this)">ì±„ì </button>
      <button onclick="showMusicAnswer(this, ${i})">ì •ë‹µ</button>
      <button onclick="clearMusic(this)">ì§€ìš°ê¸°</button>
    </div>

    <div class="score">ì •ë‹µë¥  : 0%</div>
  </div>
  `;
});
}

/* ===============================
   ğŸµ ìŒì•… ë‚´ì²´í‘œ ì •ë‹µ ë°ì´í„°
=============================== */

const musicAnswers = [

  /* (1) í‘œí˜„ */
  {
    k:{
      g34: "ìƒí™œ ì†ì˜ ìŒì•…/ê¸°ì´ˆì ì¸ ìŒì•… ìš”ì†Œ/ìì„¸ì™€ ì£¼ë²•/ëŠë‚Œ, ì—¬ëŸ¬ì†Œë¦¬",
      g56: "ê°„ë‹¨í•œ ì•…ê³¡ì˜ ì—°ì£¼ í˜•íƒœ/ìŒì•… ìš”ì†Œ/ì£¼ë²•ê³¼ í‘œí˜„ê¸°ë²•/ì–´ìš¸ë¦¼, ì—¬ëŸ¬ ì•…ê¸°"
    },
    p:{
      g34: "ë…¸ë˜ë¶€ë¥´ê±°ë‚˜ ì•…ê¸° ì—°ì£¼í•˜ê¸°/ì‹ ì²´ë¡œ í‘œí˜„í•˜ê³  ë†€ì´í•˜ê¸°/ë°œí‘œí•˜ê³  ì´ì•¼ê¸°í•˜ê¸°",
      g56: "ë…¸ë˜ë¶€ë¥´ê±°ë‚˜ ì•…ê¸° ì—°ì£¼í•˜ê¸°/ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ í‘œí˜„í•˜ê¸°/ë°œí‘œí•˜ê³  ëŒì•„ë³´ê¸°"
    },
    v:{
      g34: "ì—°ì£¼ë¥¼ ì¦ê¸°ëŠ” íƒœë„/ì—°ì£¼ì— ëŒ€í•œ ê´€ì‹¬",
      g56: "ìŒì•…ìœ¼ë¡œ í•¨ê»˜í•˜ëŠ” íƒœë„/ìŒì•… ì¤€ë¹„ì™€ ì°¸ì—¬"
    }
  },

  /* (2) ê°ìƒ */
  {
    k:{
      g34: "ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ìŒì•…/ì§€ì—­ì˜ ìŒì•… êµ­ê°€ìœ ì‚°/ê¸°ì´ˆì ì¸ ìŒì•…ìš”ì†Œ/ìŒì•…ì  íŠ¹ì§•/ëŠë‚Œ ë¶„ìœ„ê¸° ì“°ì„",
      g56: "ë‹¤ì–‘í•œ ì¢…ë¥˜ì™€ ë¬¸í™”ê¶Œì˜ ìŒì•…/ìš°ë¦¬ë‚˜ë¼ ìŒì•… êµ­ê°€ìœ ì‚°/ìŒì•…ìš”ì†Œ/ìŒì•…ì  íŠ¹ì§• ìŒì•…ì˜ ê°„ë‹¨í•œ êµ¬ì„±/ëŠë‚Œ ë°°ê²½ í™œìš©"
    },
    p:{
      g34: "ë°˜ì‘í•˜ë©° ë“£ê¸°/íƒìƒ‰í•˜ê³  ë°œê²¬í•˜ê¸°/ë¬˜ì‚¬í•˜ê±°ë‚˜ ì´ì•¼ê¸°í•˜ê¸°",
      g56: "ê°ì§€í•˜ë©° ë“£ê¸°/ì¸ì‹í•˜ê³  êµ¬ë³„í•˜ê¸°/ì„¤ëª…í•˜ê¸°"
    },
    v:{
      g34: "ì†Œë¦¬ì™€ ìŒì•…ì„ ì¦ê¸°ëŠ” íƒœë„/ìŒì•…ì— ëŒ€í•œ í˜¸ê¸°ì‹¬",
      g56: "ìŒì•…ì˜ ì•„ë¦„ë‹¤ì›€ì— ëŒ€í•œ ì¸ì‹/ìŒì•…ì— ëŒ€í•œ ê³µê°"
    }
  },

  /* (3) ì°½ì‘ */
  {
    k:{
      g34: "ì†Œë¦¬ì™€ ìŒì•…/ê¸°ì´ˆì ì¸ ìŒì•…ìš”ì†Œ/ê°„ë‹¨í•œ ì•…ë³´/ëŠë‚Œ ìƒìƒ",
      g56: "ê°„ë‹¨í•œ ìŒì•…/ìŒì•…ìš”ì†Œ/ê¸°ì´ˆì ì¸ ê¸°ë³´ ìŒì•… ë§¤ì²´/ëŠë‚Œ ì•„ì´ë””ì–´"
    },
    p:{
      g34: "ì¦‰í¥ì ìœ¼ë¡œ í‘œí˜„í•˜ê¸°/ë¶€ë¶„ì ìœ¼ë¡œ ë°”ê¾¸ê¸°/ëª¨ë°©í•˜ì—¬ ë‚˜íƒ€ë‚´ê¸°",
      g56: "ë– ì˜¬ë¦¬ë©° í‘œí˜„í•˜ê¸°/ê°„ë‹¨í•œ ì¡°ê±´ì— ë”°ë¼ ë°”ê¾¸ê¸°/í™œìš©í•˜ì—¬ ë§Œë“¤ê¸°"
    },
    v:{
      g34: "ìŒì•…ì— ëŒ€í•œ í¥ë¯¸/ìŒì•…ì˜ ìƒˆë¡œì›€ì„ ì¦ê¸°ëŠ” íƒœë„",
      g56: "ìŒì•…ì— ëŒ€í•œ ìì‹ ê°/ìŒì•…ì— ëŒ€í•œ ì—´ë¦° íƒœë„"
    }
  }

];

/* ğŸ”¥ ìŒì•… ë‚´ì²´í‘œ íƒ­ í´ë¦­ ì‹œ ìƒì„± */
const _show = show;
show = function(id){
  _show(id);
  if(id === 'music'){
    buildMusicTables();
  }
};
function getMusicTable(btn){
  return btn.closest('.music-block').querySelector('table');
}
function fillAnswers(textareas, answerStr){
  const answers = answerStr.split('/').map(s => s.trim());
  textareas.forEach((ta, i) => {
    ta.value = answers[i] || '';
  });
}

function showMusicAnswer(btn, idx){
  const table = getMusicTable(btn);
  const ans = musicAnswers[idx];
  const rows = table.querySelectorAll('tr');

  // âœ… ì •í™•í•œ í–‰ ë²ˆí˜¸
  const KNOW = 3; // ì§€ì‹Â·ì´í•´
  const PROC = 4; // ê³¼ì •Â·ê¸°ëŠ¥
  const VAL  = 5; // ê°€ì¹˜Â·íƒœë„

  // ì§€ì‹Â·ì´í•´
  fillAnswers(rows[KNOW].querySelectorAll('.g34 textarea'), ans.k.g34);
  fillAnswers(rows[KNOW].querySelectorAll('.g56 textarea'), ans.k.g56);

  // ê³¼ì •Â·ê¸°ëŠ¥
  fillAnswers(rows[PROC].querySelectorAll('.g34 textarea'), ans.p.g34);
  fillAnswers(rows[PROC].querySelectorAll('.g56 textarea'), ans.p.g56);

  // ê°€ì¹˜Â·íƒœë„
  fillAnswers(rows[VAL].querySelectorAll('.g34 textarea'), ans.v.g34);
  fillAnswers(rows[VAL].querySelectorAll('.g56 textarea'), ans.v.g56);
}
function clearMusic(btn){
  const block = btn.closest('.music-block');
  const table = block.querySelector('table');

  table.querySelectorAll('textarea').forEach(t=>{
    t.value = '';
    t.classList.remove('correct','wrong');
  });

  block.querySelector('.score').textContent = 'ì •ë‹µë¥  : 0%';
}
function checkAnswers(textareas, answerStr){
  const answers = answerStr.split('/').map(s => s.trim());
  let correct = 0;

  textareas.forEach((ta, i)=>{
    const user = ta.value.trim();
    const answer = answers[i] || '';

    ta.classList.remove('correct','wrong');

    if(!user) return;

    if(user === answer){
      ta.classList.add('correct');
      correct++;
    }else{
      ta.classList.add('wrong');
    }
  });

  return {
    correct,
    total: answers.length
  };
}
function gradeMusic(btn){
  const block = btn.closest('.music-block');
  const table = block.querySelector('table');
  const idx = [...document.querySelectorAll('.music-block')].indexOf(block);
  const ans = musicAnswers[idx];
  const rows = table.querySelectorAll('tr');

  const KNOW = 3;
  const PROC = 4;
  const VAL  = 5;

  let total = 0;
  let correct = 0;

  // ì§€ì‹Â·ì´í•´
  let r;
  r = checkAnswers(rows[KNOW].querySelectorAll('.g34 textarea'), ans.k.g34);
  correct += r.correct; total += r.total;
  r = checkAnswers(rows[KNOW].querySelectorAll('.g56 textarea'), ans.k.g56);
  correct += r.correct; total += r.total;

  // ê³¼ì •Â·ê¸°ëŠ¥
  r = checkAnswers(rows[PROC].querySelectorAll('.g34 textarea'), ans.p.g34);
  correct += r.correct; total += r.total;
  r = checkAnswers(rows[PROC].querySelectorAll('.g56 textarea'), ans.p.g56);
  correct += r.correct; total += r.total;

  // ê°€ì¹˜Â·íƒœë„
  r = checkAnswers(rows[VAL].querySelectorAll('.g34 textarea'), ans.v.g34);
  correct += r.correct; total += r.total;
  r = checkAnswers(rows[VAL].querySelectorAll('.g56 textarea'), ans.v.g56);
  correct += r.correct; total += r.total;

  block.querySelector('.score').textContent =
    `ì •ë‹µë¥  : ${correct} / ${total} (${Math.round(correct/total*100)}%)`;
}
/* ===============================
   âœ… ì²´ìœ¡ ë‚´ì²´í‘œ: correct/wrong í´ë˜ìŠ¤ ë²„ì „
   - textarea + í•µì‹¬ì•„ì´ë””ì–´ ë¹ˆì¹¸(input.blank) ëª¨ë‘ ë°°ê²½ìƒ‰ ì ìš©
   - ì •ë‹µ/ì±„ì /ì§€ìš°ê¸° + ì •ë‹µë¥  ìœ ì§€
=============================== */

function getPETableFromBtn(btn){
  let el = btn.previousElementSibling;
  while (el && el.tagName !== 'TABLE') el = el.previousElementSibling;
  return el;
}

function peClearMark(el){
  el.classList.remove('correct','wrong');
  el.style.color = '';
  el.style.background = '';
}

function peSetScoreFromBtn(btn, correct, total){
  // ë²„íŠ¼ë“¤ ë’¤ì— ìˆëŠ” .score ì°¾ê¸°
  let el = btn.nextElementSibling;
  while(el && !el.classList.contains('score')) el = el.nextElementSibling;
  if(!el) return;

  const percent = total ? Math.round(correct/total*100) : 0;
  el.textContent = `ì •ë‹µë¥  : ${correct} / ${total} (${percent}%)`;
}

function gradePE(btn, idx){
  const table = getPETableFromBtn(btn);
  const a = peAnswers[idx];
  if(!table || !a) return;

  let correct = 0, total = 0;

  // âœ… í–‰ ìœ„ì¹˜: 0=í•µì‹¬ì•„ì´ë””ì–´, 1=ë²”ì£¼í—¤ë”, 2=ë‚´ìš©ìš”ì†Œí—¤ë”, 3=ì§€ì‹, 4=ê³¼ì •, 5=ê°€ì¹˜
  const rows = table.querySelectorAll('tr');
  const rowMap = { k:3, p:4, v:5 };

  ['k','p','v'].forEach(key=>{
    const row = rows[rowMap[key]];
    if(!row) return;

    const left = row.children[1].querySelectorAll('textarea');  // 3-4
    const right = row.children[2].querySelectorAll('textarea'); // 5-6

    a[key].g34.forEach((ans,i)=>{
      const ta = left[i];
      if(!ta) return;
      total++;
      peClearMark(ta);

      if(norm(ta.value) === norm(ans)){
        ta.classList.add('correct');
        correct++;
      }else{
        ta.classList.add('wrong');
      }
    });

    a[key].g56.forEach((ans,i)=>{
      const ta = right[i];
      if(!ta) return;
      total++;
      peClearMark(ta);

      if(norm(ta.value) === norm(ans)){
        ta.classList.add('correct');
        correct++;
      }else{
        ta.classList.add('wrong');
      }
    });
  });

  // âœ… í•µì‹¬ ì•„ì´ë””ì–´ ë¹ˆì¹¸(.blank) ì±„ì 
  table.querySelectorAll('.blank').forEach(b=>{
    const key = b.dataset.key;
    const list = peBlankAnswers[key];
    if(!list) return;

    total++;
    peClearMark(b);

    const ok = list.some(ans => norm(ans) === norm(b.value));
    if(ok){
      b.classList.add('correct');
      correct++;
    }else{
      b.classList.add('wrong');
    }
  });

  peSetScoreFromBtn(btn, correct, total);
}

function showPEAnswer(btn, idx){
  const table = getPETableFromBtn(btn);
  const a = peAnswers[idx];
  if(!table || !a) return;

  const rows = table.querySelectorAll('tr');
  const rowMap = { k:3, p:4, v:5 };

  // â‘  ë‚´ìš©ìš”ì†Œ ì •ë‹µ ì±„ìš°ê¸°
  ['k','p','v'].forEach(key=>{
    const row = rows[rowMap[key]];
    if(!row) return;

    const left = row.children[1].querySelectorAll('textarea');
    const right = row.children[2].querySelectorAll('textarea');

    a[key].g34.forEach((ans,i)=>{
      const ta = left[i];
      if(!ta) return;
      ta.value = ans;
      peClearMark(ta);
      ta.classList.add('correct');
    });

    a[key].g56.forEach((ans,i)=>{
      const ta = right[i];
      if(!ta) return;
      ta.value = ans;
      peClearMark(ta);
      ta.classList.add('correct');
    });
  });

  // â‘¡ í•µì‹¬ ì•„ì´ë””ì–´ ë¹ˆì¹¸ ì •ë‹µ ì±„ìš°ê¸°(ì²« ë²ˆì§¸ ì •ë‹µìœ¼ë¡œ)
  let blankCount = 0;
  table.querySelectorAll('.blank').forEach(b=>{
    const key = b.dataset.key;
    const list = peBlankAnswers[key];
    if(!list) return;

    b.value = list[0];
    peClearMark(b);
    b.classList.add('correct');
    blankCount++;
  });

  // â‘¢ 100% í‘œì‹œ(ì •ë‹µ ê°œìˆ˜ ê¸°ì¤€)
  let total = 0;
  total += a.k.g34.length + a.k.g56.length;
  total += a.p.g34.length + a.p.g56.length;
  total += a.v.g34.length + a.v.g56.length;
  total += blankCount;

  peSetScoreFromBtn(btn, total, total);
}

function clearPE(btn){
  const table = getPETableFromBtn(btn);
  if(!table) return;

  table.querySelectorAll('textarea').forEach(t=>{
    t.value = '';
    peClearMark(t);
  });

  table.querySelectorAll('.blank').forEach(b=>{
    b.value = '';
    peClearMark(b);
  });

  peSetScoreFromBtn(btn, 0, 0);
}
/* =========================================================
   âœ… ë¯¸ìˆ  ë‚´ì²´í‘œ: í‘œ ìƒì„± + ì •ë‹µë°ì´í„° + ì±„ì /ì •ë‹µ/ì§€ìš°ê¸° (ì¶©ëŒë°©ì§€)
========================================================= */

/* 1) ì„¤ì •(ì¤„ ìˆ˜) */
const artNTConfig = [
  { title: '(1) ë¯¸ì  ì²´í—˜', k:[3,3], p:[3,3], v:[2,2] },
  { title: '(2) í‘œí˜„',     k:[3,3], p:[4,4], v:[2,2] },
  { title: '(3) ê°ìƒ',     k:[3,3], p:[3,3], v:[2,2] }
];

/* 2) í•µì‹¬ ì•„ì´ë””ì–´(ë¹ˆì¹¸ í¬í•¨ HTML) */
function artNTIdeaHTML(i){
  if(i === 0){
    return `
      â‹… ë¯¸ì  ì²´í—˜ì€ ê°ê°ì„ ê¹¨ì›Œ
      <input class="blank artNT-blank" data-key="art1-1">ë¥¼/ì„ í’ë¶€í•˜ê²Œ í•˜ë©° ë¯¸ì  ê°€ì¹˜ë¥¼ ë°œê²¬í•˜ë„ë¡ í•œë‹¤.<br>
      â‹… <input class="blank artNT-blank" data-key="art1-2">ê³¼/ì™€
      <input class="blank artNT-blank" data-key="art1-3">ë¥¼/ì„ ê´€ì°°í•˜ê³  ì§€ê°í•˜ëŠ” ê²½í—˜ì€ ì•ì„ í™•ì¥í•˜ê³  ìì‹ ì„ ì„±ì°°í•˜ê²Œ í•œë‹¤.<br>
      â‹… ì´ë¯¸ì§€ì— ëŒ€í•œ ë¹„íŒì  ì´í•´ëŠ”
      <input class="blank artNT-blank" data-key="art1-4">ê³¼/ì™€
      <input class="blank artNT-blank" data-key="art1-5">ì˜ í† ëŒ€ê°€ ëœë‹¤.
    `;
  }
  if(i === 1){
    return `
      â‹… í‘œí˜„ì€ ìì‹ ì˜ ëŠë‚Œê³¼ ìƒê°ì„ ì‹œê°í™”í•˜ëŠ”
      <input class="blank artNT-blank" data-key="art2-1">ê³¼/ì™€
      <input class="blank artNT-blank" data-key="art2-2">ì˜ ìˆœí™˜ ê³¼ì •ìœ¼ë¡œ ì´ë£¨ì–´ì§„ë‹¤.<br>
      â‹… <input class="blank artNT-blank" data-key="art2-3">ëŠ”/ì€ ì•„ì´ë””ì–´ì™€ ì£¼ì œë¥¼ ë°œì „ì‹œí‚¤ê³  í‘œí˜„ì˜ í† ëŒ€ê°€ ëœë‹¤.<br>
      â‹… ì‘í’ˆ ì œì‘ì€ í‘œí˜„ ì¬ë£Œì™€ ë°©ë²•, ì¡°í˜• ìš”ì†Œì™€ ì›ë¦¬ ë“±ì„ ì„ íƒí•˜ê³  í™œìš©í•˜ì—¬ ì°½ì˜ì ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê³¼ì •ì„ í†µí•´
      <input class="blank artNT-blank" data-key="art2-4">ë¥¼/ì„ ê²½í—˜í•˜ê²Œ í•œë‹¤.
    `;
  }
  return `
    â‹… ê°ìƒì€ ë‹¤ì–‘í•œ ì‚¶ê³¼ ë¬¸í™”ê°€ ë°˜ì˜ëœ ë¯¸ìˆ ê³¼ì˜ ë§Œë‚¨ìœ¼ë¡œ
    <input class="blank artNT-blank" data-key="art3-1">ê³¼/ì™€
    <input class="blank artNT-blank" data-key="art3-2">ë¥¼/ì„ ì´í•´í•˜ê²Œ í•œë‹¤.<br>
    â‹… ì‘í’ˆì˜ ë‚´ìš©ê³¼ í˜•ì‹ì— ê´€í•œ
    <input class="blank artNT-blank" data-key="art3-3">ê³¼/ì™€
    <input class="blank artNT-blank" data-key="art3-4">ëŠ”/ì€ ë¯¸ì  íŒë‹¨ ëŠ¥ë ¥ì„ ë†’ì¸ë‹¤.<br>
    â‹… ê°ìƒì€ ì„œë¡œ ë‹¤ë¥¸ ê´€ì ì„ ì´í•´í•˜ì—¬ ì‚¶ì—ì„œ ë¯¸ìˆ  ë¬¸í™”ì˜
    <input class="blank artNT-blank" data-key="art3-5">ë¥¼/ì„ ì¡´ì¤‘í•˜ë„ë¡ í•œë‹¤.
  `;
}

/* 3) ì •ë‹µ ë°ì´í„° */
// (A) í•µì‹¬ ì•„ì´ë””ì–´ ë¹ˆì¹¸
const artNTBlankAnswers = {
  "art1-1": "ë¯¸ì  ê°ìˆ˜ì„±",
  "art1-2": "ëŒ€ìƒ",
  "art1-3": "í˜„ìƒ",
  "art1-4": "ì‹œê°ì  ì†Œí†µ",
  "art1-5": "ë¬¸í™”ì  ì°¸ì—¬",
  "art2-1": "ì°½ì˜ì  ì‚¬ê³ ",
  "art2-2": "ì„±ì°°",
  "art2-3": "ë‹¤ì–‘í•œ ë°œìƒ",
  "art2-4": "ì˜ˆìˆ ì  ì„±ì·¨",
  "art3-1": "ìì‹ ",
  "art3-2": "ê³µë™ì²´ì˜ ë¬¸í™”",
  "art3-3": "ë§¥ë½ì  ì´í•´",
  "art3-4": "ë¹„í‰",
  "art3-5": "ë‹¤ì›ì  ê°€ì¹˜"
};

// (B) ë‚´ìš©ìš”ì†Œ(3~4 / 5~6)
const artNTAnswers = [
  {
    k:{ g34:["ìì‹ ì˜ ê°ê°","ëŒ€ìƒì˜ íŠ¹ì§•","ìƒí™œ ì† ë¯¸ìˆ "],
        g56:["ê°ê°ê³¼ ë§¤ì²´ì˜ ì—­í• ","ìì‹ ê³¼ í™˜ê²½ì˜ ê´€ê³„","ì´ë¯¸ì§€ì™€ ì˜ë¯¸"] },
    p:{ g34:["ê°ê°ì„ í™œìš©í•˜ì—¬ íƒìƒ‰í•˜ê¸°","ëŒ€ìƒì— ë°˜ì‘í•˜ì—¬ ëŠë‚Œê³¼ ìƒê°ì„ ë‚˜íƒ€ë‚´ê¸°","ë¯¸ìˆ ì˜ íŠ¹ì§•ê³¼ ì—­í• ì„ ë°œê²¬í•˜ê¸°"],
        g56:["ê°ê°ê³¼ ë§¤ì²´ë¥¼ í™œìš©í•˜ì—¬ íƒìƒ‰í•˜ê¸°","ëŒ€ìƒê³¼ ìƒí˜¸ì‘ìš©í•˜ë©° ì˜ë¯¸ ë°œê²¬í•˜ê¸°","ì´ë¯¸ì§€ë¥¼ í•´ì„í•˜ê³  í™œìš©í•˜ê¸°"] },
    v:{ g34:["ë¯¸ì  íƒìƒ‰ì— ëŒ€í•œ í˜¸ê¸°ì‹¬","ë¯¸ìˆ ì˜ ì—­í• ì— ê´€í•œ ê´€ì‹¬"],
        g56:["ì£¼ë³€ í™˜ê²½ì— ëŒ€í•œ ë¯¼ê°ì„±","ë¹„íŒì ìœ¼ë¡œ ì´í•´í•˜ëŠ” íƒœë„"] }
  },
  {
    k:{ g34:["í‘œí˜„ ì£¼ì œ","ê¸°ë³¸ì ì¸ í‘œí˜„ ì¬ë£Œì™€ ìš©êµ¬","ì¡°í˜• ìš”ì†Œì˜ íŠ¹ì§•"],
        g56:["í‘œí˜„ ì£¼ì œì™€ ë°œìƒ","í‘œí˜„ ì¬ë£Œì™€ ìš©êµ¬ ë””ì§€í„¸ ë§¤ì²´","ì¡°í˜• ìš”ì†Œì™€ ì›ë¦¬ì˜ ê´€ê³„"] },
    p:{ g34:["ê´€ì°°ê³¼ ìƒìƒìœ¼ë¡œ ì•„ì´ë””ì–´ë¥¼ ë– ì˜¬ë¦¬ê¸°","í‘œí˜„ ë°©ë²•ì„ ìµíˆê¸°","ì˜ë„ë¥¼ ê°€ì§€ê³  ì‘í’ˆì„ ì œì‘í•˜ê¸°","íƒ€ êµê³¼ì™€ ê´€ë ¨ì§“ê¸°"],
        g56:["ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ ì•„ì´ë””ì–´ë¥¼ ì—°ê²°í•˜ê¸°","í‘œí˜„ ë°©ë²•ì„ íƒìƒ‰í•˜ì—¬ í™œìš©í•˜ê¸°","ê³¼ì •ì„ ëŒì•„ë³´ë©° ì‘í’ˆì„ ë°œì „ì‹œí‚¤ê¸°","íƒ€ êµê³¼ì™€ ìœµí•©í•˜ê¸°"] },
    v:{ g34:["í‘œí˜„ì— ëŒ€í•œ í¥ë¯¸","ìê¸° ì‘í’ˆì„ ì†Œì¤‘íˆ ì—¬ê¸°ëŠ” íƒœë„"],
        g56:["ì£¼ì œ í‘œí˜„ì˜ ì˜ì§€","ììœ ë¡­ê²Œ ì‹œë„í•˜ëŠ” íƒœë„"] }
  },
  {
    k:{ g34:["ë¯¸ìˆ  ì‘í’ˆê³¼ ë¯¸ìˆ ê°€","ë¯¸ìˆ  ì‘í’ˆì˜ íŠ¹ì§•","ë¯¸ìˆ  ì „ì‹œ"],
        g56:["ë¯¸ìˆ  ì‘í’ˆì˜ ë°°ê²½","ë¯¸ìˆ  ì‘í’ˆì˜ ë‚´ìš©ê³¼ í˜•ì‹","ê³µë™ì²´ì˜ ë¯¸ìˆ  ë¬¸í™”"] },
    p:{ g34:["ìì„¸íˆ ë³´ê³  ì§ˆë¬¸í•˜ê¸°","ë¯¸ìˆ  ì‘í’ˆì— ê´€í•œ ëŠë‚Œê³¼ ìƒê°ì„ ì„¤ëª…í•˜ê¸°","ë¯¸ìˆ  ì „ì‹œ ë° í–‰ì‚¬ì— ì°¸ì—¬í•˜ê¸°"],
        g56:["ì‘í’ˆê³¼ ë°°ê²½ì„ ì—°ê²°í•˜ê¸°","ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ ë¶„ì„í•˜ê¸°","ë¯¸ìˆ  ë¬¸í™” í™œë™ì„ ê²½í—˜í•˜ê³  ê³µìœ í•˜ê¸°"] },
    v:{ g34:["ìì‹ ì˜ ê°ìƒ ê´€ì  ì¡´ì¤‘","ë¯¸ìˆ  ë¬¸í™”ì— ê´€í•œ ê´€ì‹¬"],
        g56:["ì„œë¡œ ë‹¤ë¥¸ ê´€ì ì˜ ì¡´ì¤‘","ê³µë™ì²´ ë¬¸í™”ì— ì°¸ì—¬"] }
  }
];

/* ìœ í‹¸ */
function artNTNorm(t){ return (t||"").replace(/\s+/g,'').trim(); }

/* ë²„íŠ¼ ê¸°ì¤€ ë¸”ë¡ ì°¾ê¸° */
function getArtNTBlock(btn){
  const block = btn.closest('.artNT-block');
  return {
    block,
    table: block ? block.querySelector('table') : null,
    score: block ? block.querySelector('.score') : null
  };
}

/* ì±„ì  */
function gradeArtNT(btn, idx){
  const { table, score } = getArtNTBlock(btn);
  if(!table) return;

  const ans = artNTAnswers[idx];
  const rows = table.querySelectorAll('tr');
  const rowMap = { k:3, p:4, v:5 };

  let correct = 0, total = 0;

  ['k','p','v'].forEach(key=>{
    const r = rows[rowMap[key]];
    if(!r) return;

    const left  = r.children[1].querySelectorAll('textarea');
    const right = r.children[2].querySelectorAll('textarea');

    ans[key].g34.forEach((a,i)=>{
      const ta = left[i]; if(!ta) return;
      total++;
      if(artNTNorm(ta.value) === artNTNorm(a)){ ta.style.color='#0d6efd'; correct++; }
      else { ta.style.color='#dc3545'; }
    });

    ans[key].g56.forEach((a,i)=>{
      const ta = right[i]; if(!ta) return;
      total++;
      if(artNTNorm(ta.value) === artNTNorm(a)){ ta.style.color='#0d6efd'; correct++; }
      else { ta.style.color='#dc3545'; }
    });
  });

  table.querySelectorAll('.artNT-blank').forEach(b=>{
    const a = artNTBlankAnswers[b.dataset.key];
    if(!a) return;
    total++;
    if(artNTNorm(b.value) === artNTNorm(a)){ b.style.color='#0d6efd'; correct++; }
    else { b.style.color='#dc3545'; }
  });

  const percent = total ? Math.round(correct/total*100) : 0;
  if(score) score.textContent = `ì •ë‹µë¥  : ${percent}% (${correct}/${total})`;
}

/* ì •ë‹µ */
function showArtNT(btn, idx){
  const { table, score } = getArtNTBlock(btn);
  if(!table) return;

  const ans = artNTAnswers[idx];
  const rows = table.querySelectorAll('tr');
  const rowMap = { k:3, p:4, v:5 };

  ['k','p','v'].forEach(key=>{
    const r = rows[rowMap[key]];
    if(!r) return;

    const left  = r.children[1].querySelectorAll('textarea');
    const right = r.children[2].querySelectorAll('textarea');

    ans[key].g34.forEach((a,i)=>{ if(left[i]){ left[i].value=a; left[i].style.color='#0d6efd'; }});
    ans[key].g56.forEach((a,i)=>{ if(right[i]){ right[i].value=a; right[i].style.color='#0d6efd'; }});
  });

  table.querySelectorAll('.artNT-blank').forEach(b=>{
    const a = artNTBlankAnswers[b.dataset.key];
    if(!a) return;
    b.value = a;
    b.style.color = '#0d6efd';
  });

  // ì´ ë¬¸í•­ìˆ˜
  let total = 0;
  ['k','p','v'].forEach(k=> total += ans[k].g34.length + ans[k].g56.length);
  total += table.querySelectorAll('.artNT-blank').length;

  if(score) score.textContent = `ì •ë‹µë¥  : 100% (${total}/${total})`;
}

/* ì§€ìš°ê¸° */
function clearArtNT(btn){
  const { table, score } = getArtNTBlock(btn);
  if(!table) return;

  table.querySelectorAll('textarea').forEach(t=>{ t.value=''; t.style.color=''; });
  table.querySelectorAll('.artNT-blank').forEach(b=>{ b.value=''; b.style.color=''; });

  if(score) score.textContent = 'ì •ë‹µë¥  : 0%';
}

/* í‘œ ìƒì„± */
document.addEventListener("DOMContentLoaded", function(){
  const container = document.getElementById('artTables');
  if(!container) return;

  // ì¤‘ë³µ ìƒì„± ë°©ì§€
  if(container.dataset.built === "1") return;
  container.dataset.built = "1";

  container.innerHTML = '';

  artNTConfig.forEach((c,i)=>{
    container.innerHTML += `
      <div class="artNT-block">
        <div class="nt-title">${c.title}</div>

        <table class="subject-table">
          <tr>
            <th>í•µì‹¬ ì•„ì´ë””ì–´</th>
            <td colspan="2" class="idea-block">${artNTIdeaHTML(i)}</td>
          </tr>

          <tr>
            <th rowspan="2">ë²”ì£¼</th>
            <th class="center">3-4í•™ë…„êµ°</th>
            <th class="center">5-6í•™ë…„êµ°</th>
          </tr>
          <tr>
            <th>ë‚´ìš©ìš”ì†Œ</th>
            <th>ë‚´ìš©ìš”ì†Œ</th>
          </tr>

          <tr>
            <th>ì§€ì‹Â·ì´í•´</th>
            <td class="rows">${'<textarea></textarea>'.repeat(c.k[0])}</td>
            <td class="rows">${'<textarea></textarea>'.repeat(c.k[1])}</td>
          </tr>

          <tr>
            <th>ê³¼ì •Â·ê¸°ëŠ¥</th>
            <td class="rows">${'<textarea></textarea>'.repeat(c.p[0])}</td>
            <td class="rows">${'<textarea></textarea>'.repeat(c.p[1])}</td>
          </tr>

          <tr>
            <th>ê°€ì¹˜Â·íƒœë„</th>
            <td class="rows">${'<textarea></textarea>'.repeat(c.v[0])}</td>
            <td class="rows">${'<textarea></textarea>'.repeat(c.v[1])}</td>
          </tr>
        </table>

        <button class="grade" onclick="gradeArtNT(this, ${i})">ì±„ì </button>
        <button class="grade" onclick="showArtNT(this, ${i})">ì •ë‹µ</button>
        <button class="clear" onclick="clearArtNT(this)">ì§€ìš°ê¸°</button>
        <div class="score">ì •ë‹µë¥  : 0%</div>
      </div>
    `;
  });
});
/* ===============================
   ì²´ìœ¡ ë‚´ì²´í‘œ (ë¯¸ìˆ  ì–‘ì‹ ê·¸ëŒ€ë¡œ)
=============================== */

const peConfig = [
  { title: '(1) ìš´ë™', 
    k:[4,4], 
    p:[5,5], 
    v:[3,4] 
  },
  { title: '(2) ìŠ¤í¬ì¸ ', 
    k:[3,3], 
    p:[6,4], 
    v:[5,6] 
  },
  { title: '(3) í‘œí˜„', 
    k:[2,3], 
    p:[2,3], 
    v:[2,2] 
  }
];

const peContainer = document.getElementById('peTables');

peConfig.forEach((c,i)=>{
  peContainer.innerHTML += `
  <div class="nt-title">${c.title}</div>
  <table class="subject-table">
    <tr>
      <th>í•µì‹¬ ì•„ì´ë””ì–´</th>
      <td colspan="2">
        â‹… ìš´ë™ì€ <input class="blank" data-key="pe1_1_1">ê³¼/ì™€
<input class="blank" data-key="pe1_1_2">ë¥¼/ì„ ê´€ë¦¬í•˜ëŠ” ì£¼ìš” ë°©ë²•ìœ¼ë¡œ, ìƒì•  ì „ë°˜ì— ê±¸ì³ ê±´ê°•í•œ ì‚¶ì˜ í† ëŒ€ê°€ ëœë‹¤.<br>
â‹… <input class="blank" data-key="pe1_2_1">ëŠ”/ì€ ê±´ê°•ì˜ ê¸°ì´ˆê°€ ë˜ë©°,
<input class="blank" data-key="pe1_2_2">ëŠ”/ì€
<input class="blank" data-key="pe1_2_3"> íŠ¹ì„±ì— ë§ëŠ” ìš´ë™ê³¼
<input class="blank" data-key="pe1_2_4">ë¥¼/ì„ ê³„íší•˜ê³  ê´€ë¦¬í•¨ìœ¼ë¡œì¨ ì¦ì§„ ëœë‹¤.<br>
â‹… <input class="blank" data-key="pe1_3_1">ëŠ”/ì€ ìƒí™œ ì†ì—ì„œ ìš´ë™ì„ ì¦ê¸°ê³ ,
<input class="blank" data-key="pe1_3_2">ì˜ ê±´ê°•ì„ ìœ ì§€í•˜ë©°, í–‰ë³µí•œ ì‚¶ì„ ì˜ìœ„í•œë‹¤.
â‹… <input class="blank" data-key="pe2_1_1">ëŠ”/ì€ ì¸ê°„ì´ ì œë„í™”ëœ ê·œë²”ê³¼
<input class="blank" data-key="pe2_1_2">ë¥¼/ì„ ë°”íƒ•ìœ¼ë¡œ íƒ€ì¸ ë° ì£¼ë³€ ì„¸ê³„ì™€ ì†Œí†µí•˜ë©° ë°”ëŒì§í•œ êµ¬ì„±ì›ìœ¼ë¡œ ì„±ì¥í•˜ëŠ” ë° ì´ë°”ì§€í•œë‹¤.<br>
â‹… ìŠ¤í¬ì¸ ëŠ” ì¸ê°„ì´ <input class="blank" data-key="pe2_2_1">ê³¼/ì™€ ìƒí˜¸ì‘ìš©í•˜ê³ 
ë‹¤ì–‘í•œ ê¸°ìˆ ê³¼ ì°½ì˜ì ì¸ <input class="blank" data-key="pe2_2_2">ë¥¼/ì„ ë°œíœ˜í•˜ë©° í•œê³„ë¥¼ ê·¹ë³µí•˜ëŠ” ê³¼ì •ì—ì„œ ë°œë‹¬í•œë‹¤.<br>
â‹… ì¸ê°„ì€ ìŠ¤í¬ì¸ ë¥¼ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì²´í—˜í•¨ìœ¼ë¡œì¨
<input class="blank" data-key="pe2_3_1">ì˜ ì¦ê±°ì›€ì„ ëŠë¼ê³ 
<input class="blank" data-key="pe2_3_2">ì¸ ì‚¶ì˜ íƒœë„ë¥¼ ë°°ìš´ë‹¤.
â‹… í‘œí˜„ í™œë™ì€ ì¸ê°„ì´ ì‹ ì²´ ì›€ì§ì„ì—
<input class="blank" data-key="pe3_1_1">ê³¼/ì™€
<input class="blank" data-key="pe3_1_2">ë¥¼/ì„ ë‹´ì•„
<input class="blank" data-key="pe3_1_3">ìœ¼ë¡œ í‘œí˜„í•˜ëŠ” ê³¼ì •ì—ì„œ
<input class="blank" data-key="pe3_1_4">ì¸ ì‚¶ì˜ íƒœë„ë¥¼ í˜•ì„±í•˜ê³ ,
ì˜ˆìˆ ì  <input class="blank" data-key="pe3_1_5"> ë¬¸í™”ë¥¼ í–¥ìœ í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.<br>
â‹… í‘œí˜„ í™œë™ì€ <input class="blank" data-key="pe3_2_1">ì— í‘œí˜„ ì›ë¦¬ê°€ ì ìš©ë˜ì–´
ë‹¤ì–‘í•œ ìœ í˜•ìœ¼ë¡œ êµ¬í˜„ë˜ë©°, êµ¬ì„± ë° ì°½ì‘ì˜ ê³¼ì •ì„ í†µí•´ ë°œë‹¬í•œë‹¤.<br>
â‹… ì¸ê°„ì€ ë‹¤ì–‘í•œ í‘œí˜„ í™œë™ì„ ì²´í—˜í•¨ìœ¼ë¡œì¨ ì›€ì§ì„ì˜
<input class="blank" data-key="pe3_3_1">ë¥¼/ì„ ë‚´ë©´í™”í•˜ë©°
ììœ ë¡­ê³  <input class="blank" data-key="pe3_3_2">ìœ¼ë¡œ ì‚¬ëŠ” ë°©ë²•ì„ í„°ë“í•œë‹¤.
      </td>
    </tr>

    <tr>
      <th rowspan="2">ë²”ì£¼</th>
      <th class="center">3-4í•™ë…„êµ°</th>
      <th class="center">5-6í•™ë…„êµ°</th>
    </tr>
    <tr>
      <th>ë‚´ìš©ìš”ì†Œ</th>
      <th>ë‚´ìš©ìš”ì†Œ</th>
    </tr>

    <tr>
      <th>ì§€ì‹Â·ì´í•´</th>
      <td class="rows">${'<textarea></textarea>'.repeat(c.k[0])}</td>
      <td class="rows">${'<textarea></textarea>'.repeat(c.k[1])}</td>
    </tr>

    <tr>
      <th>ê³¼ì •Â·ê¸°ëŠ¥</th>
      <td class="rows">${'<textarea></textarea>'.repeat(c.p[0])}</td>
      <td class="rows">${'<textarea></textarea>'.repeat(c.p[1])}</td>
    </tr>

    <tr>
      <th>ê°€ì¹˜Â·íƒœë„</th>
      <td class="rows">${'<textarea></textarea>'.repeat(c.v[0])}</td>
      <td class="rows">${'<textarea></textarea>'.repeat(c.v[1])}</td>
    </tr>
  </table>

  <button class="grade" onclick="gradePE(this, ${i})">ì±„ì </button>
<button class="grade" onclick="showPEAnswer(this, ${i})">ì •ë‹µ</button>
<button class="clear" onclick="clearPE(this)">ì§€ìš°ê¸°</button>
  <div class="score">ì •ë‹µë¥  : 0%</div>
  `;
});
/* ===============================
   ì—­ëŸ‰ íƒ­ (ë‹¤ì¤‘ ì…ë ¥ / ì¹´ë“œë³„ ì±„ì )
=============================== */

const competencyTitles = [
  'ì´ë¡ ','êµ­ì–´','ìˆ˜í•™','ì‚¬íšŒ','ê³¼í•™','ì˜ì–´',
  'ìŒì•…','ë¯¸ìˆ ','ì²´ìœ¡','ë„ë•','ì‹¤ê³¼'
];

/* ì¹´ë“œë³„ ì…ë ¥ ì¤„ ìˆ˜ */
const competencyRows = [
  6,6,5,5,2,1,5,5,3,5,6
];

const competencyWrap = document.getElementById('competencyWrap');

/* ì¹´ë“œ ìƒì„± */
competencyTitles.forEach((title, i) => {

  let textareas = '';
  for(let r=0; r<competencyRows[i]; r++){
    textareas += `
      <textarea 
        class="blank" 
        data-key="c${i}" 
        data-index="${r}"
        rows="1"
        style="line-height:1.6; resize:none; overflow:hidden;"
      ></textarea>`;
  }

  competencyWrap.innerHTML += `
    <div class="competency-box">
      <div class="competency-title">(${i+1}) ${title}</div>

      <div class="input-group">
        ${textareas}
      </div>

      <div class="competency-actions">
        <button onclick="gradeCompetency(this)">ì±„ì </button>
        <button onclick="showCompetencyAnswer(this)">ì •ë‹µ</button>
        <button onclick="clearCompetency(this)">ì§€ìš°ê¸°</button>
      </div>

      <div class="score">ì •ë‹µë¥  : 0%</div>
    </div>
  `;
});


/* ===============================
   ì •ë‹µ ë°ì´í„°
=============================== */

const competencyAnswers = {

  c0: [
    'ê³µë™ì²´ ì—­ëŸ‰','ì‹¬ë¯¸ì  ì—­ëŸ‰','ìê¸°ê´€ë¦¬ ì—­ëŸ‰',
    'ì§€ì‹ì •ë³´ì²˜ë¦¬ ì—­ëŸ‰','ì°½ì˜ì  ì‚¬ê³  ì—­ëŸ‰','í˜‘ë ¥ì  ì†Œí†µ ì—­ëŸ‰'
  ],

  c1: [
    'ê³µë™ì²´ ëŒ€ì¸ ê´€ê³„ ì—­ëŸ‰','ë””ì§€í„¸ ë¯¸ë””ì–´ ì—­ëŸ‰','ë¬¸í™” í–¥ìœ  ì—­ëŸ‰',
    'ë¹„íŒì  ì°½ì˜ì  ì‚¬ê³  ì—­ëŸ‰','ì˜ì‚¬ì†Œí†µ ì—­ëŸ‰','ìê¸° ì„±ì°° ê³„ë°œ ì—­ëŸ‰'
  ],

  c2: [
    'ë¬¸ì œ í•´ê²°','ì—°ê²°','ì˜ì‚¬ì†Œí†µ','ì •ë³´ ì²˜ë¦¬','ì¶”ë¡ '
  ],

  c3: [
    'ë¬¸ì œ í•´ê²°ë ¥ ë° ì˜ì‚¬ ê²°ì •ë ¥','ë¹„íŒì  ì‚¬ê³ ë ¥',
    'ì˜ì‚¬ì†Œí†µ ë° í˜‘ì—… ëŠ¥ë ¥','ì •ë³´ í™œìš© ëŠ¥ë ¥','ì°½ì˜ì  ì‚¬ê³ ë ¥'
  ],

  c4: [
    'ê³¼í•™ì  ì˜ì‚¬ê²°ì • ëŠ¥ë ¥','ê³¼í•™ì  íƒêµ¬ì™€ ë¬¸ì œí•´ê²° ëŠ¥ë ¥'
  ],

  c5: [
    'ì˜ì–´ ì˜ì‚¬ì†Œí†µ ì—­ëŸ‰'
  ],

  c6: [
    'ê°ì„± ì—­ëŸ‰','ê³µë™ì²´ ì—­ëŸ‰','ì†Œí†µ ì—­ëŸ‰',
    'ìê¸°ì£¼ë„ì„± ì—­ëŸ‰','ì°½ì˜ì„± ì—­ëŸ‰'
  ],

  c7: [
    'ê³µë™ì²´ ì—­ëŸ‰','ì‹œê°ì  ì†Œí†µ ì—­ëŸ‰',
    'ì‹¬ë¯¸ì  ê°ì„± ì—­ëŸ‰','ì •ì²´ì„± ì—­ëŸ‰','ì°½ì˜ ìœµí•© ì—­ëŸ‰'
  ],

  c8: [
    'ê±´ê°• ê´€ë¦¬ ì—­ëŸ‰','ì‹ ì²´í™œë™ ë¬¸í™” í–¥ìœ  ì—­ëŸ‰','ì›€ì§ì„ ìˆ˜í–‰ ì—­ëŸ‰'
  ],

  c9: [
    'ë„ë•ê³µë™ì²´ ì˜ì‹','ë„ë•ì  ìƒìƒë ¥',
    'ë„ë• íŒë‹¨ ëŠ¥ë ¥','ë¹„íŒì  ë°°ë ¤ì  ì‚¬ê³ ë ¥',
    'ì¸ê³µì§€ëŠ¥ ë° ë””ì§€í„¸ ìœ¤ë¦¬'
  ],

  c10: [
    'ê´€ê³„í˜•ì„±','ê¸°ìˆ ì  ë¬¸ì œí•´ê²°ëŠ¥ë ¥','ê¸°ìˆ ì  ì‹¤ì²œ ëŠ¥ë ¥',
    'ê¸°ìˆ í•™ì  ì§€ì‹ì˜ ì´í•´ ëŠ¥ë ¥','ìƒí™œìë¦½','ì‹¤ì²œì  ë¬¸ì œí•´ê²°'
  ]
};


/* ===============================
   ê³µí†µ ì •ê·œí™” (ë„ì›Œì“°ê¸° ì œê±°)
=============================== */

function norm(v){
  return v.replace(/\s+/g,'').trim();
}


/* ===============================
   textarea ìë™ ë†’ì´ ì¡°ì ˆ
=============================== */

document.addEventListener('input', function(e){
  if(e.target.tagName.toLowerCase() === 'textarea'){
    e.target.style.height = 'auto';
    e.target.style.height = e.target.scrollHeight + 'px';
  }
});


/* ===============================
   ì±„ì  (ë°°ê²½ìƒ‰ correct/wrong ì ìš©)
=============================== */
function gradeCompetency(btn){

  const box = btn.closest('.competency-box');
  const inputs = box.querySelectorAll('.blank');
  const key = inputs[0].dataset.key;
  const answers = competencyAnswers[key];

  let correct = 0;
  let total = 0;

  inputs.forEach((input, i) => {
    // ê¸°ì¡´ í‘œì‹œ ì œê±°
    input.classList.remove('correct','wrong');
    input.style.color = '';

    const ans = answers[i];
    if(!ans) return; // í˜¹ì‹œ ì •ë‹µì´ ë¹„ì–´ìˆìœ¼ë©´ ì œì™¸

    total++;

    if(norm(input.value) === norm(ans)){
      input.classList.add('correct');
      correct++;
    }else{
      input.classList.add('wrong');
    }
  });

  const percent = total === 0 ? 0 : Math.round((correct / total) * 100);
  box.querySelector('.score').textContent =
    `ì •ë‹µë¥  : ${percent}% (${correct}/${total})`;
}

/* ===============================
   ì •ë‹µ ë³´ê¸° (ì „ë¶€ correct ë°°ê²½)
=============================== */
function showCompetencyAnswer(btn){

  const box = btn.closest('.competency-box');
  const inputs = box.querySelectorAll('.blank');
  const key = inputs[0].dataset.key;
  const answers = competencyAnswers[key];

  inputs.forEach((input, i)=>{
    input.value = answers[i] || '';

    input.classList.remove('wrong');
    input.classList.add('correct'); // ì •ë‹µì€ ì „ë¶€ ì´ˆë¡ ì²˜ë¦¬
    input.style.color = '';

    input.style.height = 'auto';
    input.style.height = input.scrollHeight + 'px';
  });

  box.querySelector('.score').textContent =
    `ì •ë‹µë¥  : 100% (${answers.length}/${answers.length})`;
}

/* ===============================
   ì§€ìš°ê¸° (ê°’ + ìƒ‰ ì „ë¶€ ì´ˆê¸°í™”)
=============================== */
function clearCompetency(btn){

  const box = btn.closest('.competency-box');
  const inputs = box.querySelectorAll('.blank');

  inputs.forEach(input=>{
    input.value = '';
    input.classList.remove('correct','wrong');
    input.style.color = '';
    input.style.height = 'auto';
  });

  box.querySelector('.score').textContent = 'ì •ë‹µë¥  : 0%';
}
/* ===============================
   ëª¨í˜• íƒ­ > êµ­ì–´ ì¹´ë“œ (ì¤„ ìˆ˜ ì ìš© ë²„ì „)
=============================== */

const koreanModelTitles = [
  'êµ­ì–´ ëª¨í˜• ì´ë¦„','ì§ì ‘ êµìˆ˜ ëª¨í˜•','ë¬¸ì œ í•´ê²° í•™ìŠµ ëª¨í˜•','ì°½ì˜ì„± ê³„ë°œ í•™ìŠµ ëª¨í˜•','ì§€ì‹ íƒêµ¬ í•™ìŠµ ëª¨í˜•',
  'ë°˜ì‘ ì¤‘ì‹¬ í•™ìŠµ ëª¨í˜•','ê°€ì¹˜ íƒêµ¬ í•™ìŠµ ëª¨í˜•','ì „ë¬¸ê°€ í˜‘ë™ í•™ìŠµ ëª¨í˜•','í† ì˜Â·í† ë¡  í•™ìŠµ ëª¨í˜•','ì—­í•  ìˆ˜í–‰ í•™ìŠµ ëª¨í˜•'
];

/* ğŸ”¹ ì¹´ë“œë³„ ì¤„ ìˆ˜ */
const koreanLineCounts = [9,4,4,4,4,4,4,4,4,4];

const koreanModelWrap = document.getElementById('modelKoreanWrap');

koreanModelTitles.forEach((title,i)=>{

  let textareas = '';
  for(let j=0; j<koreanLineCounts[i]; j++){
    textareas += `<textarea class="blank" data-key="k${i}-${j}"></textarea>`;
  }

  koreanModelWrap.innerHTML += `
    <div class="competency-box">
      <div class="competency-title">(${i+1}) ${title}</div>

      <div class="multi-input">
        ${textareas}
      </div>

      <div class="competency-actions">
        <button class="grade" onclick="gradeModel(this, koreanModelAnswers)">ì±„ì </button>
<button class="grade" onclick="showModelAnswer(this, koreanModelAnswers)">ì •ë‹µ</button>
<button class="clear" onclick="clearModel(this)">ì§€ìš°ê¸°</button>
      </div>

      <div class="score">ì •ë‹µë¥  : 0%</div>
    </div>
  `;
});

/* ===============================
   ì •ë‹µ ë°ì´í„° (êµ­ì–´ ëª¨í˜• íƒ­)
   - 9ì¤„/4ì¤„ ê°ê° "í•œ ì¹¸ì— í•˜ë‚˜ì”©" ë“¤ì–´ê°€ë„ë¡ í‚¤ë¥¼ ìª¼ê°¬
=============================== */

const koreanModelAnswers = {
  /* (0) êµ­ì–´ ëª¨í˜• ì´ë¦„ (9ì¤„) */
  "k0-0": "ê°€ì¹˜ íƒêµ¬ í•™ìŠµ ëª¨í˜•",
  "k0-1": "ë¬¸ì œ í•´ê²° í•™ìŠµ ëª¨í˜•",
  "k0-2": "ë°˜ì‘ ì¤‘ì‹¬ í•™ìŠµ ëª¨í˜•",
  "k0-3": "ì—­í•  ìˆ˜í–‰ í•™ìŠµ ëª¨í˜•",
  "k0-4": "ì „ë¬¸ê°€ í˜‘ë™ í•™ìŠµ ëª¨í˜•",
  "k0-5": "ì§€ì‹ íƒêµ¬ í•™ìŠµ ëª¨í˜•",
  "k0-6": "ì§ì ‘ êµìˆ˜ ëª¨í˜•",
  "k0-7": "ì°½ì˜ì„± ê³„ë°œ í•™ìŠµ ëª¨í˜•",
  "k0-8": "í† ì˜ í† ë¡  í•™ìŠµ ëª¨í˜•",

  /* (1) ì§ì ‘ êµìˆ˜ ëª¨í˜• (4ì¤„) */
  "k1-0": "ì„¤ëª…í•˜ê¸°",
  "k1-1": "ì‹œë²”ë³´ì´ê¸°",
  "k1-2": "ì§ˆë¬¸í•˜ê¸°",
  "k1-3": "í™œë™í•˜ê¸°",

  /* (2) ë¬¸ì œ í•´ê²° í•™ìŠµ ëª¨í˜• (4ì¤„) */
  "k2-0": "ë¬¸ì œ í™•ì¸í•˜ê¸°",
  "k2-1": "ë¬¸ì œ í•´ê²° ë°©ë²• ì°¾ê¸°",
  "k2-2": "ë¬¸ì œ í•´ê²°í•˜ê¸°",
  "k2-3": "ì¼ë°˜í™”í•˜ê¸°",

  /* (3) ì°½ì˜ì„± ê³„ë°œ í•™ìŠµ ëª¨í˜• (4ì¤„) */
  "k3-0": "ë¬¸ì œ ë°œê²¬í•˜ê¸°",
  "k3-1": "ì•„ì´ë””ì–´ ìƒì„±í•˜ê¸°",
  "k3-2": "ì•„ì´ë””ì–´ ì„ íƒí•˜ê¸°",
  "k3-3": "ì•„ì´ë””ì–´ ì ìš©í•˜ê¸°",

  /* (4) ì§€ì‹ íƒêµ¬ í•™ìŠµ ëª¨í˜• (4ì¤„) */
  "k4-0": "ë¬¸ì œ í™•ì¸í•˜ê¸°",
  "k4-1": "ìë£Œ íƒìƒ‰í•˜ê¸°",
  "k4-2": "ì§€ì‹ ë°œê²¬í•˜ê¸°",
  "k4-3": "ì§€ì‹ ì ìš©í•˜ê¸°",

  /* (5) ë°˜ì‘ ì¤‘ì‹¬ í•™ìŠµ ëª¨í˜• (4ì¤„) */
  "k5-0": "ë°˜ì‘ ì¤€ë¹„í•˜ê¸°",
  "k5-1": "ë°˜ì‘ í˜•ì„±í•˜ê¸°",
  "k5-2": "ë°˜ì‘ ëª…ë£Œí™”í•˜ê¸°",
  "k5-3": "ë°˜ì‘ ì‹¬í™”í•˜ê¸°",

  /* (6) ê°€ì¹˜ íƒêµ¬ í•™ìŠµ ëª¨í˜• (4ì¤„) */
  "k6-0": "ë¬¸ì œ ë¶„ì„í•˜ê¸°",
  "k6-1": "ê°€ì¹˜ í™•ì¸í•˜ê¸°",
  "k6-2": "ê°€ì¹˜ í‰ê°€í•˜ê¸°",
  "k6-3": "ê°€ì¹˜ ì¼ë°˜í™”í•˜ê¸°",

  /* (7) ì „ë¬¸ê°€ í˜‘ë™ í•™ìŠµ ëª¨í˜• (4ì¤„) */
  "k7-0": "ê³„íší•˜ê¸°",
  "k7-1": "íƒêµ¬í•˜ê¸°",
  "k7-2": "ì„œë¡œ ê°€ë¥´ì¹˜ê¸°",
  "k7-3": "ë°œí‘œ ë° ì •ë¦¬í•˜ê¸°",

  /* (8) í† ì˜Â·í† ë¡  í•™ìŠµ ëª¨í˜• (4ì¤„) */
  "k8-0": "ì£¼ì œ í™•ì¸í•˜ê¸°",
  "k8-1": "í† ì˜ í† ë¡  ì¤€ë¹„í•˜ê¸°",
  "k8-2": "í† ì˜ í† ë¡ í•˜ê¸°",
  "k8-3": "ì •ë¦¬ ë° í‰ê°€í•˜ê¸°",

  /* (9) ì—­í•  ìˆ˜í–‰ í•™ìŠµ ëª¨í˜• (4ì¤„) */
  "k9-0": "ìƒí™© ì„¤ì •í•˜ê¸°",
  "k9-1": "ì¤€ë¹„ ë° ì—°ìŠµí•˜ê¸°",
  "k9-2": "ì‹¤ì—°í•˜ê¸°",
  "k9-3": "í‰ê°€í•˜ê¸°"
};
/* ===============================
   ëª¨í˜• íƒ­ > ìˆ˜í•™ ì¹´ë“œ (ì¤„ ìˆ˜ ì ìš©)
=============================== */

const mathModelTitles = [
  'ìˆ˜í•™ ëª¨í˜• ì´ë¦„',
  'ê°œë… í•™ìŠµ ëª¨í˜• (ê°œë… í˜•ì„± ëª¨í˜•)',
  'ê°œë… í•™ìŠµ ëª¨í˜• (ì†ì„± ëª¨í˜•)',
  'ì›ë¦¬ íƒêµ¬ í•™ìŠµ ëª¨í˜•',
  'ê·€ë‚© ì¶”ë¡  í•™ìŠµ ëª¨í˜•',
  'ë¬¸ì œ í•´ê²° í•™ìŠµ ëª¨í˜•'
];

/* ğŸ”¹ ì¹´ë“œë³„ ì¤„ ìˆ˜ */
const mathLineCounts = [5,4,4,5,4,4];

const mathModelWrap = document.getElementById('modelMathWrap');

mathModelTitles.forEach((title,i)=>{

  let textareas = '';
  for(let j=0; j<mathLineCounts[i]; j++){
    textareas += `<textarea class="blank" data-key="m${i}-${j}"></textarea>`;
  }

  mathModelWrap.innerHTML += `
    <div class="competency-box">
      <div class="competency-title">(${i+1}) ${title}</div>

      <div class="multi-input">
        ${textareas}
      </div>

      <div class="competency-actions">
        <button class="grade" onclick="gradeModel(this, mathModelAnswers)">ì±„ì </button>
<button class="grade" onclick="showModelAnswer(this, mathModelAnswers)">ì •ë‹µ</button>
<button class="clear" onclick="clearModel(this)">ì§€ìš°ê¸°</button>
      </div>

      <div class="score">ì •ë‹µë¥  : 0%</div>
    </div>
  `;
});


/* ===============================
   ì •ë‹µ ë°ì´í„° (ìˆ˜í•™ ëª¨í˜• íƒ­)
=============================== */

const mathModelAnswers = {

  /* (0) ìˆ˜í•™ ëª¨í˜• ì´ë¦„ (5ì¤„) */
  "m0-0": "ê°œë… í•™ìŠµ ëª¨í˜• (ê°œë… í˜•ì„± ëª¨í˜•)",
  "m0-1": "ê°œë… í•™ìŠµ ëª¨í˜• (ì†ì„± ëª¨í˜•)",
  "m0-2": "ê·€ë‚© ì¶”ë¡  í•™ìŠµ ëª¨í˜•",
  "m0-3": "ë¬¸ì œ í•´ê²° í•™ìŠµ ëª¨í˜•",
  "m0-4": "ì›ë¦¬ íƒêµ¬ í•™ìŠµ ëª¨í˜•",

  /* (1) ê°œë… í•™ìŠµ ëª¨í˜• (ê°œë… í˜•ì„± ëª¨í˜•) */
  "m1-0": "ë²”ë¡€ ì œì‹œ ë° ë²”ë¡€ ë¶„ë¥˜í•˜ê¸°",
  "m1-1": "ê³µí†µì˜ ì„±ì§ˆ ì¶”ìƒí™”í•˜ê¸°",
  "m1-2": "ê°œë… ì •ì˜í•˜ê¸°",
  "m1-3": "ê°œë… ìµíˆê¸°",

  /* (2) ê°œë… í•™ìŠµ ëª¨í˜• (ì†ì„± ëª¨í˜•) */
  "m2-0": "ê°œë…ì˜ ì •ì˜",
  "m2-1": "ì†ì„±ì˜ ì œì‹œ",
  "m2-2": "ì˜ˆì™€ ë¹„ì˜ˆì˜ ê²€í† ",
  "m2-3": "ê°œë… ë¶„ì„ ë° ìµíˆê¸°",

  /* (3) ì›ë¦¬ íƒêµ¬ í•™ìŠµ ëª¨í˜• (5ì¤„) */
  "m3-0": "ìƒˆë¡œìš´ ë¬¸ì œ ìƒí™© ì œì‹œ",
  "m3-1": "ìˆ˜í•™ì  ì›ë¦¬ì˜ í•„ìš”ì„± ì¸ì‹",
  "m3-2": "ìˆ˜í•™ì  ì›ë¦¬ê°€ ë‚´ì¬ëœ ì¡°ì‘ í™œë™",
  "m3-3": "ìˆ˜í•™ì  ì›ë¦¬ì˜ í˜•ì‹í™”",
  "m3-4": "ìˆ˜í•™ì  ì›ë¦¬ ìµíˆê¸° ë° ì ìš©í•˜ê¸°",

  /* (4) ê·€ë‚© ì¶”ë¡  í•™ìŠµ ëª¨í˜• */
  "m4-0": "ì‚¬ë¡€ ìˆ˜ì§‘ ë° ê´€ì°° ì‹¤í—˜",
  "m4-1": "ì¶”ì¸¡í•˜ê¸°",
  "m4-2": "ì¶”ì¸¡ì˜ ê²€ì¦",
  "m4-3": "ì¼ë°˜í™” ë° ì •ë‹¹í™”",

  /* (5) ë¬¸ì œ í•´ê²° í•™ìŠµ ëª¨í˜• */
  "m5-0": "ë¬¸ì œì˜ ì´í•´",
  "m5-1": "í•´ê²° ê³„íšì˜ ìˆ˜ë¦½",
  "m5-2": "í•´ê²° ê³„íšì˜ ì‹¤í–‰",
  "m5-3": "ë°˜ì„±"
};
/* ===============================
   ëª¨í˜• íƒ­ > ì‚¬íšŒ ì¹´ë“œ (ì¤„ ìˆ˜ ì ìš©)
=============================== */

const socialModelTitles = [
 'ì‚¬íšŒ ëª¨í˜• ì´ë¦„',
 'ê°œë… í•™ìŠµ ëª¨í˜•(ì†ì„± ëª¨í˜•)',
 'ê°œë… í•™ìŠµ ëª¨í˜•(ì›í˜• ëª¨í˜•)',
 'ê°œë… í•™ìŠµ ëª¨í˜•(ìƒí™© ëª¨í˜•)',
 'ë¬¸ì œ í•´ê²° í•™ìŠµ ëª¨í˜•',
 'íƒêµ¬ í•™ìŠµ ëª¨í˜• (ë§ˆì‹œì•Œë¼ìŠ¤Â·ì½•ìŠ¤)',
 'íƒêµ¬ í•™ìŠµ ëª¨í˜•(ë±…í¬ìŠ¤Â·ì˜¬ë¦¬ë²„Â·ìŠ¤ì½§)',
 'ì˜ì‚¬ê²°ì • ë§¤íŠ¸ë¦­ìŠ¤ ëª¨í˜•',
 'í•©ë¦¬ì  ì˜ì‚¬ ê²°ì • í•™ìŠµ ëª¨í˜•',
 'ê°€ì¹˜ ëª…ë£Œí™” ëª¨í˜•',
 'ê°€ì¹˜ ë¶„ì„ ëª¨í˜•',
 'ë…¼ìŸë¬¸ì œ í•™ìŠµ ëª¨í˜•(5ë‹¨ê³„)',
 'ë…¼ìŸë¬¸ì œ í•™ìŠµ ëª¨í˜•(8ë‹¨ê³„)',
 'í˜‘ë™ í•™ìŠµ ëª¨í˜•(STAD)',
 'í˜‘ë™ í•™ìŠµ ëª¨í˜•(ì§ì†Œ 1)',
 'í˜‘ë™ í•™ìŠµ ëª¨í˜•(ì§ì†Œ 2)'
];

/* ğŸ”¹ ì¹´ë“œë³„ ì¤„ ìˆ˜ */
const socialLineCounts = [
 15, // ì‚¬íšŒ ëª¨í˜• ì´ë¦„
 8,  // ì†ì„± ëª¨í˜•
 7,  // ì›í˜• ëª¨í˜•
 7,  // ìƒí™© ëª¨í˜•
 5,  // ë¬¸ì œ í•´ê²°
 5,  // ë§ˆì‹œì•Œë¼ìŠ¤ ì½•ìŠ¤
 6,  // ë±…í¬ìŠ¤ ì˜¬ë¦¬ë²„ ìŠ¤ì½§
 5,  // ì˜ì‚¬ê²°ì • ë§¤íŠ¸ë¦­ìŠ¤
 12, // í•©ë¦¬ì  ì˜ì‚¬ê²°ì •
 10, // ê°€ì¹˜ ëª…ë£Œí™”
 4,  // ê°€ì¹˜ ë¶„ì„
 5,  // ë…¼ìŸ 5ë‹¨ê³„
 8,  // ë…¼ìŸ 8ë‹¨ê³„
 5,  // STAD
 6,  // ì§ì†Œ1
 6   // ì§ì†Œ2
];

const socialModelWrap = document.getElementById('modelSocialWrap');

socialModelTitles.forEach((title,i)=>{

  let textareas = '';
  for(let j=0; j<socialLineCounts[i]; j++){
    textareas += `<textarea class="blank" data-key="s${i}-${j}"></textarea>`;
  }

  socialModelWrap.innerHTML += `
    <div class="competency-box">
      <div class="competency-title">(${i+1}) ${title}</div>

      <div class="multi-input">
        ${textareas}
      </div>

      <div class="competency-actions">
        <button class="grade" onclick="gradeModel(this, socialModelAnswers)">ì±„ì </button>
<button class="grade" onclick="showModelAnswer(this, socialModelAnswers)">ì •ë‹µ</button>
<button class="clear" onclick="clearModel(this)">ì§€ìš°ê¸°</button>
      </div>

      <div class="score">ì •ë‹µë¥  : 0%</div>
    </div>
  `;
});


/* ===============================
   ì‚¬íšŒ ëª¨í˜• íƒ­ ì •ë‹µ ë°ì´í„°
=============================== */

const socialModelAnswers = {

  /* (0) ì‚¬íšŒ ëª¨í˜• ì´ë¦„ (15ì¤„) */
  "s0-0":"ê°€ì¹˜ ëª…ë£Œí™” ëª¨í˜•",
  "s0-1":"ê°€ì¹˜ ë¶„ì„ ëª¨í˜•",
  "s0-2":"ê°œë… í•™ìŠµ ëª¨í˜•(ìƒí™© ëª¨í˜•)",
  "s0-3":"ê°œë… í•™ìŠµ ëª¨í˜•(ì†ì„± ëª¨í˜•)",
  "s0-4":"ê°œë… í•™ìŠµ ëª¨í˜•(ì›í˜• ëª¨í˜•)",
  "s0-5":"ë…¼ìŸë¬¸ì œ í•™ìŠµ ëª¨í˜•(5ë‹¨ê³„)",
  "s0-6":"ë…¼ìŸë¬¸ì œ í•™ìŠµ ëª¨í˜•(8ë‹¨ê³„)",
  "s0-7":"ë¬¸ì œ í•´ê²° í•™ìŠµ ëª¨í˜•",
  "s0-8":"ì˜ì‚¬ê²°ì • ë§¤íŠ¸ë¦­ìŠ¤ ëª¨í˜•",
  "s0-9":"íƒêµ¬ í•™ìŠµ ëª¨í˜• (ë§ˆì‹œì•Œë¼ìŠ¤Â·ì½•ìŠ¤)",
  "s0-10":"íƒêµ¬ í•™ìŠµ ëª¨í˜•(ë±…í¬ìŠ¤Â·ì˜¬ë¦¬ë²„Â·ìŠ¤ì½§)",
  "s0-11":"í•©ë¦¬ì  ì˜ì‚¬ ê²°ì • í•™ìŠµ ëª¨í˜•",
  "s0-12":"í˜‘ë™ í•™ìŠµ ëª¨í˜•(ì§ì†Œ 1)",
  "s0-13":"í˜‘ë™ í•™ìŠµ ëª¨í˜•(ì§ì†Œ 2)",
  "s0-14":"í˜‘ë™ í•™ìŠµ ëª¨í˜•(STAD)",

  /* (1) ì†ì„± ëª¨í˜• */
  "s1-0":"ë¬¸ì œ ì œê¸°",
  "s1-1":"ì†ì„± ì œì‹œì™€ ì •ì˜",
  "s1-2":"ì†ì„± ê²€í† ",
  "s1-3":"ì‚¬ë¡€ ê²€í† ",
  "s1-4":"ê°€ì„¤ ê²€ì¦",
  "s1-5":"ê°œë… ë¶„ì„",
  "s1-6":"ê´€ë ¨ ë¬¸ì œ ê²€í† ",
  "s1-7":"í‰ê°€",

  /* (2) ì›í˜• ëª¨í˜• */
  "s2-0":"ë¬¸ì œ ì œê¸°",
  "s2-1":"ê°œë…ì˜ ì›í˜•ê³¼ ì •ì˜ ì œì‹œ",
  "s2-2":"ë¹„ë¡€ ì œì‹œ",
  "s2-3":"ì†ì„± ê²€í† ",
  "s2-4":"ê°œë… ë¶„ì„",
  "s2-5":"ê´€ë ¨ ë¬¸ì œ ê²€í† ",
  "s2-6":"í‰ê°€",

  /* (3) ìƒí™© ëª¨í˜• */
  "s3-0":"ë¬¸ì œ ì œê¸°",
  "s3-1":"ìƒí™© ë° ê²½í—˜ì˜ ì œì‹œ",
  "s3-2":"ì‚¬ë¡€ ê²€í† ",
  "s3-3":"ì†ì„± ê²€í† ",
  "s3-4":"ê°œë… ë¶„ì„",
  "s3-5":"ê´€ë ¨ ë¬¸ì œ ê²€í† ",
  "s3-6":"í‰ê°€",

  /* (4) ë¬¸ì œ í•´ê²° ëª¨í˜• */
  "s4-0":"ë¬¸ì œ í™•ì¸",
  "s4-1":"ë¬¸ì œ ë°œìƒ ì›ì¸ íŒŒì•…",
  "s4-2":"ë¬¸ì œ í•´ê²° ë°©ì•ˆ íƒìƒ‰",
  "s4-3":"ë¬¸ì œ í•´ê²° ë°©ì•ˆ ê²°ì •",
  "s4-4":"ë¬¸ì œ í•´ê²° ë°©ì•ˆ ì‹¤ì²œ",

  /* (5) ë§ˆì‹œì•Œë¼ìŠ¤Â·ì½•ìŠ¤ */
  "s5-0":"íƒêµ¬ ë¬¸ì œ íŒŒì•…",
  "s5-1":"ê°€ì„¤ ì„¤ì •",
  "s5-2":"íƒìƒ‰",
  "s5-3":"ì¦ê±° ì œì‹œ",
  "s5-4":"ì¼ë°˜í™”",

  /* (6) ë±…í¬ìŠ¤Â·ì˜¬ë¦¬ë²„Â·ìŠ¤ì½§ */
  "s6-0":"ë¬¸ì œ ì œê¸°",
  "s6-1":"ê°€ì„¤ ì„¤ì •",
  "s6-2":"ìš©ì–´ ì •ì˜ ë° ê°œë…í™”",
  "s6-3":"ìë£Œ ìˆ˜ì§‘",
  "s6-4":"ìë£Œ ë¶„ì„",
  "s6-5":"ê°€ì„¤ ê²€ì¦ ë° ì¼ë°˜í™”",

  /* (7) ì˜ì‚¬ê²°ì • ë§¤íŠ¸ë¦­ìŠ¤ */
  "s7-0":"ë¬¸ì œ ì •ì˜",
  "s7-1":"ëŒ€ì•ˆ ë‚˜ì—´",
  "s7-2":"ì„ íƒ ê¸°ì¤€ ì‘ì„±",
  "s7-3":"ëŒ€ì•ˆ í‰ê°€",
  "s7-4":"ì˜ì‚¬ ê²°ì •",

  /* (8) í•©ë¦¬ì  ì˜ì‚¬ê²°ì • */
  "s8-0":"ë¬¸ì œ ì œê¸°",
  "s8-1":"ì‚¬íšŒ íƒêµ¬",
  "s8-2":"ê°€ì„¤ ì„¤ì •",
  "s8-3":"ìë£Œ ìˆ˜ì§‘",
  "s8-4":"ìë£Œ ë¶„ì„",
  "s8-5":"ê°€ì„¤ ê²€ì¦",
  "s8-6":"ê°€ì¹˜ íƒêµ¬",
  "s8-7":"ê°€ì¹˜ ë¬¸ì œ ë° ê°€ì¹˜ ê°ˆë“± í™•ì¸",
  "s8-8":"ëŒ€ì•ˆì˜ ê²€í† ì™€ ê²°ê³¼ ì˜ˆì¸¡",
  "s8-9":"ê°€ì¹˜ ì„ íƒ",
  "s8-10":"ì˜ì‚¬ ê²°ì •",
  "s8-11":"í–‰ë™",

  /* (9) ê°€ì¹˜ ëª…ë£Œí™” */
  "s9-0":"ì„ íƒ",
  "s9-1":"ììœ ë¡­ê²Œ ì„ íƒí•˜ê¸°",
  "s9-2":"ë‹¤ì–‘í•œ ëŒ€ì•ˆ ì¤‘ì—ì„œ ì„ íƒí•˜ê¸°",
  "s9-3":"ê° ëŒ€ì•ˆì˜ ê²°ê³¼ì— ëŒ€í•´ ì¶©ë¶„íˆ ê²€í† í•˜ê¸°",
  "s9-4":"ì„ íƒì„ ì†Œì¤‘íˆ ì—¬ê¸°ê¸°",
  "s9-5":"ìì‹ ì´ ì„ íƒí•œ ê²ƒì„ ì†Œì¤‘íˆ ì—¬ê¸°ê³  ê¸°ì˜ê²Œ ìƒê°í•˜ê¸°",
  "s9-6":"ì„ íƒí•œ ê²ƒì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ê¸°ì˜ê²Œ ë°œí‘œí•˜ê¸°",
  "s9-7":"í–‰ë™í•˜ê¸°",
  "s9-8":"ì„ íƒí•œ ëŒ€ì•ˆì— ë”°ë¼ í–‰ë™í•˜ê¸°",
  "s9-9":"ì‚¶ì˜ ìœ í˜•ì´ ë˜ë„ë¡ ì§€ì†í•´ì„œ ë°˜ë³µí•˜ê¸°",

  /* (10) ê°€ì¹˜ ë¶„ì„ */
  "s10-0":"ë¬¸ì œ ì œê¸°",
  "s10-1":"ê°€ì¹˜ ë¬¸ì œ ë° ê°€ì¹˜ ê°ˆë“±ì˜ í™•ì¸",
  "s10-2":"ëŒ€ì•ˆì˜ ê²€í† ì™€ ì˜ˆì¸¡",
  "s10-3":"ê°€ì¹˜ì˜ ì„ íƒê³¼ í–‰ë™",

  /* (11) ë…¼ìŸ 5ë‹¨ê³„ */
  "s11-0":"ë¬¸ì œ ì œê¸°",
  "s11-1":"ê°œë…ì˜ ëª…í™•í™”",
  "s11-2":"ì‚¬ì‹¤ì˜ ê²½í—˜ì  í™•ì¸",
  "s11-3":"ê°€ì¹˜ ê°ˆë“±ì˜ í•´ê²°",
  "s11-4":"ëŒ€ì•ˆ ëª¨ìƒ‰ ë° ê²°ë¡ ",

  /* (12) ë…¼ìŸ 8ë‹¨ê³„ */
  "s12-0":"ë¬¸ì œ ì œê¸°",
  "s12-1":"ê°€ì¹˜ ë¬¸ì œ í™•ì¸",
  "s12-2":"ê°œë…ì˜ ëª…í™•í™”",
  "s12-3":"ì‚¬ì‹¤ì˜ ê²½í—˜ì  í™•ì¸",
  "s12-4":"ê°€ì¹˜ ê°ˆë“±ì˜ í•´ê²°",
  "s12-5":"ë¹„ìŠ·í•œ ë‹¤ë¥¸ ê²½ìš°ì™€ì˜ ë¹„êµ",
  "s12-6":"ëŒ€ì•ˆ ëª¨ìƒ‰ê³¼ ê²°ê³¼ì˜ ì˜ˆì¸¡",
  "s12-7":"ì„ íƒ ë° ê²°ë¡ ",

  /* (13) STAD */
  "s13-0":"ì§‘ë‹¨ êµ¬ì„±",
  "s13-1":"êµì‚¬ì˜ ìˆ˜ì—… ì•ˆë‚´ì™€ í•™ìŠµì§€ ë°°ë¶€",
  "s13-2":"ì§‘ë‹¨ í•™ìŠµ",
  "s13-3":"í•™ìŠµì§€ ì‘ì„± ë° ì •ë‹µì§€ í™•ì¸",
  "s13-4":"ê°œë³„í‰ê°€ ë° ì§‘ë‹¨ë³´ìƒ",

  /* (14) ì§ì†Œ1 */
  "s14-0":"ì†Œì§‘ë‹¨ êµ¬ì„±",
  "s14-1":"ì „ë¬¸ê°€ í•™ìŠµì§€ ë°°ë¶€",
  "s14-2":"ì „ë¬¸ê°€ ì§‘ë‹¨ í•™ìŠµ",
  "s14-3":"ì†Œì§‘ë‹¨ í•™ìŠµ",
  "s14-4":"ì „ì²´ í•™ìŠµì§€ ì‘ì„± ë° ì •ë‹µì§€ í™•ì¸",
  "s14-5":"ê°œë³„í‰ê°€ ë° ê°œë³„ë³´ìƒ",

  /* (15) ì§ì†Œ2 */
  "s15-0":"ì†Œì§‘ë‹¨ êµ¬ì„±",
  "s15-1":"ì „ì²´ í•™ìŠµì§€ì™€ ìë£Œ ë°°ë¶€",
  "s15-2":"ì „ë¬¸ê°€ ì§‘ë‹¨ í•™ìŠµ",
  "s15-3":"ì†Œì§‘ë‹¨ í•™ìŠµ",
  "s15-4":"ì „ì²´ í•™ìŠµì§€ ì‘ì„± ë° ì •ë‹µì§€ í™•ì¸",
  "s15-5":"ê°œë³„ í‰ê°€ ë° ì§‘ë‹¨ ë³´ìƒ"
};
/* ===============================
   ëª¨í˜• íƒ­ > ê³¼í•™ ì¹´ë“œ (ì¤„ ìˆ˜ ì ìš©)
=============================== */

const scienceModelTitles = [
 'ê³¼í•™ ëª¨í˜• ì´ë¦„',
 'ê²½í—˜ í•™ìŠµ ëª¨í˜•',
 'ë°œê²¬ í•™ìŠµ ëª¨í˜•',
 '5E ëª¨í˜•',
 'ìˆœí™˜ í•™ìŠµ ëª¨í˜•',
 'ê°œë… ë³€í™” í•™ìŠµ ëª¨í˜•',
 'íƒêµ¬ í•™ìŠµ ëª¨í˜•',
 'POE',
 'STS',
 'STEAM'
];

/* ğŸ”¹ ì¹´ë“œë³„ ì¤„ ìˆ˜ */
const scienceLineCounts = [
 9, // ê³¼í•™ ëª¨í˜• ì´ë¦„
 4, // ê²½í—˜ í•™ìŠµ
 5, // ë°œê²¬ í•™ìŠµ
 5, // 5E
 3, // ìˆœí™˜
 8, // ê°œë… ë³€í™”
 6, // íƒêµ¬ í•™ìŠµ
 3, // POE
 4, // STS
 3  // STEAM
];

const scienceModelWrap = document.getElementById('modelScienceWrap');

scienceModelTitles.forEach((title,i)=>{

  let textareas = '';
  for(let j=0; j<scienceLineCounts[i]; j++){
    textareas += `<textarea class="blank" data-key="sc${i}-${j}"></textarea>`;
  }

  scienceModelWrap.innerHTML += `
    <div class="competency-box">
      <div class="competency-title">(${i+1}) ${title}</div>

      <div class="multi-input">
        ${textareas}
      </div>

      <div class="competency-actions">
        <button class="grade" onclick="gradeModel(this,scienceModelAnswers)">ì±„ì </button>
<button class="grade" onclick="showModelAnswer(this, scienceModelAnswers)">ì •ë‹µ</button>
<button class="clear" onclick="clearModel(this)">ì§€ìš°ê¸°</button>
      </div>

      <div class="score">ì •ë‹µë¥  : 0%</div>
    </div>
  `;
});


/* ===============================
   ê³¼í•™ ëª¨í˜• íƒ­ ì •ë‹µ ë°ì´í„°
=============================== */

const scienceModelAnswers = {

  /* (0) ê³¼í•™ ëª¨í˜• ì´ë¦„ */
  "sc0-0":"ê²½í—˜ í•™ìŠµ ëª¨í˜•",
  "sc0-1":"ê°œë… ë³€í™” í•™ìŠµ ëª¨í˜•",
  "sc0-2":"ë°œê²¬ í•™ìŠµ ëª¨í˜•",
  "sc0-3":"ìˆœí™˜ í•™ìŠµ ëª¨í˜•",
  "sc0-4":"íƒêµ¬ í•™ìŠµ ëª¨í˜•",
  "sc0-5":"STEAM ëª¨í˜•",
  "sc0-6":"STS ëª¨í˜•",
  "sc0-7":"POE ëª¨í˜•",
  "sc0-8":"5E ëª¨í˜•",

  /* (1) ê²½í—˜ í•™ìŠµ */
  "sc1-0":"ììœ  íƒìƒ‰",
  "sc1-1":"íƒìƒ‰ ê²°ê³¼ ë°œí‘œ",
  "sc1-2":"êµì‚¬ì˜ ì•ˆë‚´ì— ë”°ë¥¸ íƒìƒ‰",
  "sc1-3":"íƒìƒ‰ ê²°ê³¼ ì •ë¦¬",

  /* (2) ë°œê²¬ í•™ìŠµ */
  "sc2-0":"íƒìƒ‰ ë° ë¬¸ì œ íŒŒì•…",
  "sc2-1":"ìë£Œ ì œì‹œ ë° ê´€ì°° íƒìƒ‰",
  "sc2-2":"ì¶”ê°€ ìë£Œ ì œì‹œ ë° ê´€ì°° íƒìƒ‰",
  "sc2-3":"ê·œì¹™ì„± ë°œê²¬ ë° ê°œë… ì •ë¦¬",
  "sc2-4":"ì ìš© ë° ì‘ìš©",

  /* (3) 5E */
  "sc3-0":"ì°¸ì—¬",
  "sc3-1":"íƒìƒ‰",
  "sc3-2":"ì„¤ëª…",
  "sc3-3":"ì •êµí™”",
  "sc3-4":"í‰ê°€",

  /* (4) ìˆœí™˜ í•™ìŠµ */
  "sc4-0":"íƒìƒ‰",
  "sc4-1":"ê°œë… ë„ì…",
  "sc4-2":"ê°œë… ì ìš©",

  /* (5) ê°œë… ë³€í™” */
  "sc5-0":"ê°œë… í‘œí˜„",
  "sc5-1":"ê°œë… ì¬êµ¬ì„±",
  "sc5-2":"ëª…ë£Œí™” êµí™˜",
  "sc5-3":"ê°ˆë“± ìƒí™© ê²½í—˜",
  "sc5-4":"ìƒˆë¡œìš´ ê°œë… êµ¬ì„±",
  "sc5-5":"ìƒˆë¡œìš´ ê°œë… í‰ê°€",
  "sc5-6":"ê°œë… ì‘ìš©",
  "sc5-7":"ê°œë… ë³€í™” ê²€í† ",

  /* (6) íƒêµ¬ í•™ìŠµ */
  "sc6-0":"íƒìƒ‰ ë° ë¬¸ì œ íŒŒì•…",
  "sc6-1":"ê°€ì„¤ ì„¤ì •",
  "sc6-2":"ì‹¤í—˜ ì„¤ê³„",
  "sc6-3":"ì‹¤í—˜",
  "sc6-4":"ê°€ì„¤ ê²€ì¦",
  "sc6-5":"ì ìš© ë° ìƒˆë¡œìš´ ë¬¸ì œ ë°œê²¬",

  /* (7) POE */
  "sc7-0":"ì˜ˆìƒ",
  "sc7-1":"ê´€ì°°",
  "sc7-2":"ì„¤ëª…",

  /* (8) STS */
  "sc8-0":"ë¬¸ì œ ì†Œê°œ",
  "sc8-1":"íƒìƒ‰",
  "sc8-2":"ì„¤ëª… ë° í•´ê²°ë°©ì•ˆ ì œì‹œ",
  "sc8-3":"ì‹¤í–‰",

  /* (9) STEAM */
  "sc9-0":"ìƒí™© ì œì‹œ",
  "sc9-1":"ì°½ì˜ì  ì„¤ê³„",
  "sc9-2":"ê°ì„±ì  ì²´í—˜"
};
/* ===============================
   ëª¨í˜• íƒ­ > ë¯¸ìˆ  ì¹´ë“œ (ì¤„ ìˆ˜ ì ìš©)
=============================== */

const artModelTitles = [
 'ë¯¸ìˆ  ëª¨í˜• ì´ë¦„',
 'ê·€ë‚©ì  ì‚¬ê³ ë²•',
 'ì§ì ‘ êµìˆ˜ë²•',
 'ë°˜ì‘ ì¤‘ì‹¬ í•™ìŠµë²•',
 'ì°½ì˜ì  ë¬¸ì œí•´ê²°ë²•'
];

/* ğŸ”¹ ì¹´ë“œë³„ ì¤„ ìˆ˜ */
const artLineCounts = [
 4, // ë¯¸ìˆ  ëª¨í˜• ì´ë¦„
 5, // ê·€ë‚©ì  ì‚¬ê³ ë²•
 6, // ì§ì ‘ êµìˆ˜ë²•
 4, // ë°˜ì‘ ì¤‘ì‹¬
 5  // ì°½ì˜ì  ë¬¸ì œí•´ê²°
];

const artModelWrap = document.getElementById('modelArtWrap');

artModelTitles.forEach((title,i)=>{

  let textareas = '';
  for(let j=0; j<artLineCounts[i]; j++){
    textareas += `<textarea class="blank" data-key="a${i}-${j}"></textarea>`;
  }

  artModelWrap.innerHTML += `
    <div class="competency-box">
      <div class="competency-title">(${i+1}) ${title}</div>

      <div class="multi-input">
        ${textareas}
      </div>

      <div class="competency-actions">
        <button class="grade" onclick="gradeModel(this, artModelAnswers)">ì±„ì </button>
<button class="grade" onclick="showModelAnswer(this, artModelAnswers)">ì •ë‹µ</button>
<button class="clear" onclick="clearModel(this)">ì§€ìš°ê¸°</button>
      </div>

      <div class="score">ì •ë‹µë¥  : 0%</div>
    </div>
  `;
});


/* ===============================
   ì •ë‹µ ë°ì´í„°
=============================== */

const artModelAnswers = {

  /* (0) ë¯¸ìˆ  ëª¨í˜• ì´ë¦„ */
  "a0-0":"ê·€ë‚©ì  ì‚¬ê³ ë²•",
  "a0-1":"ë°˜ì‘ ì¤‘ì‹¬ í•™ìŠµë²•",
  "a0-2":"ì§ì ‘ êµìˆ˜ë²•",
  "a0-3":"ì°½ì˜ì  ë¬¸ì œí•´ê²°ë²•",

  /* (1) ê·€ë‚©ì  ì‚¬ê³ ë²• */
  "a1-0":"ë¬¸ì œ ì¸ì‹",
  "a1-1":"ê´€ê³„ íƒìƒ‰",
  "a1-2":"ê°œë… ë°œê²¬",
  "a1-3":"ê°œë… ì ìš©",
  "a1-4":"ì •ë¦¬ ë° ë°œì „",

  /* (2) ì§ì ‘ êµìˆ˜ë²• */
  "a2-0":"ë¬¸ì œ ì¸ì‹",
  "a2-1":"ì„¤ëª… ë° ì‹œë²”",
  "a2-2":"ì§ˆì˜ì‘ë‹µ",
  "a2-3":"ì—°ìŠµ í™œë™(êµ¬ì¡°í™”ëœ ì—°ìŠµ)",
  "a2-4":"ì‘í’ˆ ì œì‘(ë…ë¦½ì ì¸ ì—°ìŠµ)",
  "a2-5":"ì •ë¦¬ ë° ë°œì „",

  /* (3) ë°˜ì‘ ì¤‘ì‹¬ */
  "a3-0":"ë°˜ì‘ í˜•ì„±",
  "a3-1":"ë°˜ì‘ ëª…ë£Œí™”",
  "a3-2":"ë°˜ì‘ ì‹¬í™”",
  "a3-3":"ë°˜ì‘ ë‚´ë©´í™”(ì •ë¦¬ ë° ë°œì „)",

  /* (4) ì°½ì˜ì  ë¬¸ì œí•´ê²° */
  "a4-0":"ë¬¸ì œ ì¸ì‹",
  "a4-1":"ì•„ì´ë””ì–´ íƒìƒ‰",
  "a4-2":"ì•„ì´ë””ì–´ ì •êµí™”",
  "a4-3":"ì•„ì´ë””ì–´ ì ìš©",
  "a4-4":"ì¢…í•© ë° ì¬ê²€í† "
};
/* ===============================
   ëª¨í˜• íƒ­ > ì²´ìœ¡ ì¹´ë“œ (ì¤„ ìˆ˜ ì ìš©)
=============================== */

const peModelTitles = [
 'ì²´ìœ¡ ëª¨í˜• ì´ë¦„',
 'ì§ì ‘ êµìˆ˜ ëª¨í˜•',
 'ì´í•´ ì¤‘ì‹¬ ê²Œì„ ëª¨í˜•',
 'ë™ë£Œ êµìˆ˜ ëª¨í˜•',
 'í•™ìƒ-íŒ€ ì„±ì·¨ ë°°ë¶„(STAD)',
 'íŒ€ ê²Œì„ í† ë„ˆë¨¼íŠ¸(TGT)',
 'íŒ€-ë³´ì¡° ìˆ˜ì—…(TAI)',
 'ê°œì¸ì Â·ì‚¬íšŒì  ì±…ì„ê° ëª¨í˜•',
 'ìŠ¤í¬ì¸  êµìœ¡ ëª¨í˜•',
 'íƒêµ¬ ìˆ˜ì—… ëª¨í˜•',
 'ëª¨ìŠ¤í†¤ ìˆ˜ì—… ìŠ¤í™íŠ¸ëŸ¼'
];

/* ğŸ”¹ ì¹´ë“œë³„ ì¤„ ìˆ˜ */
const peLineCounts = [
 10, // ì²´ìœ¡ ëª¨í˜• ì´ë¦„
 6,  // ì§ì ‘ êµìˆ˜
 6,  // ì´í•´ ì¤‘ì‹¬ ê²Œì„
 6,  // ë™ë£Œ êµìˆ˜
 5,  // STAD
 6,  // TGT
 5,  // TAI
 5,  // ì±…ì„ê° ëª¨í˜•
 6,  // ìŠ¤í¬ì¸  êµìœ¡
 5,  // íƒêµ¬ ìˆ˜ì—…
 11  // ëª¨ìŠ¤í†¤
];

const peModelWrap = document.getElementById('modelPeWrap');

peModelTitles.forEach((title,i)=>{

  let textareas = '';
  for(let j=0; j<peLineCounts[i]; j++){
    textareas += `<textarea class="blank" data-key="p${i}-${j}"></textarea>`;
  }

  peModelWrap.innerHTML += `
    <div class="competency-box">
      <div class="competency-title">(${i+1}) ${title}</div>

      <div class="multi-input">
        ${textareas}
      </div>

      <div class="competency-actions">
<button class="grade" onclick="gradeModel(this, peModelAnswers)">ì±„ì </button>
<button class="grade" onclick="showModelAnswer(this, peModelAnswers)">ì •ë‹µ</button>
<button class="clear" onclick="clearModel(this)">ì§€ìš°ê¸°</button>
      </div>

      <div class="score">ì •ë‹µë¥  : 0%</div>
    </div>
  `;
});


/* ===============================
   ì •ë‹µ ë°ì´í„°
=============================== */

const peModelAnswers = {

  /* (0) ì²´ìœ¡ ëª¨í˜• ì´ë¦„ */
  "p0-0":"ê°œì¸ì Â·ì‚¬íšŒì  ì±…ì„ê° ëª¨í˜•",
  "p0-1":"ë™ë£Œ êµìˆ˜ ëª¨í˜•",
  "p0-2":"ëª¨ìŠ¤í†¤ ìˆ˜ì—… ìŠ¤í™íŠ¸ëŸ¼",
  "p0-3":"ìŠ¤í¬ì¸  êµìœ¡ ëª¨í˜•",
  "p0-4":"ì´í•´ ì¤‘ì‹¬ ê²Œì„ ëª¨í˜•",
  "p0-5":"ì§ì ‘ êµìˆ˜ ëª¨í˜•",
  "p0-6":"íƒêµ¬ ìˆ˜ì—… ëª¨í˜•",
  "p0-7":"íŒ€ ê²Œì„ í† ë„ˆë¨¼íŠ¸(TGT)",
  "p0-8":"íŒ€-ë³´ì¡° ìˆ˜ì—…(TAI)",
  "p0-9":"í•™ìƒ-íŒ€ ì„±ì·¨ ë°°ë¶„(STAD)",

  /* (1) ì§ì ‘ êµìˆ˜ */
  "p1-0":"ì „ì‹œ ê³¼ì œ ë³µìŠµ",
  "p1-1":"ìƒˆë¡œìš´ ê³¼ì œ ì œì‹œ",
  "p1-2":"ì´ˆê¸° ê³¼ì œ ì—°ìŠµ",
  "p1-3":"í”¼ë“œë°± ë° êµì •",
  "p1-4":"ë…ìì ì¸ ì—°ìŠµ",
  "p1-5":"ë³¸ì‹œ í•™ìŠµ ë³µìŠµ",

  /* (2) ì´í•´ ì¤‘ì‹¬ ê²Œì„ */
  "p2-0":"ê²Œì„ ì†Œê°œ",
  "p2-1":"ê²Œì„ ì´í•´",
  "p2-2":"ì „ìˆ  ì´í•´",
  "p2-3":"ì˜ì‚¬ ê²°ì •",
  "p2-4":"ê¸°ìˆ ì—°ìŠµ",
  "p2-5":"ì‹¤ì œ ê²Œì„ ìˆ˜í–‰",

  /* (3) ë™ë£Œ êµìˆ˜ */
  "p3-0":"ì¤€ë¹„ ìš´ë™ ë° í•™ìŠµ ë¬¸ì œ í™•ì¸",
  "p3-1":"ê¸°ë³¸ ê¸°ëŠ¥ ì´í•´í•˜ê¸°",
  "p3-2":"ì§ ì •í•˜ê¸° ë° ì—­í•  ë°°ì •í•˜ê¸°",
  "p3-3":"ê³¼ì œ ì œì‹œ ë° ë™ë£Œ êµìˆ˜ í•™ìŠµ",
  "p3-4":"ì—­í•  ë°”ê¾¸ê¸°",
  "p3-5":"ì •ë¦¬ìš´ë™",

  /* (4) STAD */
  "p4-0":"íŒ€ í¸ì„±",
  "p4-1":"í•™ìŠµ ê³¼ì œ ì œì‹œ ë° 1ì°¨ ì—°ìŠµ",
  "p4-2":"1ì°¨ í‰ê°€ ë° íŒ€ ì ìˆ˜ ë°œí‘œ",
  "p4-3":"2ì°¨ ì—°ìŠµ",
  "p4-4":"2ì°¨ í‰ê°€ ë° íŒ€ ì ìˆ˜ ë°œí‘œ",

  /* (5) TGT */
  "p5-0":"íŒ€ í¸ì„±",
  "p5-1":"í•™ìŠµ ê³¼ì œ ì œì‹œ ë° 1ì°¨ ì—°ìŠµ",
  "p5-2":"1ì°¨ í‰ê°€ ë° ê°™ì€ ë“±ìœ„ë¼ë¦¬ì˜ ì ìˆ˜ ë¹„êµ",
  "p5-3":"2ì°¨ ì—°ìŠµ",
  "p5-4":"2ì°¨ í‰ê°€ ë° ê°™ì€ ë“±ìœ„ë¼ë¦¬ì˜ ì ìˆ˜ ë¹„êµ",
  "p5-5":"íŒ€ ì„±ì  ë°œí‘œ",

  /* (6) TAI */
  "p6-0":"íŒ€ í¸ì„±",
  "p6-1":"ìˆ˜í–‰ ê¸°ì¤€ ë° íŒ€ë³„ í•™ìŠµ ê³¼ì œ ì œì‹œ",
  "p6-2":"íŒ€ë³„ ê³¼ì œ ìˆ˜í–‰",
  "p6-3":"ê³¼ì œ ì™„ìˆ˜ ì²´í¬ ë° ë‹¤ìŒ ê³¼ì œë¡œ ì´ë™",
  "p6-4":"í‰ê°€",

  /* (7) ê°œì¸ì Â·ì‚¬íšŒì  ì±…ì„ê° */
  "p7-0":"íƒ€ì¸ì˜ ê¶Œë¦¬ì™€ ê°ì • ì¡´ì¤‘",
  "p7-1":"ì°¸ì—¬ì™€ ë…¸ë ¥",
  "p7-2":"ìê¸° ê°ë…",
  "p7-3":"íƒ€ì¸ì„ ë°°ë ¤í•˜ê³  ë•ê¸°",
  "p7-4":"ì²´ìœ¡ ìˆ˜ì—… ë°–ìœ¼ë¡œì˜ ì „ì´",

  /* (8) ìŠ¤í¬ì¸  êµìœ¡ */
  "p8-0":"ì¶•ì œí™”",
  "p8-1":"íŒ€ ì†Œì†",
  "p8-2":"ì‹œì¦Œ",
  "p8-3":"ê³µì‹ ê²½ê¸°",
  "p8-4":"ê²°ìŠ¹ì „ í–‰ì‚¬",
  "p8-5":"ê¸°ë¡ ë³´ì¡´",

  /* (9) íƒêµ¬ ìˆ˜ì—… */
  "p9-0":"ë¬¸ì œì˜ ê·œëª…",
  "p9-1":"ë¬¸ì œì˜ ì œì‹œ",
  "p9-2":"ë¬¸ì œì— ëŒ€í•œ ìœ ë„ëœ íƒêµ¬",
  "p9-3":"ìµœì¢… í•´ë‹µì˜ ê·œëª… ë° ì •êµí™”",
  "p9-4":"ë¶„ì„,í‰ê°€,ë…¼ì˜ë¥¼ ìœ„í•œ ë°œí‘œ",

  /* (10) ëª¨ìŠ¤í†¤ */
  "p10-0":"ëª…ë ¹ì‹",
  "p10-1":"ì—°ìŠµì‹",
  "p10-2":"êµë¥˜ì‹",
  "p10-3":"ìê²€ì‹",
  "p10-4":"í¬í•¨ì‹",
  "p10-5":"ìœ ë„ ë°œê²¬ì‹",
  "p10-6":"ìˆ˜ë ´ ë°œê²¬ì‹",
  "p10-7":"í™•ì‚° ìƒì‚°ì‹",
  "p10-8":"ìê¸° ì„¤ê³„ì‹",
  "p10-9":"í•™ìƒ ì£¼ë„ì‹",
  "p10-10":"ìê¸° í•™ìŠµì‹"
};
/* ===============================
   ëª¨í˜• íƒ­ > ë„ë• ì¹´ë“œ (ì¤„ ìˆ˜ ì ìš©)
=============================== */

const moralModelTitles = [
  'ë„ë• ëª¨í˜• ì´ë¦„',
  'ê°œë… ë¶„ì„ ìˆ˜ì—… ëª¨í˜•',
  'ê°€ì¹˜ ë¶„ì„ ìˆ˜ì—… ëª¨í˜•',
  'ì² í•™ì  íƒêµ¬ ê³µë™ì²´ ìˆ˜ì—… ëª¨í˜•',
  'ê°€ì¹˜ê°ˆë“±í•´ê²° ìˆ˜ì—… ëª¨í˜•',
  'í•©ë¦¬ì  ì˜ì‚¬ê²°ì • ìˆ˜ì—… ëª¨í˜•',
  'ë„ë•ì  í† ë¡  ìˆ˜ì—… ëª¨í˜•',
  'ì§‘ë‹¨ íƒêµ¬ ìˆ˜ì—… ëª¨í˜•',
  'ë„ë• ì´ì•¼ê¸° ìˆ˜ì—… ëª¨í˜•',
  'ê²½í—˜ í•™ìŠµ ìˆ˜ì—… ëª¨í˜•',
  'ì—­í•  ë†€ì´ ìˆ˜ì—… ëª¨í˜•',
  'ê°€ì¹˜ ëª…ë£Œí™” ìˆ˜ì—… ëª¨í˜•'
];

/* ğŸ”¹ ì¹´ë“œë³„ ì¤„ ìˆ˜ */
const moralLineCounts = [
 11, // ë„ë• ëª¨í˜• ì´ë¦„
 6,  // ê°œë… ë¶„ì„
 6,  // ê°€ì¹˜ ë¶„ì„
 6,  // ì² í•™ì  íƒêµ¬ ê³µë™ì²´
 5,  // ê°€ì¹˜ ê°ˆë“± í•´ê²°
 5,  // í•©ë¦¬ì  ì˜ì‚¬ê²°ì •
 11, // ë„ë•ì  í† ë¡ 
 5,  // ì§‘ë‹¨ íƒêµ¬
 5,  // ë„ë• ì´ì•¼ê¸°
 5,  // ê²½í—˜ í•™ìŠµ
 8,  // ì—­í•  ë†€ì´
 4   // ê°€ì¹˜ ëª…ë£Œí™”
];

const moralModelWrap = document.getElementById('modelMoralWrap');

moralModelTitles.forEach((title,i)=>{

  let textareas = '';
  for(let j=0; j<moralLineCounts[i]; j++){
    textareas += `<textarea class="blank" data-key="mo${i}-${j}"></textarea>`;
  }

  moralModelWrap.innerHTML += `
    <div class="competency-box">
      <div class="competency-title">(${i+1}) ${title}</div>

      <div class="multi-input">
        ${textareas}
      </div>

      <div class="competency-actions">
        <button class="grade" onclick="gradeModel(this,moralModelAnswers)">ì±„ì </button>
<button class="grade" onclick="showModelAnswer(this, moralModelAnswers)">ì •ë‹µ</button>
<button class="clear" onclick="clearModel(this)">ì§€ìš°ê¸°</button>
      </div>

      <div class="score">ì •ë‹µë¥  : 0%</div>
    </div>
  `;
});


/* ===============================
   ì •ë‹µ ë°ì´í„°
=============================== */

const moralModelAnswers = {

  /* (0) ë„ë• ëª¨í˜• ì´ë¦„ (11ì¤„) */
  "mo0-0":"ê°€ì¹˜ê°ˆë“±í•´ê²° ìˆ˜ì—… ëª¨í˜•",
  "mo0-1":"ê°€ì¹˜ ëª…ë£Œí™” ìˆ˜ì—… ëª¨í˜•",
  "mo0-2":"ê°€ì¹˜ ë¶„ì„ ìˆ˜ì—… ëª¨í˜•",
  "mo0-3":"ê°œë… ë¶„ì„ ìˆ˜ì—… ëª¨í˜•",
  "mo0-4":"ê²½í—˜ í•™ìŠµ ìˆ˜ì—… ëª¨í˜•",
  "mo0-5":"ë„ë•ì  í† ë¡  ìˆ˜ì—… ëª¨í˜•",
  "mo0-6":"ë„ë• ì´ì•¼ê¸° ìˆ˜ì—… ëª¨í˜•",
  "mo0-7":"ì—­í•  ë†€ì´ ìˆ˜ì—… ëª¨í˜•",
  "mo0-8":"ì§‘ë‹¨ íƒêµ¬ ìˆ˜ì—… ëª¨í˜•",
  "mo0-9":"ì² í•™ì  íƒêµ¬ ê³µë™ì²´ ìˆ˜ì—… ëª¨í˜•",
  "mo0-10":"í•©ë¦¬ì  ì˜ì‚¬ê²°ì • ìˆ˜ì—… ëª¨í˜•",

  /* (1) ê°œë… ë¶„ì„ ìˆ˜ì—… ëª¨í˜• (6ì¤„) */
  "mo1-0":"ë¶„ì„ë  ê°€ì¹˜ ê°œë…ì˜ í™•ì¸",
  "mo1-1":"ê°œë…ì˜ ì „í˜•ì  ì‚¬ë¡€ì™€ ë°˜ëŒ€ë˜ëŠ” ì‚¬ë¡€ íƒêµ¬",
  "mo1-2":"ê°œë…ì˜ ê²½ê³„ì— í•´ë‹¹í•˜ëŠ” ì‚¬ë¡€ í™•ì¸",
  "mo1-3":"ê°œë…ê³¼ ê´€ë ¨ëœ ê°œë…ì˜ ë¶„ì„",
  "mo1-4":"ê°€ìƒì ì¸ ì‚¬íƒœì—ì˜ ì ìš©",
  "mo1-5":"ë¶„ì„ëœ ì˜ë¯¸ì˜ ìˆ˜ìš© ì—¬ë¶€ ê²€í† ì™€ ì •ë¦¬",

  /* (2) ê°€ì¹˜ ë¶„ì„ ìˆ˜ì—… ëª¨í˜• (6ì¤„) */
  "mo2-0":"ë„ë•ì  ë¬¸ì œ ì‚¬íƒœì˜ ì œì‹œ",
  "mo2-1":"ê°€ì¹˜ ë¬¸ì œì˜ í™•ì¸ê³¼ ëª…ë£Œí™”",
  "mo2-2":"ìê¸° ì…ì¥ì˜ ì„¤ì • ë° ì‚¬ì‹¤ì  íƒ€ë‹¹ì„± íƒìƒ‰",
  "mo2-3":"ì ì •ì  ê°€ì¹˜ ê²°ì • ë° ê°€ì¹˜ ì›ë¦¬ì˜ ê²€ì‚¬",
  "mo2-4":"ì…ì¥ì˜ ìˆ˜ì • ë° ì˜ì‚¬ ê²°ì •",
  "mo2-5":"ì‹¤ì²œ ë™ê¸° ê°•í™” ë° ì¼ìƒìƒí™œì—ì˜ í™•ëŒ€ ì ìš©",

  /* (3) ì² í•™ì  íƒêµ¬ ê³µë™ì²´ ìˆ˜ì—… ëª¨í˜• (6ì¤„) */
  "mo3-0":"ìƒê° ì—´ê¸°",
  "mo3-1":"êµì¬ ì½ê¸°",
  "mo3-2":"ì§ˆë¬¸ ë§Œë“¤ê¸°",
  "mo3-3":"ëŒ€í‘œ ì§ˆë¬¸ ì„ ì •í•˜ê¸°",
  "mo3-4":"í† ì˜ í† ë¡ í•˜ê¸°",
  "mo3-5":"ìƒê° ì •ë¦¬ ë° í‘œí˜„í•˜ê¸°",

  /* (4) ê°€ì¹˜ê°ˆë“±í•´ê²° ìˆ˜ì—… ëª¨í˜• (5ì¤„) */
  "mo4-0":"ë„ë•ì  ë¬¸ì œ ì‚¬íƒœì˜ ì œì‹œ",
  "mo4-1":"ê´€ë ¨ ê·œë²” í™•ì¸ ë° ì˜ë¯¸ íŒŒì•…",
  "mo4-2":"ë¬¸ì œ ì‚¬íƒœì˜ ì„±ê²© ë¶„ì„",
  "mo4-3":"ìê¸° ì…ì¥ì˜ ì„ íƒê³¼ ì •ë‹¹í™”",
  "mo4-4":"ìê¸° ì…ì¥ì˜ ìˆ˜ì • ë° ëŒ€ì•ˆ ìˆ™ê³ ",

  /* (5) í•©ë¦¬ì  ì˜ì‚¬ê²°ì • ìˆ˜ì—… ëª¨í˜• (5ì¤„) */
  "mo5-0":"ë„ë•ì  ë¬¸ì œ ì‚¬íƒœì˜ ì œì‹œì™€ ë¶„ì„",
  "mo5-1":"ê´€ë ¨ ê·œë²”ì˜ í™•ì¸ ë° ê·¸ ì˜ë¯¸ì™€ íƒ€ë‹¹ì„± íŒŒì•…",
  "mo5-2":"ì—¬ëŸ¬ ëŒ€ì•ˆì˜ ì„¤ì •ê³¼ ê° ëŒ€ì•ˆì˜ ê²°ê³¼ ê²€í† ",
  "mo5-3":"ëŒ€ì•ˆì˜ ì„ íƒ ë° ì •ë‹¹í™”",
  "mo5-4":"ëŒ€ì•ˆ ì„ íƒì˜ ìˆ˜ì • ë° ì ì •ì  ì˜ì‚¬ê²°ì •",

  /* (6) ë„ë•ì  í† ë¡  ìˆ˜ì—… ëª¨í˜• (11ì¤„) */
  "mo6-0":"ë„ë•ì  ë¬¸ì œ ì‚¬íƒœì˜ ì œì‹œ",
  "mo6-1":"ë„ë•ì  í† ë¡ ì˜ ë„ì…",
  "mo6-2":"ë„ë•ì  ë¬¸ì œ ë¶€ê°í•˜ê¸°",
  "mo6-3":"ì™œë¼ëŠ” ì§ˆë¬¸í•˜ê¸°",
  "mo6-4":"ìƒí™©ì„ ë³µì¡í•˜ê²Œ í•˜ê¸°",
  "mo6-5":"ë„ë•ì  í† ë¡ ì˜ ì‹¬í™”",
  "mo6-6":"ì‹¬ì¸µì  ì§ˆë¬¸í•˜ê¸°",
  "mo6-7":"ì¸ì ‘ ë‹¨ê³„ì˜ ë…¼ì˜ ê°•ì¡°í•˜ê¸°",
  "mo6-8":"ëª…ë£Œí™”ì™€ ìš”ì•½í•˜ê¸°",
  "mo6-9":"ì—­í•  ì±„íƒ ê°•ì¡°í•˜ê¸°",
  "mo6-10":"ì‹¤ì²œ ë™ê¸° ê°•í™” ë° ìƒí™œì—ì˜ í™•ëŒ€ ì ìš©",

  /* (7) ì§‘ë‹¨ íƒêµ¬ ìˆ˜ì—… ëª¨í˜• (5ì¤„) */
  "mo7-0":"íƒêµ¬ ë¬¸ì œì˜ ì„¤ì •",
  "mo7-1":"íƒêµ¬ ê³„íšì˜ ìˆ˜ë¦½",
  "mo7-2":"íƒêµ¬ì˜ ì‹¤ì‹œ",
  "mo7-3":"íƒêµ¬ ê²°ê³¼ ë°œí‘œ ë° ë…¼ì˜",
  "mo7-4":"ì¢…í•© ì •ë¦¬ ë° í‰ê°€",

  /* (8) ë„ë• ì´ì•¼ê¸° ìˆ˜ì—… ëª¨í˜• (5ì¤„) */
  "mo8-0":"í•™ìŠµ ë¬¸ì œ ì¸ì‹ê³¼ ë™ê¸° ìœ ë°œ",
  "mo8-1":"ë„ë• ì´ì•¼ê¸°ì˜ ì œì‹œì™€ ì£¼ìš” ë‚´ìš© íŒŒì•…",
  "mo8-2":"ë„ë• ì´ì•¼ê¸°ì˜ íƒêµ¬ ë° ìì‹ ì˜ ë„ë•ì  ê²½í—˜ ë°œí‘œì™€ ê³µìœ ",
  "mo8-3":"ìì‹ ì˜ ë„ë• ì´ì•¼ê¸° ë˜ëŠ” ìœ ì‚¬í•œ ìƒìƒì˜ ì´ì•¼ê¸° êµ¬ì„±",
  "mo8-4":"ì •ë¦¬ ë° í™•ëŒ€ ì ìš©ê³¼ ì‹¤ì²œ ìƒí™œí™”",

  /* (9) ê²½í—˜ í•™ìŠµ ìˆ˜ì—… ëª¨í˜• (5ì¤„) */
  "mo9-0":"ê²½í—˜ í•™ìŠµì˜ ì£¼ì œ ì„¤ì •í•˜ê¸°",
  "mo9-1":"ê²½í—˜ í•™ìŠµ ê³„íš ì„¸ìš°ê¸°",
  "mo9-2":"ê²½í—˜ í•™ìŠµ ì‹¤í–‰í•˜ê¸°",
  "mo9-3":"ê²½í—˜ì˜ êµë¥˜ì™€ ë…¼ì˜ë¥¼ í†µí•´ ê²½í—˜ ê³µìœ í•˜ê³  ì¼ë°˜í™”í•˜ê¸°",
  "mo9-4":"ì¢…í•© ì •ë¦¬ ë° í‰ê°€í•˜ê¸°",

  /* (10) ì—­í•  ë†€ì´ ìˆ˜ì—… ëª¨í˜• (8ì¤„) */
  "mo10-0":"ì—­í• ë†€ì´ ì¤€ë¹„",
  "mo10-1":"ì—­í• ë†€ì´ ì°¸ê°€ì ì„ ì •",
  "mo10-2":"ë¬´ëŒ€ ì„¤ì¹˜",
  "mo10-3":"ì°¸ì—¬ì  ê´€ì°°ìë¡œì„œ ì²­ì¤‘ì˜ ì¤€ë¹„",
  "mo10-4":"ì—­í• ë†€ì´ ì‹œì—°",
  "mo10-5":"í† ë¡  ë° í‰ê°€",
  "mo10-6":"ì¬ì—°",
  "mo10-7":"ê²½í—˜ì˜ ê³µìœ ì™€ ì¼ë°˜í™”",

  /* (11) ê°€ì¹˜ ëª…ë£Œí™” ìˆ˜ì—… ëª¨í˜• (4ì¤„) */
  "mo11-0":"ë„ë•ì  ë¬¸ì œ ì‚¬íƒœì˜ ì œì‹œ",
  "mo11-1":"ì„ íƒ",
  "mo11-2":"ì¡´ì¤‘",
  "mo11-3":"í–‰ë™"
};
/* ===============================
   ëª¨í˜• íƒ­ > ì‹¤ê³¼ ì¹´ë“œ (ì¤„ ìˆ˜ ì ìš©)
=============================== */

const paModelTitles = [
  'ì‹¤ê³¼ ëª¨í˜• ì´ë¦„',
  'ë¬¸ì œí•´ê²° êµìˆ˜ í•™ìŠµ ë°©ë²•',
  'í˜‘ë™ í•™ìŠµ êµìˆ˜ í•™ìŠµ ë°©ë²•',
  'ëª¨ë“ˆ í•™ìŠµ',
  'í”„ë¡œì íŠ¸ êµìˆ˜ í•™ìŠµ ë°©ë²•',
  'ê¸°ìˆ ì  ë¬¸ì œí•´ê²° ê³¼ì • ëª¨í˜•',
  'ì‹¤ìŠµ ì¤‘ì‹¬ êµìˆ˜Â·í•™ìŠµ ë°©ë²•',
  'ì‹¤ì²œì  ë¬¸ì œí•´ê²° í•™ìŠµ',
  'í™ˆ í”„ë¡œì íŠ¸ ëª¨í˜•',
  'ë¬¸ì œ ì¤‘ì‹¬ ìˆ˜ì—…',
  'ì‹¤ì²œì  ì¶”ë¡  êµìˆ˜Â·í•™ìŠµ ëª¨í˜•'
];

/* ğŸ”¹ ì¹´ë“œë³„ ì¤„ ìˆ˜ */
const paLineCounts = [
 10, // ì‹¤ê³¼ ëª¨í˜• ì´ë¦„
 5,  // ë¬¸ì œí•´ê²°
 5,  // í˜‘ë™ í•™ìŠµ
 5,  // ëª¨ë“ˆ
 4,  // í”„ë¡œì íŠ¸
 7,  // ê¸°ìˆ ì  ë¬¸ì œí•´ê²°
 5,  // ì‹¤ìŠµ ì¤‘ì‹¬
 5,  // ì‹¤ì²œì  ë¬¸ì œí•´ê²°
 8,  // í™ˆí”„ë¡œì íŠ¸
 4,  // ë¬¸ì œ ì¤‘ì‹¬
 7   // ì‹¤ì²œì  ì¶”ë¡ 
];

const paModelWrap = document.getElementById('modelPaWrap');

paModelTitles.forEach((title,i)=>{

  let textareas = '';
  for(let j=0; j<paLineCounts[i]; j++){
    textareas += `<textarea class="blank" data-key="pa${i}-${j}"></textarea>`;
  }

  paModelWrap.innerHTML += `
    <div class="competency-box">
      <div class="competency-title">(${i+1}) ${title}</div>

      <div class="multi-input">
        ${textareas}
      </div>

      <div class="competency-actions">
        <button class="grade" onclick="gradeModel(this,paModelAnswers)">ì±„ì </button>
<button class="grade" onclick="showModelAnswer(this, paModelAnswers)">ì •ë‹µ</button>
<button class="clear" onclick="clearModel(this)">ì§€ìš°ê¸°</button>
      </div>

      <div class="score">ì •ë‹µë¥  : 0%</div>
    </div>
  `;
});


/* ===============================
   ì •ë‹µ ë°ì´í„°
=============================== */

const paModelAnswers = {

  /* (0) ì‹¤ê³¼ ëª¨í˜• ì´ë¦„ (10ì¤„) */
  "pa0-0":"ê¸°ìˆ ì  ë¬¸ì œí•´ê²° ê³¼ì • ëª¨í˜•",
  "pa0-1":"ëª¨ë“ˆ í•™ìŠµ",
  "pa0-2":"ë¬¸ì œ ì¤‘ì‹¬ ìˆ˜ì—…",
  "pa0-3":"ë¬¸ì œí•´ê²° êµìˆ˜ í•™ìŠµ ë°©ë²•",
  "pa0-4":"ì‹¤ìŠµ ì¤‘ì‹¬ êµìˆ˜Â·í•™ìŠµ ë°©ë²•",
  "pa0-5":"ì‹¤ì²œì  ë¬¸ì œí•´ê²° í•™ìŠµ",
  "pa0-6":"ì‹¤ì²œì  ì¶”ë¡  êµìˆ˜Â·í•™ìŠµ ëª¨í˜•",
  "pa0-7":"í”„ë¡œì íŠ¸ êµìˆ˜ í•™ìŠµ ë°©ë²•",
  "pa0-8":"í˜‘ë™ í•™ìŠµ êµìˆ˜ í•™ìŠµ ë°©ë²•",
  "pa0-9":"í™ˆ í”„ë¡œì íŠ¸ ëª¨í˜•",

  /* (1) ë¬¸ì œí•´ê²° êµìˆ˜ í•™ìŠµ ë°©ë²• (5ì¤„) */
  "pa1-0":"ë¬¸ì œ ì¸ì‹",
  "pa1-1":"ì •ë³´ ìˆ˜ì§‘ì„ í†µí•œ ë°©ì•ˆ ë§ˆë ¨ê³¼ ì„ íƒì˜ ì¤€ë¹„",
  "pa1-2":"ë¬¸ì œ í•´ê²° ë°©ì•ˆ ì„¤ì •",
  "pa1-3":"ë¬¸ì œ í•´ê²° ë°©ì•ˆ ì ìš©",
  "pa1-4":"ê²°ê³¼ì— ëŒ€í•œ í‰ê°€",

  /* (2) í˜‘ë™ í•™ìŠµ êµìˆ˜ í•™ìŠµ ë°©ë²• (5ì¤„) */
  "pa2-0":"ëª¨ë‘  êµ¬ì„±",
  "pa2-1":"ê³¼ì œ ì œì‹œ ë° ì„ íƒ",
  "pa2-2":"ì „ë¬¸ê°€ ì§‘ë‹¨ í™œë™",
  "pa2-3":"ëª¨ì§‘ë‹¨ í™œë™",
  "pa2-4":"í‰ê°€",

  /* (3) ëª¨ë“ˆ í•™ìŠµ (5ì¤„) */
  "pa3-0":"ì§„ë‹¨ í‰ê°€ ì‹¤ì‹œ",
  "pa3-1":"ê°œì¸ë³„ ëŠ¥ë ¥ íŒŒì•…",
  "pa3-2":"ëŠ¥ë ¥ë³„ ëª¨ë“ˆ í•™ìŠµ",
  "pa3-3":"ìê¸° í‰ê°€",
  "pa3-4":"ì´ê´„í‰ê°€",

  /* (4) í”„ë¡œì íŠ¸ êµìˆ˜ í•™ìŠµ ë°©ë²• (4ì¤„) */
  "pa4-0":"ëª©ì  ì„¤ì •",
  "pa4-1":"ê³„íš",
  "pa4-2":"ì‹¤í–‰",
  "pa4-3":"í‰ê°€",

  /* (5) ê¸°ìˆ ì  ë¬¸ì œí•´ê²° ê³¼ì • ëª¨í˜• (7ì¤„) */
  "pa5-0":"ë¬¸ì œ ì´í•´",
  "pa5-1":"ì—°êµ¬ì™€ ê°œë°œ",
  "pa5-2":"ì•„ì´ë””ì–´ êµ¬ìƒ",
  "pa5-3":"ì•„ì´ë””ì–´ í‰ê°€ ë° ì„ ì •",
  "pa5-4":"ì•„ì´ë””ì–´ êµ¬ì²´í™”",
  "pa5-5":"ì‹¤í˜„",
  "pa5-6":"í‰ê°€",

  /* (6) ì‹¤ìŠµ ì¤‘ì‹¬ êµìˆ˜Â·í•™ìŠµ ë°©ë²• (5ì¤„) */
  "pa6-0":"ì‹¤ìŠµ í™œë™ì˜ ëª©ì  ë° ê´€ë ¨ ì§€ì‹ ì´í•´",
  "pa6-1":"ì‹¤ìŠµ ê³¼ì •ì˜ ì œì‹œ",
  "pa6-2":"ê¸°ë³¸ ê¸°ëŠ¥ ì‹œë²” ê´€ì°°",
  "pa6-3":"ì‹¤ìŠµ ê³¼ì œ ìˆ˜í–‰ ê³¼ì •ì—ì„œ ê¸°ë³¸ ê¸°ëŠ¥ ìŠµë“",
  "pa6-4":"ìê¸° í‰ê°€ ë° êµì‚¬ í‰ê°€",

  /* (7) ì‹¤ì²œì  ë¬¸ì œí•´ê²° í•™ìŠµ (5ì¤„) */
  "pa7-0":"ë¬¸ì œ ì •ì˜",
  "pa7-1":"ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ ì •ë³´ ìˆ˜ì§‘",
  "pa7-2":"ëŒ€ì•ˆ íƒìƒ‰ ë° ìµœì„ ì˜ ëŒ€ì•ˆ ì„ íƒ",
  "pa7-3":"í–‰ë™",
  "pa7-4":"í–‰ë™ì— ëŒ€í•œ í‰ê°€",

  /* (8) í™ˆ í”„ë¡œì íŠ¸ ëª¨í˜• (8ì¤„) */
  "pa8-0":"ë¬¸ì œ ì œê¸°",
  "pa8-1":"ì‹¤ìŠµ ê³„íš ìˆ˜ë¦½",
  "pa8-2":"ì‹œë²” ì‹¤ìŠµ",
  "pa8-3":"í™ˆ í”„ë¡œì íŠ¸ ê³¼ì œ ì œì‹œ",
  "pa8-4":"ì‹¤ìŠµ ì¤€ë¹„",
  "pa8-5":"ì‹¤ìŠµ",
  "pa8-6":"ë°˜ì„±Â·í‰ê°€",
  "pa8-7":"ì •ë¦¬",

  /* (9) ë¬¸ì œ ì¤‘ì‹¬ ìˆ˜ì—… (4ì¤„) */
  "pa9-0":"ë¬¸ì œ íŒŒì•… ì´í•´",
  "pa9-1":"ì•„ì´ë””ì–´ íƒìƒ‰ ë° ê°œë°œ",
  "pa9-2":"í•´ê²°ì±… íƒìƒ‰ ë° ì‹¤í˜„",
  "pa9-3":"í•´ê²°ì±… í‰ê°€",

  /* (10) ì‹¤ì²œì  ì¶”ë¡  êµìˆ˜Â·í•™ìŠµ ëª¨í˜• (7ì¤„) */
  "pa10-0":"ë¬¸ì œ ì •ì˜",
  "pa10-1":"ë¬¸ì œì˜ ë°°ê²½ ì´í•´",
  "pa10-2":"ëª©í‘œ ì„¤ì •",
  "pa10-3":"ì •ë³´ ìˆ˜ì§‘",
  "pa10-4":"ëŒ€ì•ˆ íƒìƒ‰ ë° ìµœì„ ì˜ ì•ˆ ì„ íƒ",
  "pa10-5":"í–‰ë™",
  "pa10-6":"í‰ê°€ ë° ë°˜ì„±"
};
/* ===============================
   ëª¨í˜• íƒ­ > ë°”ìŠ¬ì¦ ì¹´ë“œ (ì¤„ ìˆ˜ ì ìš©)
=============================== */

const bsjModelTitles = [
  'ë°”ìŠ¬ì¦ ëª¨í˜• ì´ë¦„',
  'ì„±ì·¨ê¸°ì¤€ ì¶œë°œí˜•',
  'í•™ìƒ ìš”êµ¬í˜•',
  'í•™ìŠµ ê¸°ëŠ¥ ìˆ˜ë‹¨í˜•',
  'ë¬¸ì œ í•´ê²°í˜•',
  'í•™êµ í–‰ì‚¬í˜•',
  'ì´ë²¤íŠ¸í˜•',
  'ì¥ì†Œ ê¸°ë°˜í˜•',
  'í”„ë¡œì íŠ¸í˜•'
];

/* ğŸ”¹ ì¹´ë“œë³„ ì¤„ ìˆ˜ */
const bsjLineCounts = [
 8, // ë°”ìŠ¬ì¦ ëª¨í˜• ì´ë¦„
 4, // ì„±ì·¨ê¸°ì¤€ ì¶œë°œí˜•
 4, // í•™ìƒ ìš”êµ¬í˜•
 4, // í•™ìŠµ ê¸°ëŠ¥ ìˆ˜ë‹¨í˜•
 4, // ë¬¸ì œ í•´ê²°í˜•
 4, // í•™êµ í–‰ì‚¬í˜•
 4, // ì´ë²¤íŠ¸í˜•
 5, // ì¥ì†Œ ê¸°ë°˜í˜•
 4  // í”„ë¡œì íŠ¸í˜•
];

const bsjModelWrap = document.getElementById('modelBsjWrap');

bsjModelTitles.forEach((title,i)=>{

  let textareas = '';
  for(let j=0; j<bsjLineCounts[i]; j++){
    textareas += `<textarea class="blank" data-key="bsj${i}-${j}"></textarea>`;
  }

  bsjModelWrap.innerHTML += `
    <div class="competency-box">
      <div class="competency-title">(${i+1}) ${title}</div>

      <div class="multi-input">
        ${textareas}
      </div>

      <div class="competency-actions">
<button class="grade" onclick="gradeModel(this, bsjModelAnswers)">ì±„ì </button>
<button class="grade" onclick="showModelAnswer(this, bsjModelAnswers)">ì •ë‹µ</button>
<button class="clear" onclick="clearModel(this)">ì§€ìš°ê¸°</button>
      </div>

      <div class="score">ì •ë‹µë¥  : 0%</div>
    </div>
  `;
});


/* ===============================
   ì •ë‹µ ë°ì´í„°
=============================== */

const bsjModelAnswers = {

  /* (0) ë°”ìŠ¬ì¦ ëª¨í˜• ì´ë¦„ (8ì¤„) */
  "bsj0-0":"ë¬¸ì œ í•´ê²°í˜•",
  "bsj0-1":"ì„±ì·¨ê¸°ì¤€ ì¶œë°œí˜•",
  "bsj0-2":"ì´ë²¤íŠ¸í˜•",
  "bsj0-3":"ì¥ì†Œ ê¸°ë°˜í˜•",
  "bsj0-4":"í”„ë¡œì íŠ¸í˜•",
  "bsj0-5":"í•™êµ í–‰ì‚¬í˜•",
  "bsj0-6":"í•™ìƒ ìš”êµ¬í˜•",
  "bsj0-7":"í•™ìŠµ ê¸°ëŠ¥ ìˆ˜ë‹¨í˜•",

  /* (1) ì„±ì·¨ê¸°ì¤€ ì¶œë°œí˜• (4ì¤„) */
  "bsj1-0":"ì„±ì·¨ê¸°ì¤€ í™•ì¸í•˜ê¸°",
  "bsj1-1":"ìˆ˜ì—…ì˜ ì–¼ê°œ ê·¸ë¦¬ê¸°",
  "bsj1-2":"ë” ìì„¸íˆ ê°œë°œí•˜ë©° ë³´ì™„í•˜ê¸°",
  "bsj1-3":"ì‹¤í–‰í•˜ë©° ì™„ì„±í•˜ê¸°",

  /* (2) í•™ìƒ ìš”êµ¬í˜• (4ì¤„) */
  "bsj2-0":"í•™ìƒì˜ ìš”êµ¬ ìˆ˜ìš©í•˜ê¸°",
  "bsj2-1":"í•™ìƒê³¼ ë‹¨ì› ì„¤ê³„í•˜ê¸°",
  "bsj2-2":"ì„ íƒì‚¬í•­ì„ ì œê³µí•˜ë©° ì‹¤í–‰í•˜ê¸°",
  "bsj2-3":"ì„±ì°°í•˜ê¸°",

  /* (3) í•™ìŠµ ê¸°ëŠ¥ ìˆ˜ë‹¨í˜• (4ì¤„) */
  "bsj3-0":"í•™ìŠµ ê¸°ëŠ¥ ì°¾ê¸°",
  "bsj3-1":"ì¶œë°œì  ì°¾ê¸°",
  "bsj3-2":"í•™ìŠµ ê¸°ëŠ¥ìœ¼ë¡œ êµê³¼ ìˆ˜ì—… ê¿°ê¸°",
  "bsj3-3":"í•™ìŠµ ê¸°ëŠ¥ í‰ê°€í•˜ê¸°",

  /* (4) ë¬¸ì œ í•´ê²°í˜• (4ì¤„) */
  "bsj4-0":"ë¬¸ì œ ì°¾ê¸°",
  "bsj4-1":"ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ ê³„íš ì„¸ìš°ê¸°",
  "bsj4-2":"í•´ê²°ì„ ìœ„í•œ ê³¼ì œ ìˆ˜í–‰í•˜ê¸°",
  "bsj4-3":"ë¬¸ì œ í•´ê²° ê³¼ì • ì„±ì°°í•˜ê¸°",

  /* (5) í•™êµ í–‰ì‚¬í˜• (4ì¤„) */
  "bsj5-0":"í•™êµ í–‰ì‚¬ í™•ì¸í•˜ê¸°",
  "bsj5-1":"í•™êµ í–‰ì‚¬ë¡œ ìˆ˜ì—… ì„¤ê³„í•˜ê¸°",
  "bsj5-2":"í•™êµ í–‰ì‚¬ì— ì°¸ì—¬í•˜ê¸°",
  "bsj5-3":"í•™êµ í–‰ì‚¬í˜• ìˆ˜ì—… ëŒì•„ë³´ê¸°",

  /* (6) ì´ë²¤íŠ¸í˜• (4ì¤„) */
  "bsj6-0":"íŠ¹ë³„í•œ ë‚  í™•ì¸í•˜ê¸°",
  "bsj6-1":"íŠ¹ë³„í•œ ë‚  ê´€ë ¨ í•™ìŠµ ê²½í—˜ ì •í•˜ê¸°",
  "bsj6-2":"íŠ¹ë³„í•œ ë‚  ê²½í—˜í•˜ê¸°",
  "bsj6-3":"íŠ¹ë³„í•œ ë‚ ì˜ í•™ìŠµ ê²½í—˜ ëŒì•„ë³´ê¸°",

  /* (7) ì¥ì†Œ ê¸°ë°˜í˜• (5ì¤„) */
  "bsj7-0":"ì¥ì†Œ ì°¾ê¸°",
  "bsj7-1":"ì¥ì†Œë¥¼ ì´í•´í•˜ê¸°",
  "bsj7-2":"ì¥ì†Œì—ì„œ í•™ìŠµí•˜ê¸°",
  "bsj7-3":"ì¥ì†Œì—ì„œ í•™ìŠµí•˜ê¸°",
  "bsj7-4":"ì¥ì†Œì— ëŒ€í•œ íƒœë„ ëŒì•„ë³´ê¸°",

  /* (8) í”„ë¡œì íŠ¸í˜• (4ì¤„) */
  "bsj8-0":"ìµœê³ ì¡° í™œë™ ì œì•ˆí•˜ê¸°",
  "bsj8-1":"ìµœê³ ì¡° í™œë™ì„ ìœ„í•œ í•™ìŠµ ê³„íší•˜ê¸°",
  "bsj8-2":"í”„ë¡œì íŠ¸ ì‹¤í–‰í•˜ê¸°",
  "bsj8-3":"ë‹¤ìŒ í”„ë¡œì íŠ¸ë¡œ ì—°ê²°í•˜ê¸°"
};
/* ======================================================
   âœ… ëª¨í˜• ì¹´ë“œ ì „ì²´ ê³µí†µ ì±„ì  ì‹œìŠ¤í…œ
   - ë§ìœ¼ë©´ ì´ˆë¡ ë°°ê²½ (.correct)
   - í‹€ë¦¬ë©´ ë¶‰ì€ ë°°ê²½ (.wrong)
   - ëª¨ë“  ëª¨í˜• íƒ­ì— ë™ì¼ ì ìš©
====================================================== */

/* ê³µë°± ì œê±° */
function norm(t){
  return (t || "").replace(/\s+/g,'').trim();
}

/* ë§ˆí‚¹ ì œê±° */
function clearMark(el){
  el.classList.remove('correct','wrong');
}

/* ===============================
   ğŸ”¹ ê³µí†µ ì±„ì  í•¨ìˆ˜
   - answers ê°ì²´ë§Œ ë‹¤ë¥´ê²Œ ë„£ìœ¼ë©´ ë¨
=============================== */
function gradeModel(btn, answerSet){

  const box = btn.closest('.competency-box');
  const inputs = box.querySelectorAll('.blank');

  let correct = 0;
  let total = 0;

  inputs.forEach(input=>{
    const key = input.dataset.key;
    const answer = answerSet[key];

    clearMark(input);

    if(!answer) return;

    total++;

    if(norm(input.value) === norm(answer)){
      input.classList.add('correct');
      correct++;
    }else{
      input.classList.add('wrong');
    }
  });

  const percent = total === 0 ? 0 : Math.round((correct/total)*100);

  box.querySelector('.score').textContent =
    `ì •ë‹µë¥  : ${percent}% (${correct}/${total})`;
}

/* ===============================
   ğŸ”¹ ê³µí†µ ì •ë‹µë³´ê¸° í•¨ìˆ˜
=============================== */
function showModelAnswer(btn, answerSet){

  const box = btn.closest('.competency-box');
  const inputs = box.querySelectorAll('.blank');

  let total = 0;

  inputs.forEach(input=>{
    const key = input.dataset.key;
    const answer = answerSet[key];

    if(!answer) return;

    total++;
    input.value = answer;
    clearMark(input);
    input.classList.add('correct');
  });

  box.querySelector('.score').textContent =
    `ì •ë‹µë¥  : 100% (${total}/${total})`;
}

/* ===============================
   ğŸ”¹ ê³µí†µ ì§€ìš°ê¸° í•¨ìˆ˜
=============================== */
function clearModel(btn){

  const box = btn.closest('.competency-box');
  const inputs = box.querySelectorAll('.blank');

  inputs.forEach(input=>{
    input.value = '';
    clearMark(input);
  });

  box.querySelector('.score').textContent = 'ì •ë‹µë¥  : 0%';
}
/* ===============================
   ì‚¬íšŒ ë‚´ì²´í‘œ ì •ë‹µ ë°ì´í„°
=============================== */
const socialAnswers = [
  // â‘  ì§€ë¦¬
  [
    "ìœ„ì¹˜ì™€ ì˜ì—­","ì¥ì†Œì™€ ì§€ì—­","ê³µê°„ ë¶„ì„",
    "ê¸°í›„í™˜ê²½","ì§€í˜•í™˜ê²½","ìì—° ì¸ê°„ì˜ ìƒí˜¸ì‘ìš©",
    "ì¸êµ¬","ë¬¸í™”","ë„ì‹œì™€ ì´Œë½","ê²½ì œì™€ êµí†µ",
    "ê°ˆë“±ê³¼ ë¶ˆê· ë“±ì˜ ì„¸ê³„","ì§€ì†ê°€ëŠ¥í•œ í™˜ê²½","ê³µì¡´ì˜ ì„¸ê³„"
  ],

  // â‘¡ ì¼ë°˜ì‚¬íšŒ
  [
    "ë¯¼ì£¼ì£¼ì˜","ì •ì¹˜ ê³¼ì •","êµ­ì œ ì •ì¹˜",
    "ë²•ê³¼ ìƒí™œ","ì¸ê¶Œê³¼ ê¸°ë³¸ê¶Œ","í—Œë²•ê³¼ êµ­ê°€",
    "ê²½ì œ ìƒí™œ","ì‹œì¥ ê²½ì œ","êµ­ê°€ ê²½ì œ",
    "ì‚¬íšŒ ìƒí™œ","ë¬¸í™” ì´í•´","ì‚¬íšŒ ë³€ë™",
    "ì—­ì‚¬ í•™ìŠµì˜ ê¸°ì´ˆ"
  ],

  // â‘¢ ì—­ì‚¬
  [
    "ë¬¸ëª…ì˜ ë°œìƒê³¼ ê³ ëŒ€ ì„¸ê³„ì˜ í˜•ì„±",
    "êµ­ê°€ì˜ í˜•ì„±ê³¼ ë°œì „",
    "í†µì¼ ì‹ ë¼ì™€ ë°œí•´",
    "ê³ ë ¤ì˜ ì„±ë¦½ê³¼ ë³€ì²œ",
    "ì¡°ì„ ì˜ ì„±ë¦½ê³¼ ë³€ì²œ",
    "ì¡°ì„  ì‚¬íšŒì˜ ë³€ë™",
    "ê·¼ í˜„ëŒ€ ì‚¬íšŒë¡œì˜ ì „í™˜"
  ]
];

/* ===============================
   ìœ í‹¸
=============================== */
function normalize(text){
  return text.replace(/\s+/g,'').trim();
}

/* ===============================
   ë²„íŠ¼ ê¸°ëŠ¥ ì—°ê²° (í‘œ ê¸°ì¤€)
=============================== */
document.querySelectorAll('#social .table-actions').forEach(actions => {

  const table = actions.previousElementSibling; // â­ ë°”ë¡œ ìœ„ table
  const textareas = table.querySelectorAll('textarea');
  const scoreBox = actions.querySelector('.score');

  // ì´ tableì´ ì‚¬íšŒ ë‚´ì²´í‘œì—ì„œ ëª‡ ë²ˆì§¸ì¸ì§€
  const tables = Array.from(
    document.querySelectorAll('#social table')
  );
  const tableIndex = tables.indexOf(table);
  const answers = socialAnswers[tableIndex] || [];

  const btnGrade  = actions.querySelector('.btn-grade');
  const btnAnswer = actions.querySelector('.btn-answer');
  const btnClear  = actions.querySelector('.btn-clear');

/* ì±„ì  */
btnGrade.onclick = () => {
  let correct = 0;
  let total = answers.length;

  textareas.forEach((ta,i)=>{
    ta.classList.remove('correct','wrong');
    if(!answers[i]) return;

    if(normalize(ta.value) === normalize(answers[i])){
      ta.classList.add('correct');
      correct++;
    }else{
      ta.classList.add('wrong');
    }
  });

  const percent = total === 0 ? 0 : Math.round((correct / total) * 100);

  scoreBox.textContent = `ì •ë‹µë¥  : ${correct} / ${total} (${percent}%)`;
};

  /* ì •ë‹µ */
  btnAnswer.onclick = () => {
    textareas.forEach((ta,i)=>{
      if(answers[i]) ta.value = answers[i];
      ta.classList.remove('correct','wrong');
    });
    scoreBox.textContent = 'ì •ë‹µë¥  : 0 / 0';
  };

  /* ì§€ìš°ê¸° */
  btnClear.onclick = () => {
    textareas.forEach(ta=>{
      ta.value = '';
      ta.classList.remove('correct','wrong');
    });
    scoreBox.textContent = 'ì •ë‹µë¥  : 0 / 0';
  };

});
</script>
</body>
</html>